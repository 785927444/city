import{d as H,g as J,b as Q,o as u,c as v,a as t,w as o,de as W,r as X,i as p,df as ee,f as a,a1 as d,Z as ae,$ as te,a8 as le,m as se,q as oe,F as x,p as E,z as A,E as ne,a0 as ie,e as N,t as r,cx as de,dg as re,x as $,l as ce}from"./index-ClTGGYJq.js";import{E as ue}from"./el-pagination-B7EgBbn6.js";/* empty css               *//* empty css                    */import{E as pe}from"./el-card-C35fswv6.js";import{E as _e,a as me}from"./index-QIhAl26f.js";import{E as ve}from"./index-CcHJUmzw.js";const fe={class:"annual-plan-container"},ge={class:"list-section"},be={class:"list-header"},ye={class:"list-actions"},he={class:"card-header"},ke={class:"city-name"},we={class:"header-right"},Ve={class:"card-content"},xe={class:"info-row"},Ee={class:"value"},Ce={class:"info-row"},De={class:"value"},Ae={class:"info-row"},Ne={class:"value"},$e={class:"info-row"},Ue={class:"value"},Se={class:"info-row"},Ye={class:"value"},Me={class:"pagination-container"},ze={class:"sidebar-actions"},Ie={class:"bar-chart-placeholder"},Pe={class:"bar-label"},Be={class:"bar-container"},Fe={class:"bar-group"},Le={class:"bar-value pink-text"},Te={class:"bar-group"},je={class:"bar-value cyan-text"},Oe=H({__name:"index",setup(Ke){const{proxy:y}=J(),U=y.publicStore(),s=X({period:"",city:"",district:"",stage:"",investment:"",type:"",keyword:""}),f=p([]),h=p([]),C=p(0),D=p(9),k=p(1),S=p([{name:"太原六城区",count:13,amount:203},{name:"古交市",count:10,amount:219},{name:"娄烦县",count:23,amount:225},{name:"阳曲县",count:14,amount:167},{name:"清徐县",count:15,amount:143}]),Y=n=>{n==="太原市"?f.value=["小店区","迎泽区","杏花岭区","尖草坪区","万柏林区","晋源区","古交市","清徐县","阳曲县","娄烦县"]:n==="大同市"?f.value=["平城区","云冈区","新荣区","云州区","阳高县","天镇县"]:f.value=[],s.district=""},M=n=>({passed:"success",special_audit:"warning",failed:"danger",wait_report:"info",in_progress:""})[n]||"",z=n=>({passed:"已通过",special_audit:"特审候",failed:"不通过",wait_report:"待上报",in_progress:"进行中"})[n]||n,w=async()=>{let n="1=1";s.period&&(n+=` AND report_time = '${s.period}'`),s.city&&(n+=` AND city_name = '${s.city}'`),s.district&&(n+=` AND district_name = '${s.district}'`),s.stage&&(n+=` AND project_stage = '${s.stage}'`),s.type&&(n+=` AND project_type = '${s.type}'`),s.keyword&&(n+=` AND (city_name LIKE '%${s.keyword}%' OR report_unit LIKE '%${s.keyword}%')`),s.investment==="gt5000"&&(n+=" AND investment_amount >= 5000"),s.investment==="lt5000"&&(n+=" AND investment_amount < 5000");try{const e=await U.http({Api:{model:"t_annual_plan_report",args:n,order:"report_time desc",page:k.value,limit:D.value}});e&&e.list?(h.value=e.list.map(V=>({...V,checked:!1})),C.value=e.total||50):h.value=Array.isArray(e)?e:[]}catch(e){console.error("Failed to fetch data:",e)}},I=n=>{!n||!n.id||y.toPath(`/annual-plan/${n.id}`)},P=()=>{y.toPath("/annual-plan/track")},B=n=>{k.value=n,w()};return Q(()=>{w()}),(n,e)=>{const V=le,c=te,i=oe,_=se,F=ne,m=ie,L=ae,g=pe,T=de,j=ve,O=me,K=_e,R=ue,q=ee,Z=re,G=W;return u(),v("div",fe,[t(G,null,{default:o(()=>[t(q,{class:"main-content"},{default:o(()=>[e[16]||(e[16]=a("div",{class:"breadcrumb"},[a("span",{class:"home-icon"},[a("i",{class:"el-icon-s-home"}),d(" 城市更新")]),a("span",{class:"separator"},"/"),a("span",{class:"current"},"实施与调度管理")],-1)),t(g,{class:"filter-card"},{default:o(()=>[t(L,{inline:!0,model:s,class:"filter-form"},{default:o(()=>[t(c,{label:"项目周期"},{default:o(()=>[t(V,{modelValue:s.period,"onUpdate:modelValue":e[0]||(e[0]=l=>s.period=l),type:"date",placeholder:"请选择日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),t(c,{label:"所属地区"},{default:o(()=>[t(_,{modelValue:s.city,"onUpdate:modelValue":e[1]||(e[1]=l=>s.city=l),placeholder:"请选择市",style:{width:"120px","margin-right":"10px"},onChange:Y},{default:o(()=>[t(i,{label:"太原市",value:"太原市"}),t(i,{label:"大同市",value:"大同市"}),t(i,{label:"阳泉市",value:"阳泉市"}),t(i,{label:"长治市",value:"长治市"}),t(i,{label:"晋城市",value:"晋城市"}),t(i,{label:"朔州市",value:"朔州市"}),t(i,{label:"晋中市",value:"晋中市"}),t(i,{label:"运城市",value:"运城市"}),t(i,{label:"忻州市",value:"忻州市"}),t(i,{label:"临汾市",value:"临汾市"}),t(i,{label:"吕梁市",value:"吕梁市"})]),_:1},8,["modelValue"]),t(_,{modelValue:s.district,"onUpdate:modelValue":e[2]||(e[2]=l=>s.district=l),placeholder:"请选择区/县",style:{width:"120px"}},{default:o(()=>[(u(!0),v(x,null,E(f.value,l=>(u(),A(i,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"项目阶段"},{default:o(()=>[t(_,{modelValue:s.stage,"onUpdate:modelValue":e[3]||(e[3]=l=>s.stage=l),placeholder:"请选择"},{default:o(()=>[t(i,{label:"储备阶段",value:"储备阶段"}),t(i,{label:"实施阶段",value:"实施阶段"})]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"总投资金额"},{default:o(()=>[t(_,{modelValue:s.investment,"onUpdate:modelValue":e[4]||(e[4]=l=>s.investment=l),placeholder:"请选择"},{default:o(()=>[t(i,{label:"5千万以上",value:"gt5000"}),t(i,{label:"5千万以下",value:"lt5000"})]),_:1},8,["modelValue"])]),_:1}),t(c,{label:"项目类型"},{default:o(()=>[t(_,{modelValue:s.type,"onUpdate:modelValue":e[5]||(e[5]=l=>s.type=l),placeholder:"请选择",style:{width:"180px"}},{default:o(()=>[t(i,{label:"加强既有建筑改造利用",value:"加强既有建筑改造利用"}),t(i,{label:"完善社区服务设施",value:"完善社区服务设施"})]),_:1},8,["modelValue"])]),_:1}),t(c,null,{default:o(()=>[t(F,{modelValue:s.keyword,"onUpdate:modelValue":e[6]||(e[6]=l=>s.keyword=l),placeholder:"请输入",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),t(c,null,{default:o(()=>[t(m,{type:"primary",onClick:w},{default:o(()=>[...e[7]||(e[7]=[d("搜索",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),a("div",ge,[a("div",be,[e[10]||(e[10]=a("h3",{class:"section-title"},"年度计划",-1)),a("div",ye,[t(m,null,{default:o(()=>[...e[8]||(e[8]=[d("全选",-1)])]),_:1}),t(m,{type:"primary"},{default:o(()=>[...e[9]||(e[9]=[d("提醒",-1)])]),_:1})])]),t(K,{gutter:20},{default:o(()=>[(u(!0),v(x,null,E(h.value,l=>(u(),A(O,{span:8,key:l.id,style:{"margin-bottom":"20px"}},{default:o(()=>[t(g,{class:"data-card",onClick:N(b=>I(l),["stop"])},{header:o(()=>[a("div",he,[a("span",ke,r(l.city_name),1),a("div",we,[t(T,{type:M(l.status),effect:"dark",size:"small",class:"status-tag"},{default:o(()=>[d(r(z(l.status)),1)]),_:2},1032,["type"]),t(j,{modelValue:l.checked,"onUpdate:modelValue":b=>l.checked=b},null,8,["modelValue","onUpdate:modelValue"])])])]),default:o(()=>[a("div",Ve,[a("div",xe,[e[11]||(e[11]=a("span",{class:"label"},"上报时间：",-1)),a("span",Ee,r(l.report_time||"-"),1)]),a("div",Ce,[e[12]||(e[12]=a("span",{class:"label"},"计划年度：",-1)),a("span",De,r(l.plan_year),1)]),a("div",Ae,[e[13]||(e[13]=a("span",{class:"label"},"年度投资估算：",-1)),a("span",Ne,r(l.investment_amount)+"万元",1)]),a("div",$e,[e[14]||(e[14]=a("span",{class:"label"},"包含项目数：",-1)),a("span",Ue,r(l.project_count)+"个",1)]),a("div",Se,[e[15]||(e[15]=a("span",{class:"label"},"上报单位：",-1)),a("span",Ye,r(l.report_unit||"-"),1)])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),a("div",Me,[t(R,{background:"",layout:"prev, pager, next",total:C.value,"page-size":D.value,"current-page":k.value,onCurrentChange:B},null,8,["total","page-size","current-page"])])])]),_:1}),t(Z,{width:"320px",class:"right-sidebar"},{default:o(()=>[a("div",ze,[t(m,{type:"primary",class:"action-btn"},{default:o(()=>[...e[17]||(e[17]=[d("年度计划上报",-1)])]),_:1}),t(m,{class:"action-btn",onClick:N(P,["stop"])},{default:o(()=>[...e[18]||(e[18]=[d("年度计划跟踪",-1)])]),_:1})]),t(g,{class:"chart-card"},{header:o(()=>[...e[19]||(e[19]=[a("div",{class:"chart-header"},"年度计划上报情况",-1)])]),default:o(()=>[e[20]||(e[20]=a("div",{class:"stats-summary"},[a("div",null,[d("共"),a("span",{class:"highlight"},"11"),d("个地市")]),a("div",{class:"pie-chart-placeholder"},[a("div",{class:"pie-circle"},[a("span",{class:"percentage"},"60%")])]),a("div",null,[a("div",null,[d("共"),a("span",{class:"highlight blue"},"160"),d("个县")]),a("div",null,[a("span",{class:"highlight blue"},"55"),d("个县完成上报")])])],-1))]),_:1}),t(g,{class:"chart-card chart-card-tall"},{header:o(()=>[...e[21]||(e[21]=[a("div",{class:"chart-header"},"片区策划内容",-1)])]),default:o(()=>[e[22]||(e[22]=a("div",{class:"chart-legend"},[a("span",{class:"legend-item"},[a("span",{class:"dot pink"}),d("项目数量")]),a("span",{class:"legend-item"},[a("span",{class:"dot cyan"}),d("年度投资金额(万元)")])],-1)),a("div",Ie,[(u(!0),v(x,null,E(S.value,(l,b)=>(u(),v("div",{class:"bar-row",key:b},[a("span",Pe,r(l.name),1),a("div",Be,[a("div",Fe,[a("div",{class:"bar pink",style:$({width:l.count*2+"px"})},null,4),a("span",Le,r(l.count),1)]),a("div",Te,[a("div",{class:"bar cyan",style:$({width:l.amount/2+"px"})},null,4),a("span",je,r(l.amount),1)])])]))),128))])]),_:1})]),_:1})]),_:1})])}}}),We=ce(Oe,[["__scopeId","data-v-6874da4a"]]);export{We as default};
