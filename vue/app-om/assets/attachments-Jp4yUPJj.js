import{d as Z,g as G,b as H,o as J,c as Q,a as t,w as s,a6 as W,r as $,i as b,f as a,t as c,e as X,cx as Y,a1 as r,Z as ee,$ as te,m as ae,q as le,E as se,a0 as ne,K as u,l as oe}from"./index-ClTGGYJq.js";import{E as ie}from"./el-pagination-B7EgBbn6.js";/* empty css                        *//* empty css                    */import{E as ce}from"./el-link-C9SuCks6.js";import{E as pe}from"./el-card-C35fswv6.js";import{_ as _e}from"./close-Bbr50a7Z.js";import{a as de,E as re}from"./index-G0MRvna3.js";import"./index-CcHJUmzw.js";const ue={class:"annual-plan-attachments-container"},me={class:"detail-header"},fe={class:"detail-title"},ye={class:"detail-summary"},ve={class:"summary-item"},be={class:"value"},ge={class:"summary-item"},he={class:"value"},we={class:"summary-item"},xe={class:"value"},Ee={class:"summary-item"},Te={class:"value"},Ce={class:"summary-item"},ke={class:"value"},$e={class:"summary-item"},Ne={class:"value"},je={class:"filter-bar"},Ve={class:"pagination"},Pe=Z({__name:"attachments",setup(Se){const{proxy:x}=G(),N=x.publicStore(),E=W(),l=$({id:"",city_name:"",district_name:"",status:"",report_time:"",plan_year:"",investment_amount:"",project_count:"",report_unit:""}),j=u(()=>l.plan_year&&l.city_name?`${l.plan_year}年${l.city_name}年度计划`:l.city_name?`${l.city_name}年度计划`:"年度计划详情"),V=u(()=>l.city_name&&l.district_name?`${l.city_name}${l.district_name}`:l.city_name||"-"),P=u(()=>l.investment_amount?`${l.investment_amount}万`:"-"),S=u(()=>l.project_count?`${l.project_count}个`:"-"),D=u(()=>l.project_count?`${Number(l.project_count)*120}亩`:"-"),F=n=>({passed:"success",special_audit:"warning",failed:"danger",wait_report:"info",in_progress:""})[n]||"",A=n=>({passed:"已通过",special_audit:"特审候",failed:"不通过",wait_report:"待上报",in_progress:"进行中"})[n]||"未知",o=$({fileType:"",fileName:""}),T=b([]),C=b(0),g=b(10),m=b(1),z=async()=>{const n=E.params.id;if(!n)return;const e={model:"t_annual_plan_report",args:`id='${n}'`},i=await N.http({Api:e});Array.isArray(i)&&i.length>0&&Object.assign(l,i[0])},f=async()=>{const e=[{file_name:"年度计划汇总说明.pdf",file_type:"PDF文件",upload_time:"2026-01-18 09:20",file_url:"/static/uploads/33fa95f0152e4543912b88c636b26f9f.pdf"},{file_name:"实施图纸.docx",file_type:"文本文档",upload_time:"2026-01-19 14:10",file_url:"/static/uploads/3fe8234a9a194f0c9da7f477accfe2ec.docx"},{file_name:"规划批复.docx",file_type:"文本文档",upload_time:"2026-01-20 10:05",file_url:"/static/uploads/4f2d187ff80441d991ae60570d19cabb.docx"},{file_name:"现场照片.jpg",file_type:"图片文件",upload_time:"2026-01-21 16:30",file_url:"/static/uploads/124c8032a0c947acac3565414d59e3da.jpg"},{file_name:"节点成效.png",file_type:"图片文件",upload_time:"2026-01-22 11:45",file_url:"/static/uploads/53fc120ecca44c12bce7ee9dc45ce35f.png"},{file_name:"资金测算.pdf",file_type:"PDF文件",upload_time:"2026-01-23 08:50",file_url:"/static/uploads/4eaa30b8a7ab40a798cf5b98924fde30.pdf"}].filter(y=>{const v=o.fileType?y.file_type===o.fileType:!0,p=o.fileName?y.file_name.includes(o.fileName):!0;return v&&p});C.value=e.length;const i=(m.value-1)*g.value;T.value=e.slice(i,i+g.value)},B=()=>{o.fileType="",o.fileName="",m.value=1,f()},I=n=>{m.value=n,f()},k=()=>{x.toPath(`/annual-plan/${E.params.id}`)},L=n=>{n.file_url&&window.open(n.file_url,"_blank")};return H(async()=>{await z(),await f()}),(n,e)=>{const i=_e,y=Y,v=pe,p=le,q=ae,h=te,M=se,w=ne,O=ee,_=re,U=ce,K=de,R=ie;return J(),Q("div",ue,[t(v,{class:"detail-header-card"},{default:s(()=>[a("div",me,[a("div",fe,c(j.value),1),a("div",{class:"detail-close",onClick:X(k,["stop"])},[t(i)])]),a("div",ye,[a("div",ve,[e[2]||(e[2]=a("span",{class:"label"},"所属地区",-1)),a("span",be,c(V.value),1)]),a("div",ge,[e[3]||(e[3]=a("span",{class:"label"},"计划总预算",-1)),a("span",he,c(P.value),1)]),a("div",we,[e[4]||(e[4]=a("span",{class:"label"},"计划状态",-1)),a("span",xe,[t(y,{type:F(l.status),effect:"dark",size:"small"},{default:s(()=>[r(c(A(l.status)),1)]),_:1},8,["type"])])]),a("div",Ee,[e[5]||(e[5]=a("span",{class:"label"},"包含项目",-1)),a("span",Te,c(S.value),1)]),a("div",Ce,[e[6]||(e[6]=a("span",{class:"label"},"建设规模",-1)),a("span",ke,c(D.value),1)]),a("div",$e,[e[7]||(e[7]=a("span",{class:"label"},"上报单位",-1)),a("span",Ne,c(l.report_unit||"-"),1)])])]),_:1}),t(v,{class:"detail-info-card"},{default:s(()=>[e[12]||(e[12]=a("div",{class:"info-title"},"详细信息",-1)),a("div",je,[t(O,{inline:!0,model:o},{default:s(()=>[t(h,{label:"文件类型"},{default:s(()=>[t(q,{modelValue:o.fileType,"onUpdate:modelValue":e[0]||(e[0]=d=>o.fileType=d),placeholder:"请选择",style:{width:"180px"}},{default:s(()=>[t(p,{label:"文本文档",value:"文本文档"}),t(p,{label:"图片文件",value:"图片文件"}),t(p,{label:"PDF文件",value:"PDF文件"}),t(p,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1}),t(h,{label:"成果文件名称"},{default:s(()=>[t(M,{modelValue:o.fileName,"onUpdate:modelValue":e[1]||(e[1]=d=>o.fileName=d),placeholder:"请输入",style:{width:"220px"}},null,8,["modelValue"])]),_:1}),t(h,null,{default:s(()=>[t(w,{type:"primary",onClick:f},{default:s(()=>[...e[8]||(e[8]=[r("搜索",-1)])]),_:1}),t(w,{onClick:B},{default:s(()=>[...e[9]||(e[9]=[r("重置",-1)])]),_:1}),t(w,{onClick:k},{default:s(()=>[...e[10]||(e[10]=[r("返回",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),t(K,{data:T.value,border:"",class:"attachments-table",style:{width:"100%"}},{default:s(()=>[t(_,{type:"index",label:"序号",width:"60"}),t(_,{prop:"file_name",label:"成果文件名称","min-width":"220"}),t(_,{prop:"file_type",label:"文件类型",width:"140"}),t(_,{prop:"upload_time",label:"上报时间",width:"160"}),t(_,{label:"操作",width:"120"},{default:s(d=>[t(U,{type:"primary",onClick:De=>L(d.row)},{default:s(()=>[...e[11]||(e[11]=[r("查看",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),a("div",Ve,[t(R,{background:"",layout:"prev, pager, next",total:C.value,"page-size":g.value,"current-page":m.value,onCurrentChange:I},null,8,["total","page-size","current-page"])])]),_:1})])}}}),Ue=oe(Pe,[["__scopeId","data-v-b92e9f06"]]);export{Ue as default};
