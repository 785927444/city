import{_ as A}from"./Add-C2Yn49FZ.js";import{_ as b}from"./List.vue_vue_type_script_setup_true_lang-But96V8i.js";import{_ as S}from"./AaTitle.vue_vue_type_script_setup_true_lang-Dok3GIN-.js";import{d as C,g as q,r as x,b as N,o as _,c as f,a as p,w as y,u as s,e as v,_ as I,f as h,t as V,h as $,i as D}from"./index-BWjCSAnw.js";import"./el-progress-DQWPeYlj.js";import"./Upload-D7KlxVMi.js";import"./el-message-CJx4xv24.js";import"./el-text-Ck7yMuci.js";import"./el-checkbox-DlSjzc6V.js";import"./el-image-viewer-HQ-b3oKZ.js";import"./el-switch-i6AGQHxo.js";import"./select-quGGAc_E.js";const j={class:"layout-col"},B={class:"f14 ml2"},E={class:"layout-col white-rgba50 rad8 p15"},U=C({__name:"index",setup(L){const{proxy:a}=q(),n=a.publicStore(),w=a.configStore();let l=D();const t=x({...n.$state,content:[{width:"w70",show:!0,align:"center",key:"*",name:"序号"},{width:"w50x5",show:!0,align:"left",key:"name",name:"名称"},{width:"w50x5",show:!0,align:"left",key:"description",name:"描述"},{width:"flex1",show:!0,align:"right",key:n.auth,name:"操作"}],editFrom:[{required:!0,editshow:"none",key:"id",name:"ID",type:"input",class:"update_key"},{required:!0,editshow:!0,key:"name",name:"名称",type:"input"},{required:!1,editshow:!0,key:"description",name:"描述",type:"input"}]});N(async()=>{d()});const k=i=>{t.list.find(e=>e[t.key]==i)},d=async i=>{let c={Api1:{model:t.model,args:`CAST(id AS SIGNED)>${w.user.role_id}`,order:"CAST(id AS SIGNED) ASC"},Api2:{model:"t_route"},Api3:{model:"t_auth"}},o=await n.http(c);t.empty=!!a.isNull(o.Api1),t.list=a.isNull(o.Api1)?[]:o.Api1,n._public.list=t.list,n._public.routeList=a.isNull(o.Api2)?[]:o.Api2,n._public.authList=a.isNull(o.Api3)?[]:o.Api3,k(i)},g=(i,e)=>{(i=="add"||i=="upd")&&l.value.onVisable(e),i=="del"&&l.value.del(e),i=="active"&&(n.active=e)};return(i,e)=>{const u=I,m=S,c=b,o=A;return _(),f("div",j,[p(m,{title:"角色列表"},{"left-content":y(()=>[...e[1]||(e[1]=[])]),"right-content":y(()=>[s(t).content.find(r=>typeof r.key=="object")&&s(t).content.find(r=>typeof r.key=="object").key.hasOwnProperty("add")?(_(),f("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:e[0]||(e[0]=v(r=>s(l).onVisable(s(t).addItem),["stop"]))},[p(u,{class:"f12 fw"}),h("span",B,V(s(t).content.find(r=>typeof r.key=="object").key.add),1)])):$("",!0)]),_:1}),h("div",E,[p(c,{onHandleClick:g,state:s(t)},null,8,["state"])]),p(o,{onInit:d,state:s(t),ref_key:"addRef",ref:l},null,8,["state"])])}}});export{U as default};
