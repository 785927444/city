import{_ as C,a as R}from"./Area.vue_vue_type_script_setup_true_lang-8lhzdzLl.js";import{_ as V}from"./Add-CEL0KAmB.js";import{_ as $}from"./AaFoot-DEQbEpoG.js";import{_ as S}from"./List.vue_vue_type_script_setup_true_lang-DXXgUW06.js";import{_ as q}from"./AbTitle.vue_vue_type_script_setup_true_lang-Dk_I9lvQ.js";import{d as N,g as j,r as A,b as B,o as y,c as b,a as i,w as M,u as o,e as D,_ as E,f as h,t as F,h as H,i as p}from"./index-Bd85TTIS.js";const L={class:"layout-col"},O={class:"f14 ml2"},P={class:"layout-col bg-white"},W=N({__name:"m1",setup(z){const{proxy:c}=j(),s=c.publicStore(),d=c.configStore();c.dictStore();let _=p(),f=p(),m=p();const t=A({...s.$state,listRow:!0,content:[{width:"w50x3",show:!0,align:"left",key:"station_name",name:"名称",type:"icon1"},{width:"flex1",show:!0,align:"right",key:{},name:"操作"}],editFrom:[{required:!0,editshow:"none",name:"上级",key:"parent_id",type:"input"},{required:!0,editshow:!0,name:"名称",key:"station_name",type:"input"},{required:!1,editshow:!0,name:"排序",key:"order",type:"input"}],addItem:{parent_id:"0"}});B(async()=>{s.init({path:"/station"},t),d.distributId||(d.distributId="0"),u()});const u=async n=>{t.query=!d.distributId||d.distributId=="0"?{model:t.model,args:"parent_id='0'"}:{model:t.model,args:`id='${d.distributId}'`},t.params={Api:t.query};let e=await s.http(t.params);if(t.empty=!!c.isNull(e),t.list=c.isNull(e)?[]:e.sort((a,l)=>a.order-l.order),s._public.list=t.list,s._public.stations=t.list,!n&&!t.empty)s.active=t.list[0];else{let a=t.list.find(l=>l.id==n);a&&(s.active={...a})}},w=async(n,e)=>{(n=="add"||n=="upd")&&_.value.onVisable(e),n=="del"&&_.value.del(e),n=="area"&&f.value.onVisable(e),n=="industry"&&m.value.onVisable(e),n=="active"&&(s.active=e)};return(n,e)=>{const a=E,l=q,g=S,k=$,I=V,v=C,x=R;return y(),b("div",L,[i(l,{title:"组织"},{"right-content":M(()=>[o(t).content.find(r=>typeof r.key=="object")&&o(t).content.find(r=>typeof r.key=="object").key.hasOwnProperty("add")?(y(),b("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:e[0]||(e[0]=D(r=>o(_).onVisable(o(t).addItem),["stop"]))},[i(a,{class:"f12 fw"}),h("span",O,F(o(t).content.find(r=>typeof r.key=="object").key.add),1)])):H("",!0)]),_:1}),h("div",P,[i(g,{onHandleClick:w,state:o(t)},null,8,["state"])]),i(k),i(I,{onInit:u,state:o(t),ref_key:"addRef",ref:_},null,8,["state"]),i(v,{onInit:u,state:o(t),ref_key:"areaRef",ref:f},null,8,["state"]),i(x,{onInit:u,state:o(t),ref_key:"industryRef",ref:m},null,8,["state"])])}}});export{W as _};
