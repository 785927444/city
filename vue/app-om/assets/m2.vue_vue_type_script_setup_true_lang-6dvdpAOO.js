import{_ as g}from"./Add-Dm5MhgCZ.js";import{_ as v}from"./AaFoot-s__9O66w.js";import{_ as x}from"./List.vue_vue_type_script_setup_true_lang-Bt0SXkb0.js";import{_ as b}from"./AaTitle.vue_vue_type_script_setup_true_lang-BnIAtUUF.js";import{d as C,g as N,r as q,j as $,o as m,c as _,a as r,w as f,f as c,u as o,e as I,_ as S,t as j,h as V,i as B,n as A}from"./index-C0LFq0t5.js";const R={class:"layout-col flex3 ml16"},D={class:"flex-ec flex1"},E={class:"f14 ml4"},F={class:"layout-col white-rgba50 rad8 p15"},z=C({__name:"m2",setup(H){const{proxy:s}=N(),a=s.publicStore();s.configStore(),s.dictStore();let d=B();const e=q({...a.$state,content:[{width:"w70",show:!0,align:"center",key:"*",name:"序号"},{width:"w50x4",show:!0,align:"left",key:"name",name:"名称"},{width:"w50x4",show:!0,align:"left",key:"value",name:"数值"},{width:"w50x8",show:!0,align:"left",key:"attr",name:"扩展"},{width:"w50x2",show:!0,align:"left",key:"order",name:"排序"},{width:"flex1",show:!0,align:"right",key:{add:"添加",upd:"编辑",del:"删除"},name:"操作"}],editFrom:[{required:!0,editshow:!0,name:"名称",key:"name",type:"input"},{required:!0,editshow:!0,name:"数值",key:"value",type:"input"},{required:!1,editshow:!0,name:"扩展",key:"attr",type:"input"},{required:!1,editshow:!0,name:"排序",key:"order",type:"input"}],addItem:{parent_id:"0"}});$(()=>a.active,async t=>{s.isNull(t)||(await A(),e.addItem={type:a.active.type,parent_id:a.active.id},u())},{immediate:!1,deep:!0});const u=async()=>{e.query={model:e.model,args:`parent_id='${a.active.id}'`},e.params={Api:e.query};let t=await a.http(e.params);e.empty=!!s.isNull(t),e.list=s.isNull(t)?[]:t.sort((n,l)=>n.order-l.order)},p=async(t,n)=>{(t=="add"||t=="upd")&&d.value.onVisable(n),t=="del"&&d.value.del(n)};return(t,n)=>{const l=S,y=b,w=x,h=v,k=g;return m(),_("div",R,[r(y,{title:`${t.isNull(o(a).active)?"":o(a).active.name}`},{"left-content":f(()=>[...n[1]||(n[1]=[])]),"right-content":f(()=>[c("div",D,[o(e).content.find(i=>typeof i.key=="object")&&o(e).content.find(i=>typeof i.key=="object").key.hasOwnProperty("add")?(m(),_("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:n[0]||(n[0]=I(i=>p("add",o(e).addItem),["stop"]))},[r(l,{class:"f12 fw"}),c("span",E,j(o(e).content.find(i=>typeof i.key=="object").key.add),1)])):V("",!0)])]),_:1},8,["title"]),c("div",F,[r(w,{onHandleClick:p,state:o(e)},null,8,["state"])]),r(h),r(k,{onInit:u,state:o(e),ref_key:"addRef",ref:d},null,8,["state"])])}}});export{z as _};
