import{d as A,g as $,r as E,b as N,o as w,c as V,f as s,e as k,u as t,a as p,E as z,w as S,F as U,p as q,z as B,q as C,m as I,i as P,l as j}from"./index-CymMRwSV.js";import{_ as F}from"./projects.vue_vue_type_script_setup_true_lang-8bl_wfW7.js";import"./el-loading-Bz52rtYK.js";import"./ViewFiles-D4O9SnS7.js";import"./el-table-column-D8RLsYXD.js";import"./el-checkbox-DcAGyG1S.js";import"./AaTitle.vue_vue_type_script_setup_true_lang-BA3Fb0N5.js";const M={class:"layout-col pplr15"},O={class:"hh100 ww100 flex-sc warp hidden"},R={class:"ww100 flex-sc ptb10 ppr5"},L={class:"flex1"},D={class:"ww50 flex-sc ptb10 ppr5"},G={class:"flex1 flex-sc"},H={class:"ww50 flex-sc ptb10 ppr5"},J={class:"flex1 flex-sc"},K={class:"ww50 flex-sc ptb10 ppr5"},Q={class:"flex1 flex-sc"},T={class:"ww50 flex-sc ptb10 ppr5"},W={class:"flex1 flex-sc"},X={class:"ww50 flex-sc ptb10 ppr5"},Y={class:"flex1 flex-sc"},Z=A({__name:"step1",props:{state:{type:[Object,Array],default:()=>({})}},setup(h){const{proxy:d}=$(),a=d.publicStore();d.configStore();let x=P();const o=E({...a.$state,schemeAreas:[{value:"1",name:"龙城片区"}]}),b=h;N(async()=>{g(),y()});const g=async()=>{if(b.state.type!="design")return;let f={model:"t_scheme_plan",args:`scheme_id='${o.active.scheme_id}'`,field:"id, name"};a.http({Api:f}).then(e=>{o.schemePlans=d.isNull(e)?[]:e})},y=async()=>{let f={model:"t_file_type"},e={model:"t_file_content"},r=await a.http({Api1:f,Api2:e}),m=d.isNull(r.Api1)?[]:r.Api1.sort((i,n)=>i.orderd-n.orderd),u=d.isNull(r.Api2)?[]:r.Api2.sort((i,n)=>i.orderd-n.orderd),l=b.state.type=="plan"?"019be0b6-a467-7a5e-8ad9-6ba600813fa5":"019be0b6-e9f9-7081-b4a3-d808e0bc96ca",_=m.find(i=>i.id==l);if(_){let i=[];o.plans=m.filter(n=>n.parent_id==l),o.plans.forEach(n=>{n.parent_type=`${_.type}/${n.type}`;let v=u.filter(c=>c.parent_id==n.id);d.isNull(v)||v.forEach(c=>{c.parent_type=`${n.parent_type}/${c.type}`,i.push(c)})}),o.contents=i,a._public.contents=i,o.active=d.isNull(o.plans)?{}:{...o.plans[0]}}};return(f,e)=>{const r=z,m=C,u=I;return w(),V("div",M,[s("div",O,[s("div",R,[e[6]||(e[6]=s("div",{class:"flex-sc w50x2 mr20"},[s("span",{class:"w50x2"},"项目信息")],-1)),s("div",L,[s("div",{class:"w50x3 tc rad3 ptb6 bgi1 white cursor",onClick:e[0]||(e[0]=k(l=>t(x).onVisable(t(a).form),["stop"]))},"专项与片区项目库")])]),s("div",D,[e[7]||(e[7]=s("div",{class:"flex-sc w50x2 mr20"},[s("span",{class:"w50x2"},"项目编号")],-1)),s("div",G,[p(r,{class:"ww100",modelValue:t(a).form.num,"onUpdate:modelValue":e[1]||(e[1]=l=>t(a).form.num=l),placeholder:"请输入",size:"large"},null,8,["modelValue"])])]),s("div",H,[e[8]||(e[8]=s("div",{class:"flex-sc w50x2 mr20"},[s("span",{class:"w50x2"},"统一项目代码")],-1)),s("div",J,[p(r,{disabled:"",class:"ww100",modelValue:t(a).form.code,"onUpdate:modelValue":e[2]||(e[2]=l=>t(a).form.code=l),placeholder:"请输入",size:"large"},null,8,["modelValue"])])]),s("div",K,[e[9]||(e[9]=s("div",{class:"flex-sc w50x2 mr20"},[s("span",{class:"mr3 i8 f20"},"*"),s("span",{class:"w50x2"},"项目名称")],-1)),s("div",Q,[p(r,{class:"ww100",modelValue:t(a).form.name,"onUpdate:modelValue":e[3]||(e[3]=l=>t(a).form.name=l),placeholder:"请输入",size:"large"},null,8,["modelValue"])])]),s("div",T,[e[10]||(e[10]=s("div",{class:"flex-sc w50x2 mr20"},[s("span",{class:"mr3 i8 f20"},"*"),s("span",{class:"w50x2"},"所属区域")],-1)),s("div",W,[p(r,{class:"ww100",modelValue:t(a).form.area,"onUpdate:modelValue":e[4]||(e[4]=l=>t(a).form.area=l),placeholder:"请输入",size:"large"},null,8,["modelValue"])])]),s("div",X,[e[11]||(e[11]=s("div",{class:"flex-sc w50x2 mr20"},[s("span",{class:"mr3 i8 f20"},"*"),s("span",{class:"w50x2"},"所属专项规划")],-1)),s("div",Y,[p(u,{modelValue:t(a).form.parent_id,"onUpdate:modelValue":e[5]||(e[5]=l=>t(a).form.parent_id=l),placeholder:"请选择",size:"large",style:{width:"100%"},filterable:"",clearable:""},{default:S(()=>[(w(!0),V(U,null,q(t(o).schemePlans?t(o).schemePlans:[],(l,_)=>(w(),B(m,{key:l.id,value:String(l.id),label:l.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])])]),p(t(F),{state:t(o),onInit:y,ref_key:"projectRef",ref:x},null,8,["state"])])}}}),re=j(Z,[["__scopeId","data-v-c680fde1"]]);export{re as default};
