import{_ as v}from"./Add-C2Yn49FZ.js";import{_ as x}from"./ListTree.vue_vue_type_script_setup_true_lang-dvfcDO21.js";import{_ as A}from"./AbTitle.vue_vue_type_script_setup_true_lang-DiozM-Sy.js";import{d as q,g as S,r as V,b as I,n as R,o as m,c as h,a as p,w as T,u as d,e as j,_ as $,f as k,t as B,h as D,i as w}from"./index-BWjCSAnw.js";const E={class:"layout-col"},F={class:"f14 ml2"},H={class:"layout-col bg-white"},G=q({__name:"m1",setup(M){const{proxy:n}=S(),c=n.publicStore();n.configStore(),n.dictStore();let l=w(),f=w();const e=V({...c.$state,listRow:!0,listExpand:!0,content:[{width:"flex1",show:!0,align:"left",key:"name",name:"名称",type:"icon"},{width:"w50x2",show:!0,align:"right",key:{add:"新增",upd:"编辑",del:"删除"},name:"操作"}],editFrom:[{required:!0,editshow:!0,key:"parent_id",name:"上级",type:"tree",list:[],node_key:"id",parent_key:"parent_id",top_name:"顶级"},{required:!0,editshow:!0,name:"名称",key:"name",type:"input"},{required:!1,editshow:!0,name:"类型",key:"type",type:"input"},{required:!1,editshow:!0,name:"描述",key:"describe",type:"input"},{required:!1,editshow:!0,name:"排序",key:"orderd",type:"input"}],addItem:{},model:"t_problem_type"});I(async()=>{await b(),y()});const b=async()=>{},y=async t=>{let o={model:"t_problem_type",order:"orderd ASC"},s={model:"t_task_problem",order:"orderd ASC"},i=await c.http({Api1:o,Api2:s}),a=n.isNull(i.Api1)?[]:i.Api1.sort((r,_)=>r.orderd-_.orderd),u=n.isNull(i.Api2)?[]:i.Api2.sort((r,_)=>r.orderd-_.orderd);e.list=[...a,...u],c._public.list=e.list,e.editFrom[0].list=e.list,g(t)},g=async t=>{e.tree=n.treeData(e.list,e.key,e.parent,"children");let o=n.findNode(e.tree,a=>!a.children),s=n.findNode(e.tree,a=>a[e.key]==t),i=n.isNull(s)?o:s;i&&(await R(),f.value.handleNodeClick(i))},C=t=>{t.children||(c.active={...t})},N=(t,o)=>{if((t=="add"||t=="upd")&&l.value.onVisable(o),t=="child"){let s=n.varObj(e.parent,o[e.key]);l.value.onVisable(s)}t=="del"&&l.value.del(o)};return(t,o)=>{const s=$,i=A,a=x,u=v;return m(),h("div",E,[p(i,{title:"问题分类导航"},{"right-content":T(()=>[d(e).content.find(r=>typeof r.key=="object")&&d(e).content.find(r=>typeof r.key=="object").key.hasOwnProperty("add")?(m(),h("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:o[0]||(o[0]=j(r=>d(l).onVisable(d(e).addItem),["stop"]))},[p(s,{class:"f12 fw"}),k("span",F,B(d(e).content.find(r=>typeof r.key=="object").key.add),1)])):D("",!0)]),_:1}),k("div",H,[p(a,{onHandleNodeClick:C,onHandleClick:N,state:d(e),ref_key:"listTreeRef",ref:f},null,8,["state"])]),p(u,{onInit:y,state:d(e),ref_key:"addRef",ref:l},null,8,["state"])])}}});export{G as _};
