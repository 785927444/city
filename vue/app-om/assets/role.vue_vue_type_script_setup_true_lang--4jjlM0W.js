import{_ as b}from"./Add-BFaa3Kc7.js";import{_ as g}from"./List.vue_vue_type_script_setup_true_lang-Lnm6dwtK.js";import{_ as A}from"./AbTitle.vue_vue_type_script_setup_true_lang-BE9n7PCf.js";import{d as S,g as C,r as N,b as v,o as f,c as m,a as d,w as x,u as o,e as q,_ as I,f as y,t as V,h as $,i as j}from"./index-CymMRwSV.js";const B={class:"layout-col"},D={class:"f14 ml2"},E={class:"layout-col bg-white"},F=S({__name:"role",setup(G){const{proxy:i}=C(),l=i.publicStore(),h=i.configStore();let r=j();const e=N({...l.$state,content:[{width:"w70",show:!0,align:"center",key:"*",name:"序号"},{width:"w50x3",show:!0,align:"left",key:"name",name:"名称"},{width:"flex1",show:!0,align:"left",key:"description",name:"描述"}],editFrom:[{required:!0,editshow:!0,key:"name",name:"名称",type:"input"},{required:!1,editshow:!0,key:"description",name:"描述",type:"input"}]});v(async()=>{u()});const w=n=>{let t=e.list.find(c=>c[e.key]==n);_("active",i.isNull(t)?e.list[0]:t)},u=async n=>{let p={Api1:{model:"t_role",args:`CAST(id AS SIGNED)>${h.user.role_id}`,order:"CAST(id AS SIGNED) ASC"},Api2:{model:"t_auth"}},s=await l.http(p);e.empty=!!i.isNull(s.Api1),e.list=i.isNull(s.Api1)?[]:s.Api1,l._public.list=e.list,l._public.authList=i.isNull(s.Api2)?[]:s.Api2,w(n)},_=(n,t)=>{(n=="add"||n=="upd")&&r.value.onVisable(t),n=="del"&&r.value.del(t,e.key,e.url.del),n=="active"&&(l.active=t)};return(n,t)=>{const c=I,p=A,s=g,k=b;return f(),m("div",B,[d(p,{title:"角色列表"},{"right-content":x(()=>[o(e).content.find(a=>typeof a.key=="object")&&o(e).content.find(a=>typeof a.key=="object").key.hasOwnProperty("add")?(f(),m("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:t[0]||(t[0]=q(a=>o(r).onVisable(o(e).addItem),["stop"]))},[d(c,{class:"f12 fw"}),y("span",D,V(o(e).content.find(a=>typeof a.key=="object").key.add),1)])):$("",!0)]),_:1}),y("div",E,[d(s,{onHandleClick:_,state:o(e)},null,8,["state"])]),d(k,{onInit:u,state:o(e),ref_key:"addRef",ref:r},null,8,["state"])])}}});export{F as _};
