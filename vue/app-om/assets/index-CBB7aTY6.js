import{d as F,g as A,aa as N,r as D,b as S,o as m,c as w,a as n,w as p,f as a,e as y,u as l,ad as V,B as q,F as B,q as E,t as h,p as T,k as I,x as M,h as L}from"./index-BWjCSAnw.js";import{v as Y}from"./el-loading-CMa3kpEq.js";import{a as z,E as P}from"./el-table-column-Bxfuucky.js";import"./el-checkbox-DlSjzc6V.js";import{_ as R}from"./AaTitle.vue_vue_type_script_setup_true_lang-Dok3GIN-.js";import{_ as U}from"./filter-CFoa9Riw.js";const j={class:"layout-col"},G={class:"flex-sc mr15"},H={class:"w50x6 flex-sc"},J={class:"layout-col white-rgba50 rad8 p15"},K={class:"ww100 flex-sc p8 mb15"},O={class:"flex-sc fw f16 tc"},Q=["onClick"],W={class:"mb5"},X={class:"layout-col"},re=F({__name:"index",setup(Z){const{proxy:c}=A(),_=c.publicStore();c.configStore();const k=N(),x=[{value:"1",name:"不达标"},{value:"2",name:"不足"},{value:"3",name:"达标"},{value:"4",name:"一般"},{value:"5",name:"较好"},{value:"6",name:"很好"}],e=D({..._.$state}),$=o=>parseInt(e.page)+o;S(async()=>{e.active={...k.query},await C(),u()});const C=async()=>{let o={model:"t_task_type",args:`parent_id='${e.active.parent_id}'`,order:"orderd ASC"},t=await _.http({Api:o});e.actives=c.isNull(t)?[]:t.sort((d,r)=>d.orderd-r.orderd)},u=async o=>{console.log("state.active",e.active);let t={model:"t_task_problem",args:`parent_id='${e.active.id}'`,order:"orderd ASC"},d={model:"t_scheme_problem_result",args:`scheme_id='${e.active.scheme_id}' and parents_id='${e.active.id}'`};if(!c.isNull(e.datetime)){const[f,i]=e.datetime,g=new Date(f.getFullYear(),0,1).getTime()+"",v=new Date(i.getFullYear(),11,31,23,59,59,999).getTime()+"";d.args+=` and check_time>='${g}' and check_time<='${v}'`}let r=await _.http({Api1:t,Api2:d});e.task_problems=c.isNull(r.Api1)?[]:r.Api1,e.list=c.isNull(r.Api2)?[]:r.Api2};return(o,t)=>{const d=q,r=U,f=R,i=z,g=P,v=Y;return m(),w("div",j,[n(f,{title:""},{"left-content":p(()=>[a("div",G,[t[3]||(t[3]=a("span",{class:"mr10"},"体检年度",-1)),a("span",H,[n(d,{class:"",style:{width:"100%"},modelValue:l(e).datetime,"onUpdate:modelValue":t[0]||(t[0]=s=>l(e).datetime=s),type:"yearrange","range-separator":"-","start-placeholder":"请选择年度","end-placeholder":"请选择年度"},null,8,["modelValue"])])]),a("div",{class:"rad4 ptb6 plr12 flex-cc cursor bgi1 white",onClick:t[1]||(t[1]=y(s=>u(),["stop"]))},[n(r,{class:"f12 fw"}),t[4]||(t[4]=a("span",{class:"f14 ml5"},"搜索",-1))])]),"right-content":p(()=>[a("div",{class:"rad4 ptb6 plr12 flex-cc cursor bo-i1-1 i1 ml15",onClick:t[2]||(t[2]=y(s=>l(V).back(),["stop"]))},[...t[5]||(t[5]=[a("span",{class:"f14 ml5"},"返回",-1)])])]),_:1}),a("div",J,[a("div",K,[a("div",O,[(m(!0),w(B,null,E(l(e).actives?l(e).actives:[],(s,b)=>(m(),w("div",{class:"mr20 cursor flex-col-cc",key:b,onClick:y(ee=>{l(e).active.id=s.id,l(e).page=1,u()},["stop"])},[a("span",W,h(s.name),1),a("span",{class:T(["ww100 h3 rad10",s.id==l(e).active.id?"bgi2":"black-rgba0"])},null,2)],8,Q))),128))])]),a("div",X,[o.isNull(l(e).list)?L("",!0):I((m(),M(g,{key:0,"header-cell-class-name":"bgi16 c3","cell-style":{"background-color":"#FFFFFF",color:"#626366"},border:"","empty-text":"暂无数据",data:l(e).list,stripe:""},{default:p(()=>[n(i,{type:"index",index:$,label:"序号",align:"center",width:"50"}),n(i,{label:"指标名称",width:"250"},{default:p((s,b)=>[a("span",null,h(s.row.parent_id?o.find(l(e).task_problems,["id",s.row.parent_id],"name"):""),1)]),_:1}),n(i,{label:"评价结果",align:"center",width:"100"},{default:p((s,b)=>[a("span",null,h(s.row.res?o.find(x,["value",s.row.res],"name"):""),1)]),_:1}),n(i,{prop:"res_content",label:"标准依据",align:"center"}),n(i,{prop:"pre_year",label:"上年指标值",width:"100",align:"center"}),n(i,{prop:"nex_year",label:"本年指标值",width:"100",align:"center"})]),_:1},8,["data"])),[[v,l(e).loading,void 0,{fullscreen:!0,lock:!0}]])])])])}}});export{re as default};
