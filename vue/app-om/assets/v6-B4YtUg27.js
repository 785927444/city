const h=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function w(n){return typeof n=="string"&&h.test(n)}function I(n){if(!w(n))throw TypeError("Invalid UUID");let f;return Uint8Array.of((f=parseInt(n.slice(0,8),16))>>>24,f>>>16&255,f>>>8&255,f&255,(f=parseInt(n.slice(9,13),16))>>>8,f&255,(f=parseInt(n.slice(14,18),16))>>>8,f&255,(f=parseInt(n.slice(19,23),16))>>>8,f&255,(f=parseInt(n.slice(24,36),16))/1099511627776&255,f/4294967296&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255)}const x=[];for(let n=0;n<256;++n)x.push((n+256).toString(16).slice(1));function p(n,f=0){return(x[n[f+0]]+x[n[f+1]]+x[n[f+2]]+x[n[f+3]]+"-"+x[n[f+4]]+x[n[f+5]]+"-"+x[n[f+6]]+x[n[f+7]]+"-"+x[n[f+8]]+x[n[f+9]]+"-"+x[n[f+10]]+x[n[f+11]]+x[n[f+12]]+x[n[f+13]]+x[n[f+14]]+x[n[f+15]]).toLowerCase()}let m;const U=new Uint8Array(16);function u(){if(!m){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");m=crypto.getRandomValues.bind(crypto)}return m(U)}const d={};function V(n,f,i){let r;const l=n?._v6??!1;if(n){const e=Object.keys(n);e.length===1&&e[0]==="_v6"&&(n=void 0)}if(n)r=a(n.random??n.rng?.()??u(),n.msecs,n.nsecs,n.clockseq,n.node,f,i);else{const e=Date.now(),c=u();R(d,e,c),r=a(c,d.msecs,d.nsecs,l?void 0:d.clockseq,l?void 0:d.node,f,i)}return f??p(r)}function R(n,f,i){return n.msecs??=-1/0,n.nsecs??=0,f===n.msecs?(n.nsecs++,n.nsecs>=1e4&&(n.node=void 0,n.nsecs=0)):f>n.msecs?n.nsecs=0:f<n.msecs&&(n.node=void 0),n.node||(n.node=i.slice(10,16),n.node[0]|=1,n.clockseq=(i[8]<<8|i[9])&16383),n.msecs=f,n}function a(n,f,i,r,l,e,c=0){if(n.length<16)throw new Error("Random bytes length must be >= 16");if(!e)e=new Uint8Array(16),c=0;else if(c<0||c+16>e.length)throw new RangeError(`UUID byte range ${c}:${c+15} is out of buffer bounds`);f??=Date.now(),i??=0,r??=(n[8]<<8|n[9])&16383,l??=n.slice(10,16),f+=122192928e5;const o=((f&268435455)*1e4+i)%4294967296;e[c++]=o>>>24&255,e[c++]=o>>>16&255,e[c++]=o>>>8&255,e[c++]=o&255;const g=f/4294967296*1e4&268435455;e[c++]=g>>>8&255,e[c++]=g&255,e[c++]=g>>>24&15|16,e[c++]=g>>>16&255,e[c++]=r>>>8|128,e[c++]=r&255;for(let t=0;t<6;++t)e[c++]=l[t];return e}function y(n){const f=typeof n=="string"?I(n):n,i=E(f);return typeof n=="string"?p(i):i}function E(n){return Uint8Array.of((n[6]&15)<<4|n[7]>>4&15,(n[7]&15)<<4|(n[4]&240)>>4,(n[4]&15)<<4|(n[5]&240)>>4,(n[5]&15)<<4|(n[0]&240)>>4,(n[0]&15)<<4|(n[1]&240)>>4,(n[1]&15)<<4|(n[2]&240)>>4,96|n[2]&15,n[3],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15])}function A(n,f,i){n??={};let r=V({...n,_v6:!0},new Uint8Array(16));return r=y(r),p(r)}export{A as v};
