import{d as A,g as B,b as D,o as V,c as I,a as n,w as r,a6 as L,r as M,i as _,f as t,t as o,e as q,cx as G,a1 as K,K as c,l as O}from"./index-C0LFq0t5.js";import{E as R}from"./el-pagination-BB8JCOIr.js";/* empty css                        *//* empty css                    */import{E as F}from"./el-card-M-h8gQ7j.js";import{_ as H}from"./close-CSjQ_Ylz.js";import{E as J,a as Q}from"./index-DJZt49th.js";import"./index-DefrYvvh.js";const U={class:"annual-plan-goal-container"},W={class:"detail-header"},X={class:"detail-title"},Y={class:"detail-summary"},Z={class:"summary-item"},tt={class:"value"},at={class:"summary-item"},et={class:"value"},st={class:"summary-item"},nt={class:"value"},ot={class:"summary-item"},lt={class:"value"},it={class:"summary-item"},ct={class:"value"},rt={class:"summary-item"},_t={class:"value"},pt={class:"pagination"},dt=A({__name:"goalTasks",setup(ut){const{proxy:u}=B(),f=u.publicStore(),m=L(),a=M({id:"",city_name:"",district_name:"",status:"",report_time:"",plan_year:"",investment_amount:"",project_count:"",report_unit:""}),h=c(()=>a.plan_year&&a.city_name?`${a.plan_year}年${a.city_name}年度计划`:a.city_name?`${a.city_name}年度计划`:"年度目标任务详情"),k=c(()=>a.city_name&&a.district_name?`${a.city_name}${a.district_name}`:a.city_name||"-"),w=c(()=>a.investment_amount?`${a.investment_amount}万`:"-"),x=c(()=>a.project_count?`${a.project_count}个`:"-"),T=c(()=>a.project_count?`${Number(a.project_count)*120}亩`:"-"),C=s=>({passed:"success",special_audit:"warning",failed:"danger",wait_report:"info",in_progress:""})[s]||"",$=s=>({passed:"已通过",special_audit:"特审候",failed:"不通过",wait_report:"待上报",in_progress:"进行中"})[s]||"未知",v=_([]),g=_(0),p=_(10),d=_(1),E=async()=>{const s=m.params.id;if(!s)return;const e={model:"t_annual_plan_report",args:`id='${s}'`},l=await f.http({Api:e});Array.isArray(l)&&l.length>0&&Object.assign(a,l[0])},y=async()=>{const s=[{task_type:"城市更新示范区建设",task_category:"老旧小区改造",build_content:"完成5个小区外立面与屋面修缮",target_value:"5个"},{task_type:"社区服务设施完善",task_category:"养老托育",build_content:"新建社区养老服务站2处",target_value:"2处"},{task_type:"市政基础设施提升",task_category:"道路交通",build_content:"实施主干道微循环优化",target_value:"6条"},{task_type:"生态环境整治",task_category:"海绵城市",build_content:"完成雨污分流管网改造",target_value:"18公里"},{task_type:"公共空间提升",task_category:"公园绿地",build_content:"新增口袋公园及绿地",target_value:"12处"}];g.value=s.length;const e=(d.value-1)*p.value;v.value=s.slice(e,e+p.value)},j=s=>{d.value=s,y()},S=()=>{u.toPath(`/annual-plan/${m.params.id}`)};return D(async()=>{await E(),await y()}),(s,e)=>{const l=H,z=G,b=F,i=Q,N=J,P=R;return V(),I("div",U,[n(b,{class:"detail-header-card"},{default:r(()=>[t("div",W,[t("div",X,o(h.value),1),t("div",{class:"detail-close",onClick:q(S,["stop"])},[n(l)])]),t("div",Y,[t("div",Z,[e[0]||(e[0]=t("span",{class:"label"},"所属地区",-1)),t("span",tt,o(k.value),1)]),t("div",at,[e[1]||(e[1]=t("span",{class:"label"},"计划总预算",-1)),t("span",et,o(w.value),1)]),t("div",st,[e[2]||(e[2]=t("span",{class:"label"},"计划状态",-1)),t("span",nt,[n(z,{type:C(a.status),effect:"dark",size:"small"},{default:r(()=>[K(o($(a.status)),1)]),_:1},8,["type"])])]),t("div",ot,[e[3]||(e[3]=t("span",{class:"label"},"包含项目",-1)),t("span",lt,o(x.value),1)]),t("div",it,[e[4]||(e[4]=t("span",{class:"label"},"计划建设规模",-1)),t("span",ct,o(T.value),1)]),t("div",rt,[e[5]||(e[5]=t("span",{class:"label"},"上报单位",-1)),t("span",_t,o(a.report_unit||"-"),1)])])]),_:1}),n(b,{class:"detail-info-card"},{default:r(()=>[e[6]||(e[6]=t("div",{class:"info-title"},"详细信息",-1)),e[7]||(e[7]=t("div",{class:"table-title"},"重点落实任务",-1)),n(N,{data:v.value,border:"",class:"goal-table",style:{width:"100%"}},{default:r(()=>[n(i,{type:"index",label:"序号",width:"60"}),n(i,{prop:"task_type",label:"任务类型",width:"180"}),n(i,{prop:"task_category",label:"任务中类",width:"200"}),n(i,{prop:"build_content",label:"建设内容","min-width":"260"}),n(i,{prop:"target_value",label:"项目量化目标",width:"160"})]),_:1},8,["data"]),t("div",pt,[n(P,{background:"",layout:"prev, pager, next",total:g.value,"page-size":p.value,"current-page":d.value,onCurrentChange:j},null,8,["total","page-size","current-page"])])]),_:1})])}}}),wt=O(dt,[["__scopeId","data-v-102dc09f"]]);export{wt as default};
