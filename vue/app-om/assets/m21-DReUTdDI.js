import{_ as R}from"./ViewFiles-DMp3eGxU.js";import{_ as T}from"./ListTree.vue_vue_type_script_setup_true_lang-BTr36bti.js";import{_ as V}from"./AbTitle.vue_vue_type_script_setup_true_lang-Dk_I9lvQ.js";import{d as E,g as B,r as I,b as S,n as q,o as f,c as h,f as a,a as u,w as N,u as l,e as H,h as M,i as g,l as D}from"./index-Bd85TTIS.js";import"./el-text-CZU5bItM.js";import"./index-CLnax6KY.js";/* empty css                    */const F={class:"layout-row"},L={class:"flex1 hh100 hidden rad8"},j={class:"layout-col"},z={class:"ww100 bo-i16-1 rads8 hidden"},G={class:"layout-col white-rgba50 rady8 bo-i16-1"},J={class:"flex4 hh100 hidden rad8 ml20"},K={class:"layout-col bgi16"},O={class:"ww100 bo-i16-1 rads8 hidden"},P={class:"layout-col white-rgba50 rady8 bo-i16-1"},Q={key:0,class:"ww100 hh100 flex-col-sc f24 cc hidden bg-white"},U={key:0,class:"ww100 hh100 flex-cc f24 cc"},W=["src"],X=E({__name:"m21",setup(Y){const{proxy:s}=B(),_=s.publicStore();s.configStore();let m=g(),y=g();const e=I({..._.$state,listRow:!0,listExpand:!0,content:[{width:"flex1",show:!0,align:"left",key:"name",name:"名称"}]});S(async()=>{C()});const C=async t=>{let o={model:"t_file_type"},d={model:"t_file_content"},r=await _.http({Api1:o,Api2:d}),c=s.isNull(r.Api1)?[]:r.Api1.sort((n,i)=>n.orderd-i.orderd),w=s.isNull(r.Api2)?[]:r.Api2.sort((n,i)=>n.orderd-i.orderd),k="019be0b6-a467-7a5e-8ad9-6ba600813fa5",v=c.find(n=>n.id==k);if(v){let n=[];e.plans=c.filter(i=>i.parent_id==k),e.plans.forEach(i=>{i.parent_id="0",i.parent_type=`${v.type}/${i.type}`;let b=w.filter(p=>p.parent_id==i.id);s.isNull(b)||b.forEach(p=>{p.parent_type=`${i.parent_type}/${p.type}`,n.push(p)})}),_._public.contents=n,e.list=[...e.plans,...n],x(t)}},x=async t=>{e.tree=s.treeData(e.list,e.key,e.parent,"children");let o=s.findNode(e.tree,c=>!c.children),d=s.findNode(e.tree,c=>c[e.key]==t),r=s.isNull(d)?o:d;await q(),m.value.handleNodeClick(r)},$=t=>{t.file=_.active.attr[t.type]?_.active.attr[t.type].data:"",e.active={...t}},A=(t,o)=>{};return(t,o)=>{const d=V,r=T,c=R;return f(),h("div",F,[a("div",L,[a("div",j,[a("div",z,[u(d,{title:"项目成果"},{"right-content":N(()=>[...o[1]||(o[1]=[])]),_:1})]),a("div",G,[u(r,{onHandleNodeClick:$,onHandleClick:A,state:l(e),ref_key:"listTreeRef",ref:m},null,8,["state"])])])]),a("div",J,[a("div",K,[a("div",O,[u(d,{title:l(e).active?l(e).active.name:""},{"right-content":N(()=>[a("div",{class:"cursor",onClick:o[0]||(o[0]=H(w=>l(y).onVisable(l(e).active.file),["stop"]))},"全屏")]),_:1},8,["title"])]),a("div",P,[!t.isNull(l(_).active.attr)&&!t.isNull(l(e).active)?(f(),h("div",Q,[l(e).active.file?(f(),h("iframe",{key:1,class:"ww100 hh100",src:t.I(l(e).active.file)},null,8,W)):(f(),h("div",U,"未找到资源"))])):M("",!0)])])]),u(c,{ref_key:"viewRef",ref:y},null,512)])}}}),ae=D(X,[["__scopeId","data-v-68e8fdf6"]]);export{ae as default};
