import{_ as I,a as N}from"./Area.vue_vue_type_script_setup_true_lang-M0LoOAmG.js";import{_ as $}from"./Add-D2-IK3J2.js";import{_ as C}from"./AaFoot-DZKeqXwB.js";import{_ as R}from"./List.vue_vue_type_script_setup_true_lang-GWlOrLxS.js";import{_ as V}from"./AaTitle.vue_vue_type_script_setup_true_lang-DQZ6AruM.js";import{d as S,g as j,r as A,b as P,j as B,o as y,c as w,a as o,w as h,u as a,e as L,_ as M,f as k,t as D,h as E,i as m,n as F}from"./index-ClTGGYJq.js";const H={class:"layout-col"},O={class:"f14 ml4"},T={class:"layout-col bg-white"},X=S({__name:"m2",setup(z){const{proxy:s}=j(),i=s.publicStore();s.configStore(),s.dictStore();let u=m(),_=m(),p=m();const e=A({...i.$state,listRow:!0,content:[{width:"w70",show:!0,align:"center",key:"*",name:"序号"},{width:"w50x5",show:!0,align:"left",key:"station_name",name:"名称"},{width:"w50x5",show:!0,align:"left",key:"instlPos",name:"位置"},{width:"w50x5",show:!0,align:"left",key:"mark",name:"标志"},{width:"w50x5",show:!0,align:"left",key:"order",name:"排序"},{width:"flex1",show:!0,align:"right",key:{},name:"操作"}],editFrom:[{required:!0,editshow:"none",name:"上级",key:"parent_id",type:"input"},{required:!0,editshow:!0,name:"名称",key:"station_name",type:"input"},{required:!1,editshow:!0,name:"位置",key:"instlPos",type:"input"},{required:!1,editshow:!0,name:"标志",key:"mark",type:"input"},{required:!1,editshow:!0,key:"images",name:"图片",type:"base64"},{required:!1,editshow:!0,name:"排序",key:"order",type:"input"}],addItem:{},srcList:[""]});P(async()=>{await i.init({path:"/station"},e),e.content.find(t=>t.name=="操作")}),B(()=>i.active,async t=>{await F(),!s.isNull(t)&&l()},{immediate:!1,deep:!0});const l=async()=>{e.query={model:e.model,args:`parent_id='${i.active.id}'`,field:"id, parent_id, station_name, `order`, mark, instlPos, province, province_name, city, city_name, district, district_name"},e.params={Api:e.query};let t=await i.http(e.params);e.empty=!!s.isNull(t),e.list=s.isNull(t)?[]:t.sort((n,d)=>n.order-d.order),e.addItem={parent_id:i.active.id}},f=async(t,n)=>{if(t=="add"||t=="upd"){if(!n.images){let d={model:e.model,args:`id='${n.id}'`,field:"id, images"},c=await i.http({Api:d});s.isNull(c)||(n.images=c[0].images)}u.value.onVisable(n)}t=="del"&&u.value.del(n),t=="area"&&_.value.onVisable(n),t=="industry"&&p.value.onVisable(n),t=="active"&&(i.active=n)};return(t,n)=>{const d=M,c=V,g=R,b=C,v=$,x=I,q=N;return y(),w("div",H,[o(c,{title:t.isNull(a(i).active)?"":a(i).active.station_name},{"left-content":h(()=>[...n[1]||(n[1]=[])]),"right-content":h(()=>[a(e).content.find(r=>typeof r.key=="object")&&a(e).content.find(r=>typeof r.key=="object").key.hasOwnProperty("add")?(y(),w("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:n[0]||(n[0]=L(r=>f("add",a(e).addItem),["stop"]))},[o(d,{class:"f12 fw"}),k("span",O,D(a(e).content.find(r=>typeof r.key=="object").key.add),1)])):E("",!0)]),_:1},8,["title"]),k("div",T,[o(g,{onHandleClick:f,state:a(e)},null,8,["state"])]),o(b),o(v,{onInit:l,state:a(e),ref_key:"addRef",ref:u},null,8,["state"]),o(x,{onInit:l,state:a(e),ref_key:"areaRef",ref:_},null,8,["state"]),o(q,{onInit:l,state:a(e),ref_key:"industryRef",ref:p},null,8,["state"])])}}});export{X as _};
