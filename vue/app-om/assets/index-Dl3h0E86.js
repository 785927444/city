import{_ as g}from"./Add-C2Yn49FZ.js";import{_ as b}from"./List.vue_vue_type_script_setup_true_lang-But96V8i.js";import{_ as v}from"./AaTitle.vue_vue_type_script_setup_true_lang-Dok3GIN-.js";import{d as x,g as q,r as C,b as S,o as y,c as _,f as c,a as d,w as f,u as o,e as V,_ as N,t as j,h as $,i as B}from"./index-BWjCSAnw.js";import"./el-progress-DQWPeYlj.js";import"./Upload-D7KlxVMi.js";import"./el-message-CJx4xv24.js";import"./el-text-Ck7yMuci.js";import"./el-checkbox-DlSjzc6V.js";import"./el-image-viewer-HQ-b3oKZ.js";import"./el-switch-i6AGQHxo.js";import"./select-quGGAc_E.js";const I={class:"layout-col"},L={class:"layout-col"},A={class:"f14 ml2"},M={class:"layout-col white-rgba50 rad8 p15"},U=x({__name:"index",setup(O){const{proxy:n}=q(),l=n.publicStore();n.configStore();const p=n.dictStore();let i=B();const e=C({...l.$state,content:[{width:"w70",show:!0,align:"center",key:"*",name:"序号"},{width:"w50x4",show:!0,align:"left",key:"model",name:"模型"},{width:"w50x4",show:!0,align:"left",key:"name",name:"名称"},{width:"w50x4",show:!0,align:"left",key:"path",name:"类型",type:"select",list:p.authList,value:"value",label:"name"},{width:"w50x4",show:!0,align:"left",key:"order",name:"排序"},{width:"w50x4",show:!0,align:"left",key:"type",name:"其他"},{width:"flex1",show:!0,align:"right",key:l.auth,name:"操作"}],editFrom:[{required:!0,editshow:!0,key:"model",name:"模型",type:"input"},{required:!0,editshow:!0,key:"name",name:"名称",type:"input"},{required:!0,editshow:!0,key:"path",name:"类型",type:"select",list:p.authList,value:"value",label:"name"},{required:!1,editshow:!0,key:"order",name:"排序",type:"input"},{required:!1,editshow:!0,key:"type",name:"其他",type:"input"}]});S(async()=>{m()});const m=async a=>{e.query={model:e.model},e.params={Api:e.query};let t=await l.http(e.params);e.empty=!!n.isNull(t),e.list=n.isNull(t)?[]:t.sort((r,u)=>r.order-u.order),l._public.list=e.list},h=(a,t)=>{if((a=="add"||a=="upd")&&i.value.onVisable(t),a=="child"){let r=n.varObj(e.parent,t[e.key]);i.value.onVisable(r)}a=="del"&&i.value.del(t)};return(a,t)=>{const r=N,u=v,w=b,k=g;return y(),_("div",I,[c("div",L,[d(u,{title:"权限列表"},{"left-content":f(()=>[...t[1]||(t[1]=[])]),"right-content":f(()=>[o(e).content.find(s=>typeof s.key=="object")&&o(e).content.find(s=>typeof s.key=="object").key.hasOwnProperty("add")?(y(),_("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:t[0]||(t[0]=V(s=>o(i).onVisable(o(e).addItem),["stop"]))},[d(r,{class:"f12 fw"}),c("span",A,j(o(e).content.find(s=>typeof s.key=="object").key.add),1)])):$("",!0)]),_:1}),c("div",M,[d(w,{onHandleClick:h,state:o(e)},null,8,["state"])]),d(k,{onInit:m,state:o(e),ref_key:"addRef",ref:i},null,8,["state"])])])}}});export{U as default};
