import{d as ce,b as pe,aq as ve,j as fe,o as p,c as m,a,w as o,i as f,F as O,p as B,f as l,x as ae,t as D,h as q,z as oe,q as me,m as be,e as N,y as $e,K as H,l as ge,r as se,a0 as Ve,u as Re,a1 as I,cx as Le}from"./index-C0LFq0t5.js";import{E as Ae}from"./el-pagination-BB8JCOIr.js";/* empty css                        *//* empty css                    */import{E as Te}from"./el-link-C1XyEaxI.js";import{E as he}from"./el-card-M-h8gQ7j.js";import{s as v,_ as We}from"./index-CXAtcIV9.js";import{_ as Oe}from"./caret-top-15OmBD7l.js";import{h as ne}from"./index-Da8m4HG1.js";import{E as Be,a as De}from"./index-DJZt49th.js";import{E as ue}from"./index-DCe-bV3q.js";import"./index-DefrYvvh.js";const Pe={class:"donut-header"},Ue={class:"donut-header-left"},je={class:"donut-title"},Me={class:"donut-header-right"},qe={key:0,class:"donut-legend"},Ie={class:"donut-legend-text"},Ne={key:0,class:"donut-center-icon"},He=ce({__name:"DonutPieCard",props:{title:{},data:{},dotColor:{default:"#2F7BFF"},centerIcon:{type:Boolean,default:!0},height:{default:220},valueSuffix:{default:""},showValueInLabel:{type:Boolean,default:!1},selectOptions:{default:()=>[]},modelValue:{},fullscreen:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(_,{emit:Y}){const c=_,U=Y,b=f(null),R=f(null);let d=null,w=null,L=0;const j=H(()=>`${c.height}px`),P=H(()=>c.data.map(u=>({name:u.name,color:u.color||c.dotColor}))),A=f(!1),y=()=>{cancelAnimationFrame(L),L=requestAnimationFrame(()=>{d?.resize()})},k=()=>{if(!v.isEnabled){A.value=!1;return}A.value=!!v.element&&v.element===b.value,y()},G=async()=>{!v.isEnabled||!b.value||(await v.toggle(b.value),y())},K=u=>{const x=c.showValueInLabel?` ${u.value}${c.valueSuffix}`:"";return`${u.name}
${u.percent}%${x}`},J=()=>{const u=["50%","56%"],x=c.data.map(n=>({name:n.name,value:n.value,itemStyle:{color:n.color||c.dotColor}}));return{animation:!1,tooltip:{trigger:"item",backgroundColor:"rgba(0,0,0,0.65)",textStyle:{color:"#fff"},formatter:n=>`${n.name}<br/>${n.value} (${n.percent}%)`},series:[{type:"pie",radius:["0%","50%"],center:u,silent:!0,data:[{value:1}],itemStyle:{color:"rgba(47,123,255,0.06)"},label:{show:!1}},{type:"pie",radius:["52%","72%"],center:u,minAngle:8,avoidLabelOverlap:!0,label:{show:!0,formatter:K,color:n=>n.color,fontSize:12,fontWeight:600,lineHeight:16},labelLine:{show:!0,length:18,length2:12,smooth:.25},itemStyle:{borderColor:"#fff",borderWidth:2,borderRadius:6},data:x},{type:"pie",radius:["74%","76%"],center:u,silent:!0,data:[{value:1}],itemStyle:{color:"rgba(47,123,255,0.14)"},label:{show:!1}}]}},M=()=>{R.value&&(d||(d=ne(R.value)),d.setOption(J(),!0),y())},Q=u=>U("update:modelValue",u);return pe(()=>{M(),b.value&&"ResizeObserver"in window?(w=new ResizeObserver(()=>y()),w.observe(b.value)):window.addEventListener("resize",y),v.isEnabled&&v.on("change",k),k()}),ve(()=>{w&&b.value&&w.unobserve(b.value),w=null,window.removeEventListener("resize",y),v.isEnabled&&v.off("change",k),cancelAnimationFrame(L),d?.dispose(),d=null}),fe(()=>c.data,()=>M(),{deep:!0}),(u,x)=>{const n=me,F=be,S=he;return p(),m("div",{ref_key:"wrapRef",ref:b,class:"donut-wrap"},[a(S,{class:"donut-card",shadow:"never"},{header:o(()=>[l("div",Pe,[l("div",Ue,[l("span",{class:"donut-title-dot",style:ae({backgroundColor:_.dotColor})},null,4),l("span",je,D(_.title),1)]),l("div",Me,[_.selectOptions.length?(p(),oe(F,{key:0,"model-value":_.modelValue,size:"small",class:"donut-select","onUpdate:modelValue":Q},{default:o(()=>[(p(!0),m(O,null,B(_.selectOptions,g=>(p(),oe(n,{key:String(g.value),label:g.label,value:g.value},null,8,["label","value"]))),128))]),_:1},8,["model-value"])):q("",!0),_.fullscreen?(p(),m("div",{key:1,class:"donut-fullscreen",onClick:N(G,["stop"])},[l("span",{class:$e(["donut-fullscreen-box",{checked:A.value}])},null,2),x[0]||(x[0]=l("span",null,"全屏",-1))])):q("",!0)])])]),default:o(()=>[P.value.length?(p(),m("div",qe,[(p(!0),m(O,null,B(P.value,g=>(p(),m("div",{key:g.name,class:"donut-legend-item"},[l("span",{class:"donut-legend-dot",style:ae({backgroundColor:g.color})},null,4),l("span",Ie,D(g.name),1)]))),128))])):q("",!0),l("div",{class:"donut-chart-area",style:ae({height:j.value})},[l("div",{ref_key:"chartRef",ref:R,class:"donut-chart"},null,512),_.centerIcon?(p(),m("div",Ne)):q("",!0)],4)]),_:1})],512)}}}),Ye=ge(He,[["__scopeId","data-v-deacff8b"]]),Ge={class:"push-track-container"},Ke={class:"page-top"},Je={class:"top-filters"},Qe={class:"kpi-bar"},Xe={class:"kpi-item"},Ze={class:"kpi-value"},el={class:"kpi-item"},ll={class:"kpi-value"},tl={class:"kpi-item danger"},al={class:"kpi-value"},sl={class:"content-grid"},ol={class:"left-col"},nl={class:"card-header"},rl={class:"card-header-right"},il={class:"bottom-grid"},dl={class:"card-header"},ul={class:"card-header-right"},cl={class:"card-header"},pl={class:"card-header-right"},vl={class:"table-body"},fl={class:"table-pagination"},ml=ce({__name:"index",setup(_){const Y=Array.from({length:10}).map((s,e)=>new Date().getFullYear()-9+e),c=se({year:new Date().getFullYear(),region:"山西省"}),U=[{label:"既有建筑改造项目",value:"既有建筑改造项目"},{label:"城市更新项目",value:"城市更新项目"},{label:"基础设施项目",value:"基础设施项目"}],b=[{label:"项目总览",value:"项目总览"},{label:"预警视图",value:"预警视图"}],R=[{label:"项目阶段",value:"项目阶段"},{label:"策划阶段",value:"策划阶段"},{label:"立项阶段",value:"立项阶段"},{label:"实施阶段",value:"实施阶段"},{label:"竣工阶段",value:"竣工阶段"}],d=se({projectType:U[0].value,viewMode:b[0].value,stage:R[0].value}),w=se({total:133,completed:621,warn:249}),L=["山西省","太原市","大同市","阳泉市","长治市","晋城市","朔州市","忻州市","吕梁市","运城市"],j=["历史文化保护与复兴","完善社区服务设施","基础设施补短板","公共空间品质提升","既有建筑节能改造"],P=["策划阶段","立项阶段","实施阶段","竣工阶段"],A=f(Array.from({length:60}).map((s,e)=>{const i=L[e%L.length],r=j[e%j.length],E=P[e%P.length],z=e%28+1,$=String(e+1).padStart(2,"0");return{id:e+1,name:`${i}-十五五重点专项规划编制项目${$}`,type:r,region:i,status:E,updatedAt:`2026年6月${z}日`}})),y=f(10),k=f(1),G=H(()=>{const s=(k.value-1)*y.value;return A.value.slice(s,s+y.value)}),K=s=>{k.value=s},J=s=>{ue.info(`示例：查看 ${s.name}`)},M=s=>{ue.success(`示例：定位 ${s.name}`)},Q=s=>s==="竣工阶段"?"success":s==="实施阶段"?"warning":"info",u=f("scale"),x=H(()=>[{name:"太原市",value:20,color:"#FF8A34"},{name:"大同市",value:20,color:"#FF4D4F"},{name:"阳泉市",value:20,color:"#34C2A1"},{name:"长治市",value:20,color:"#2F7BFF"},{name:"晋城市",value:20,color:"#56C2E6"}]),n=f(null),F=f(null),S=f(null),g=f(null),X=f(null);let T=null,W=null,h=null,Z=0;const C=()=>{cancelAnimationFrame(Z),Z=requestAnimationFrame(()=>{T?.resize(),W?.resize()})},ye={backgroundColor:"rgba(0,0,0,0.65)",borderWidth:0,textStyle:{color:"#fff",fontSize:12}},re=(s="个")=>({...ye,trigger:"axis",axisPointer:{type:"shadow",shadowStyle:{color:"rgba(47,123,255,0.08)"}},formatter:e=>{const i=e.filter(r=>r&&r.seriesName!=null).map(r=>`<div style="display:flex;justify-content:space-between;gap:16px;"><span>${r.marker}${r.seriesName}</span><span style="font-weight:700;">${r.value??0}${s}</span></div>`).join("");return`<div style="min-width:160px;"><div style="font-weight:700;margin-bottom:6px;">${e?.[0]?.axisValue??""}</div>${i}</div>`}}),_e=()=>g.value?(T||(T=ne(g.value)),T):null,we=()=>X.value?(W||(W=ne(X.value)),W):null,ke=()=>{const s=_e();if(!s)return;const e=["太原市","阳泉市","长治市","晋城市","朔州市","忻州市","运城市","吕梁市"],i=[76,97,96,85,68,72,80,74],r=[44,66,63,55,42,51,58,49],E=[22,30,31,28,24,26,29,27],z=[10,16,14,13,8,9,12,11],$={animation:!1,grid:{left:44,right:18,top:44,bottom:26,containLabel:!0},legend:{left:0,top:6,itemWidth:12,itemHeight:8,icon:"roundRect",textStyle:{color:"#606266",fontSize:12},data:["策划阶段","立项阶段","实施阶段","竣工阶段"]},tooltip:re("个"),xAxis:{type:"category",data:e,axisTick:{show:!1},axisLabel:{color:"#606266",fontSize:12},axisLine:{lineStyle:{color:"#E6EAF2"}}},yAxis:{type:"value",name:"单位：个",nameLocation:"end",nameTextStyle:{color:"#909399",fontSize:12,padding:[0,0,0,0]},nameGap:10,axisLabel:{color:"#606266",fontSize:12},axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#EEF1F6"}}},series:[{name:"策划阶段",type:"bar",data:i,barWidth:14,itemStyle:{color:"#FF4D4F",borderRadius:[3,3,0,0]}},{name:"立项阶段",type:"bar",data:r,barWidth:14,itemStyle:{color:"#FF8A34",borderRadius:[3,3,0,0]}},{name:"实施阶段",type:"bar",data:E,barWidth:14,itemStyle:{color:"#34C2A1",borderRadius:[3,3,0,0]}},{name:"竣工阶段",type:"bar",data:z,barWidth:14,itemStyle:{color:"#2F7BFF",borderRadius:[3,3,0,0]}}]};s.setOption($,!0),C()},xe=()=>{const s=we();if(!s)return;const e=["太原市","大同市","阳泉市","长治市","晋城市"],i=[62,44,38,29,26],r=[76,60,55,41,33],E=[96,72,64,52,40],z={animation:!1,grid:{left:44,right:18,top:44,bottom:26,containLabel:!0},legend:{left:0,top:6,itemWidth:12,itemHeight:8,icon:"roundRect",textStyle:{color:"#606266",fontSize:12},data:["2024年","2025年","2026年"]},tooltip:re("个"),xAxis:{type:"category",data:e,axisTick:{show:!1},axisLabel:{color:"#606266",fontSize:12},axisLine:{lineStyle:{color:"#E6EAF2"}}},yAxis:{type:"value",axisLabel:{color:"#606266",fontSize:12},axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#EEF1F6"}}},series:[{name:"2024年",type:"bar",data:i,barWidth:14,itemStyle:{color:"#FF4D4F",borderRadius:[3,3,0,0]}},{name:"2025年",type:"bar",data:r,barWidth:14,itemStyle:{color:"#FF8A34",borderRadius:[3,3,0,0]}},{name:"2026年",type:"bar",data:E,barWidth:14,itemStyle:{color:"#2F7BFF",borderRadius:[3,3,0,0]}}]};s.setOption(z,!0),C()},ee=()=>{ke(),xe()},ie=()=>{C()},le=async s=>{if(!v.isEnabled)return;const e=s==="stage"?n.value:s==="scale"?F.value:S.value;e&&(await v.toggle(e),C())},Fe=async()=>{k.value=1,ee()};return pe(async()=>{ee(),"ResizeObserver"in window?(h=new ResizeObserver(()=>C()),n.value&&h.observe(n.value),F.value&&h.observe(F.value),S.value&&h.observe(S.value)):window.addEventListener("resize",C),v.isEnabled&&v.on("change",ie)}),fe(()=>[c.year,c.region,d.projectType,d.viewMode,d.stage],()=>{ee()}),ve(()=>{h&&n.value&&h.unobserve(n.value),h&&F.value&&h.unobserve(F.value),h&&S.value&&h.unobserve(S.value),h=null,window.removeEventListener("resize",C),v.isEnabled&&v.off("change",ie),cancelAnimationFrame(Z),T?.dispose(),W?.dispose(),T=null,W=null}),(s,e)=>{const i=me,r=be,E=Ve,z=Oe,$=We,te=he,V=De,Se=Le,de=Te,Ce=Be,Ee=Ae;return p(),m("div",Ge,[l("div",Ke,[e[10]||(e[10]=l("div",{class:"breadcrumb"},[l("span",{class:"crumb"},"首页"),l("span",{class:"sep"},">"),l("span",{class:"crumb current"},"项目实施跟踪")],-1)),l("div",Je,[a(r,{modelValue:c.year,"onUpdate:modelValue":e[0]||(e[0]=t=>c.year=t),class:"pill-select",size:"small"},{default:o(()=>[(p(!0),m(O,null,B(Re(Y),t=>(p(),oe(i,{key:t,label:`${t}年`,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),a(r,{modelValue:c.region,"onUpdate:modelValue":e[1]||(e[1]=t=>c.region=t),class:"pill-select",size:"small"},{default:o(()=>[a(i,{label:"山西省",value:"山西省"}),a(i,{label:"太原市",value:"太原市"}),a(i,{label:"大同市",value:"大同市"}),a(i,{label:"晋城市",value:"晋城市"})]),_:1},8,["modelValue"]),a(E,{class:"pill-btn",type:"primary",size:"small",onClick:Fe},{default:o(()=>[...e[9]||(e[9]=[I("查询",-1)])]),_:1})])]),e[22]||(e[22]=l("div",{class:"block-gap"},null,-1)),l("div",Qe,[l("div",Xe,[l("div",Ze,D(w.total),1),e[11]||(e[11]=l("div",{class:"kpi-label"},"项目总数",-1))]),l("div",el,[l("div",ll,D(w.completed),1),e[12]||(e[12]=l("div",{class:"kpi-label"},"完成竣工项目",-1))]),l("div",tl,[l("div",al,[l("span",null,D(w.warn),1),a(z,{class:"kpi-arrow"})]),e[13]||(e[13]=l("div",{class:"kpi-label"},"预警项目",-1))])]),e[23]||(e[23]=l("div",{class:"block-gap"},null,-1)),l("div",sl,[l("div",ol,[l("div",{ref_key:"stageWrapRef",ref:n,class:"card-wrap"},[a(te,{class:"dash-card stage-card",shadow:"never"},{header:o(()=>[l("div",nl,[e[15]||(e[15]=l("div",{class:"card-header-left"},[l("span",{class:"title-dot"}),l("span",{class:"card-title"},"项目阶段进度跟踪图")],-1)),l("div",rl,[a(r,{modelValue:d.projectType,"onUpdate:modelValue":e[2]||(e[2]=t=>d.projectType=t),class:"pill-select header-pill",size:"small"},{default:o(()=>[(p(),m(O,null,B(U,t=>a(i,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),a(r,{modelValue:d.viewMode,"onUpdate:modelValue":e[3]||(e[3]=t=>d.viewMode=t),class:"pill-select header-pill",size:"small"},{default:o(()=>[(p(),m(O,null,B(b,t=>a(i,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),a(r,{modelValue:d.stage,"onUpdate:modelValue":e[4]||(e[4]=t=>d.stage=t),class:"pill-select header-pill",size:"small"},{default:o(()=>[(p(),m(O,null,B(R,t=>a(i,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l("div",{class:"header-fullscreen",onClick:e[5]||(e[5]=N(t=>le("stage"),["stop"]))},[a($,{class:"header-fullscreen-ico"}),e[14]||(e[14]=l("span",null,"全屏",-1))])])])]),default:o(()=>[l("div",{ref_key:"stageChartRef",ref:g,class:"chart chart-stage"},null,512)]),_:1})],512),l("div",il,[l("div",{ref_key:"scaleWrapRef",ref:F,class:"card-wrap"},[a(te,{class:"dash-card bottom-card",shadow:"never"},{header:o(()=>[l("div",dl,[e[17]||(e[17]=l("div",{class:"card-header-left"},[l("span",{class:"title-dot"}),l("span",{class:"card-title"},"更新项目规模对比图")],-1)),l("div",ul,[l("div",{class:"header-fullscreen",onClick:e[6]||(e[6]=N(t=>le("scale"),["stop"]))},[a($,{class:"header-fullscreen-ico"}),e[16]||(e[16]=l("span",null,"全屏",-1))])])])]),default:o(()=>[l("div",{ref_key:"scaleChartRef",ref:X,class:"chart chart-bottom"},null,512)]),_:1})],512),a(Ye,{title:"预警项目分布饼图",data:x.value,"select-options":[{label:"项目规模",value:"scale"}],modelValue:u.value,"onUpdate:modelValue":e[7]||(e[7]=t=>u.value=t),height:252},null,8,["data","modelValue"])])]),l("div",{ref_key:"tableWrapRef",ref:S,class:"card-wrap right-col"},[a(te,{class:"dash-card table-card",shadow:"never"},{header:o(()=>[l("div",cl,[e[19]||(e[19]=l("div",{class:"card-header-left"},[l("span",{class:"title-dot"}),l("span",{class:"card-title"},"数据清单")],-1)),l("div",pl,[l("div",{class:"header-fullscreen",onClick:e[8]||(e[8]=N(t=>le("table"),["stop"]))},[a($,{class:"header-fullscreen-ico"}),e[18]||(e[18]=l("span",null,"全屏",-1))])])])]),default:o(()=>[l("div",vl,[a(Ce,{data:G.value,border:"",class:"dash-table",height:"100%"},{default:o(()=>[a(V,{type:"index",label:"序号",width:"60"}),a(V,{prop:"name",label:"项目名称","min-width":"220","show-overflow-tooltip":""}),a(V,{prop:"type",label:"项目类型",width:"120"}),a(V,{prop:"region",label:"项目地区",width:"120"}),a(V,{prop:"status",label:"状态",width:"100"},{default:o(t=>[a(Se,{type:Q(t.row.status),effect:"light"},{default:o(()=>[I(D(t.row.status),1)]),_:2},1032,["type"])]),_:1}),a(V,{prop:"updatedAt",label:"更新时间",width:"130"}),a(V,{label:"操作",width:"120",fixed:"right"},{default:o(t=>[a(de,{class:"op-link op-detail",underline:!1,onClick:ze=>J(t.row)},{default:o(()=>[...e[20]||(e[20]=[I("详情",-1)])]),_:1},8,["onClick"]),a(de,{class:"op-link op-locate",underline:!1,onClick:ze=>M(t.row)},{default:o(()=>[...e[21]||(e[21]=[I("定位",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),l("div",fl,[a(Ee,{background:"",layout:"prev, pager, next",total:A.value.length,"page-size":y.value,"current-page":k.value,onCurrentChange:K},null,8,["total","page-size","current-page"])])])]),_:1})],512)])])}}}),zl=ge(ml,[["__scopeId","data-v-1fbaadaa"]]);export{zl as default};
