import{_ as N}from"./Add-C2Yn49FZ.js";import{_ as v}from"./ListTree.vue_vue_type_script_setup_true_lang-dvfcDO21.js";import{_ as x}from"./AbTitle.vue_vue_type_script_setup_true_lang-DiozM-Sy.js";import{d as q,g as S,r as V,b as I,n as R,o as f,c as y,a as p,w as T,u as s,e as j,_ as $,f as m,t as A,h as B,i as h}from"./index-BWjCSAnw.js";const D={class:"layout-col"},E={class:"f14 ml2"},F={class:"layout-col bg-white"},z=q({__name:"m1",setup(H){const{proxy:o}=S(),c=o.publicStore();o.configStore(),o.dictStore();let l=h(),u=h();const e=V({...c.$state,listRow:!0,listExpand:!0,content:[{width:"flex1",show:!0,align:"left",key:"name",name:"名称",type:"icon"},{width:"w50x2",show:!0,align:"right",key:{add:"新增",upd:"编辑",del:"删除"},name:"操作"}],editFrom:[{required:!0,editshow:!0,key:"parent_id",name:"上级",type:"tree",list:[],node_key:"id",parent_key:"parent_id",top_name:"顶级"},{required:!0,editshow:!0,name:"名称",key:"name",type:"input"},{required:!1,editshow:!0,name:"类型",key:"type",type:"input"},{required:!1,editshow:!0,name:"描述",key:"describe",type:"input"},{required:!1,editshow:!0,name:"排序",key:"orderd",type:"input"}],addItem:{},model:"t_problem_type"});I(async()=>{await k(),_()});const k=async()=>{},_=async t=>{let n={model:e.model,order:"orderd ASC"},i=await c.http({Api:n});e.list=o.isNull(i)?[]:i.sort((a,r)=>a.orderd-r.orderd),c._public.list=e.list,e.editFrom[0].list=e.list,w(t)},w=async t=>{e.tree=o.treeData(e.list,e.key,e.parent,"children");let n=o.findNode(e.tree,r=>!r.children),i=o.findNode(e.tree,r=>r[e.key]==t),a=o.isNull(i)?n:i;a&&(await R(),u.value.handleNodeClick(a))},b=t=>{t.children||(c.active={...t})},g=(t,n)=>{if((t=="add"||t=="upd")&&l.value.onVisable(n),t=="child"){let i=o.varObj(e.parent,n[e.key]);l.value.onVisable(i)}t=="del"&&l.value.del(n)};return(t,n)=>{const i=$,a=x,r=v,C=N;return f(),y("div",D,[p(a,{title:"问题分类导航"},{"right-content":T(()=>[s(e).content.find(d=>typeof d.key=="object")&&s(e).content.find(d=>typeof d.key=="object").key.hasOwnProperty("add")?(f(),y("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:n[0]||(n[0]=j(d=>s(l).onVisable(s(e).addItem),["stop"]))},[p(i,{class:"f12 fw"}),m("span",E,A(s(e).content.find(d=>typeof d.key=="object").key.add),1)])):B("",!0)]),_:1}),m("div",F,[p(r,{onHandleNodeClick:b,onHandleClick:g,state:s(e),ref_key:"listTreeRef",ref:u},null,8,["state"])]),p(C,{onInit:_,state:s(e),ref_key:"addRef",ref:l},null,8,["state"])])}}});export{z as _};
