import{d as R,g as Z,b as G,o as H,c as J,a as e,w as o,a6 as Q,r as V,i as g,f as a,t as _,e as W,cx as X,a1 as m,Z as Y,$ as tt,m as et,q as at,E as st,a0 as nt,K as d,l as ot}from"./index-Bd85TTIS.js";import{E as lt}from"./el-pagination-BXrD03IN.js";/* empty css                        *//* empty css                    */import{E as it}from"./el-link-BqprB1tP.js";import{E as ct}from"./el-card-Dk1FiGNF.js";import{_ as rt}from"./close-CIKj7jbv.js";import{a as pt,E as _t}from"./index-CohXJBWb.js";import"./index-CLnax6KY.js";const ut={class:"annual-plan-projects-container"},mt={class:"detail-header"},dt={class:"detail-title"},yt={class:"detail-summary"},vt={class:"summary-item"},ft={class:"value"},bt={class:"summary-item"},jt={class:"value"},gt={class:"summary-item"},wt={class:"value"},ht={class:"summary-item"},kt={class:"value"},Et={class:"summary-item"},Tt={class:"value"},xt={class:"summary-item"},Ct={class:"value"},Vt={class:"filter-bar"},$t={class:"pagination"},St=R({__name:"projectList",setup(Lt){const{proxy:k}=Z(),$=k.publicStore(),E=Q(),s=V({id:"",city_name:"",district_name:"",status:"",report_time:"",plan_year:"",investment_amount:"",project_count:"",report_unit:""}),S=d(()=>s.plan_year&&s.city_name?`${s.plan_year}年${s.city_name}年度计划`:s.city_name?`${s.city_name}年度计划`:"年度计划详情"),L=d(()=>s.city_name&&s.district_name?`${s.city_name}${s.district_name}`:s.city_name?s.city_name:"-"),P=d(()=>s.investment_amount?`${s.investment_amount}万`:"-"),N=d(()=>s.project_count?`${s.project_count}个`:"-"),z=d(()=>s.project_count?`${Number(s.project_count)*120}亩`:"-"),B=l=>({passed:"success",special_audit:"warning",failed:"danger",wait_report:"info",in_progress:""})[l]||"",I=l=>({passed:"已通过",special_audit:"特审候",failed:"不通过",wait_report:"待上报",in_progress:"进行中"})[l]||"未知",n=V({taskType:"",name:"",status:""}),T=g([]),x=g(0),w=g(10),y=g(1),A=async()=>{const l=E.params.id;if(!l)return;const t={model:"t_annual_plan_report",args:`id='${l}'`},c=await $.http({Api:t});Array.isArray(c)&&c.length>0&&Object.assign(s,c[0])},v=async()=>{const t=[{project_name:"老旧小区综合改造一期",city_name:"太原市",district_name:"小店区",project_type:"既有建筑改造利用",project_status:"进行中",construction_type:"改建",investment_amount:"5600",construction_period:"2026-2027",construction_scale:"320亩"},{project_name:"社区服务中心提升工程",city_name:"太原市",district_name:"迎泽区",project_type:"完善社区服务设施",project_status:"未开始",construction_type:"新建",investment_amount:"2100",construction_period:"2026-2026",construction_scale:"120亩"},{project_name:"雨污分流改造项目",city_name:"太原市",district_name:"杏花岭区",project_type:"完善社区服务设施",project_status:"进行中",construction_type:"改造",investment_amount:"3400",construction_period:"2025-2027",construction_scale:"260亩"},{project_name:"历史街区修缮项目",city_name:"太原市",district_name:"万柏林区",project_type:"既有建筑改造利用",project_status:"已完成",construction_type:"修缮",investment_amount:"1800",construction_period:"2024-2025",construction_scale:"90亩"},{project_name:"口袋公园建设项目",city_name:"太原市",district_name:"晋源区",project_type:"完善社区服务设施",project_status:"进行中",construction_type:"新建",investment_amount:"900",construction_period:"2026-2026",construction_scale:"60亩"},{project_name:"城市道路微循环优化",city_name:"太原市",district_name:"尖草坪区",project_type:"既有建筑改造利用",project_status:"未开始",construction_type:"改建",investment_amount:"2400",construction_period:"2026-2027",construction_scale:"150亩"}].filter(u=>{const f=n.taskType?u.project_type===n.taskType:!0,r=n.name?u.project_name.includes(n.name):!0,b=n.status?u.project_status===n.status:!0;return f&&r&&b});x.value=t.length;const c=(y.value-1)*w.value;T.value=t.slice(c,c+w.value)},D=()=>{n.taskType="",n.name="",n.status="",y.value=1,v()},F=l=>{y.value=l,v()},C=()=>{k.toPath(`/annual-plan/${E.params.id}`)};return G(async()=>{await A(),await v()}),(l,t)=>{const c=rt,u=X,f=ct,r=at,b=et,j=tt,U=st,h=nt,q=Y,i=_t,M=it,O=pt,K=lt;return H(),J("div",ut,[e(f,{class:"detail-header-card"},{default:o(()=>[a("div",mt,[a("div",dt,_(S.value),1),a("div",{class:"detail-close",onClick:W(C,["stop"])},[e(c)])]),a("div",yt,[a("div",vt,[t[3]||(t[3]=a("span",{class:"label"},"所属地区",-1)),a("span",ft,_(L.value),1)]),a("div",bt,[t[4]||(t[4]=a("span",{class:"label"},"计划总预算",-1)),a("span",jt,_(P.value),1)]),a("div",gt,[t[5]||(t[5]=a("span",{class:"label"},"计划状态",-1)),a("span",wt,[e(u,{type:B(s.status),effect:"dark",size:"small"},{default:o(()=>[m(_(I(s.status)),1)]),_:1},8,["type"])])]),a("div",ht,[t[6]||(t[6]=a("span",{class:"label"},"包含项目",-1)),a("span",kt,_(N.value),1)]),a("div",Et,[t[7]||(t[7]=a("span",{class:"label"},"建设规模",-1)),a("span",Tt,_(z.value),1)]),a("div",xt,[t[8]||(t[8]=a("span",{class:"label"},"上报单位",-1)),a("span",Ct,_(s.report_unit||"-"),1)])])]),_:1}),e(f,{class:"detail-info-card"},{default:o(()=>[t[13]||(t[13]=a("div",{class:"info-title"},"详细信息",-1)),a("div",Vt,[e(q,{inline:!0,model:n},{default:o(()=>[e(j,{label:"任务类型"},{default:o(()=>[e(b,{modelValue:n.taskType,"onUpdate:modelValue":t[0]||(t[0]=p=>n.taskType=p),placeholder:"请选择",style:{width:"180px"}},{default:o(()=>[e(r,{label:"既有建筑改造利用",value:"既有建筑改造利用"}),e(r,{label:"完善社区服务设施",value:"完善社区服务设施"})]),_:1},8,["modelValue"])]),_:1}),e(j,{label:"项目名称"},{default:o(()=>[e(U,{modelValue:n.name,"onUpdate:modelValue":t[1]||(t[1]=p=>n.name=p),placeholder:"请输入",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(j,{label:"项目状态"},{default:o(()=>[e(b,{modelValue:n.status,"onUpdate:modelValue":t[2]||(t[2]=p=>n.status=p),placeholder:"请选择",style:{width:"160px"}},{default:o(()=>[e(r,{label:"未开始",value:"未开始"}),e(r,{label:"进行中",value:"进行中"}),e(r,{label:"已完成",value:"已完成"})]),_:1},8,["modelValue"])]),_:1}),e(j,null,{default:o(()=>[e(h,{type:"primary",onClick:v},{default:o(()=>[...t[9]||(t[9]=[m("搜索",-1)])]),_:1}),e(h,{onClick:D},{default:o(()=>[...t[10]||(t[10]=[m("重置",-1)])]),_:1}),e(h,{onClick:C},{default:o(()=>[...t[11]||(t[11]=[m("返回",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),e(O,{data:T.value,border:"",class:"project-table",style:{width:"100%"}},{default:o(()=>[e(i,{type:"index",label:"序号",width:"60"}),e(i,{prop:"project_name",label:"项目名称","min-width":"180"}),e(i,{prop:"city_name",label:"地区",width:"120"}),e(i,{prop:"district_name",label:"所属片区",width:"140"}),e(i,{prop:"project_type",label:"项目类型",width:"160"}),e(i,{prop:"project_status",label:"项目状态",width:"120"}),e(i,{prop:"construction_type",label:"建设性质",width:"120"}),e(i,{prop:"investment_amount",label:"投资估算(万元)",width:"140"}),e(i,{prop:"construction_period",label:"建设周期",width:"120"}),e(i,{prop:"construction_scale",label:"建设规模",width:"120"}),e(i,{label:"操作",width:"120"},{default:o(p=>[e(M,{type:"primary",onClick:Pt=>l.viewProject(p.row)},{default:o(()=>[...t[12]||(t[12]=[m("查看",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),a("div",$t,[e(K,{background:"",layout:"prev, pager, next",total:x.value,"page-size":w.value,"current-page":y.value,onCurrentChange:F},null,8,["total","page-size","current-page"])])]),_:1})])}}}),Mt=ot(St,[["__scopeId","data-v-e2711ce4"]]);export{Mt as default};
