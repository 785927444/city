import{_ as A}from"./Add-Dm5MhgCZ.js";import{_ as b}from"./List.vue_vue_type_script_setup_true_lang-Bt0SXkb0.js";import{_ as S}from"./AaTitle.vue_vue_type_script_setup_true_lang-BnIAtUUF.js";import{d as C,g as q,r as x,b as N,o as _,c as f,a as p,w as y,u as s,e as v,_ as I,f as h,t as V,h as $,i as D}from"./index-C0LFq0t5.js";/* empty css                    */import"./index-C9K-_7OE.js";import"./Upload-D980yyfb.js";/* empty css                   */import"./index-DCe-bV3q.js";import"./el-text-CzfEDlFN.js";import"./index-DefrYvvh.js";/* empty css                    */import"./el-image-viewer-BQKeldKi.js";import"./el-switch-BOTkYaDy.js";import"./select-BE64Hb0N.js";const j={class:"layout-col"},B={class:"f14 ml2"},E={class:"layout-col white-rgba50 rad8 p15"},Y=C({__name:"index",setup(L){const{proxy:r}=q(),n=r.publicStore(),w=r.configStore();let l=D();const t=x({...n.$state,content:[{width:"w70",show:!0,align:"center",key:"*",name:"序号"},{width:"w50x5",show:!0,align:"left",key:"name",name:"名称"},{width:"w50x5",show:!0,align:"left",key:"description",name:"描述"},{width:"flex1",show:!0,align:"right",key:n.auth,name:"操作"}],editFrom:[{required:!0,editshow:"none",key:"id",name:"ID",type:"input",class:"update_key"},{required:!0,editshow:!0,key:"name",name:"名称",type:"input"},{required:!1,editshow:!0,key:"description",name:"描述",type:"input"}]});N(async()=>{d()});const k=i=>{t.list.find(e=>e[t.key]==i)},d=async i=>{let c={Api1:{model:t.model,args:`CAST(id AS SIGNED)>${w.user.role_id}`,order:"CAST(id AS SIGNED) ASC"},Api2:{model:"t_route"},Api3:{model:"t_auth"}},o=await n.http(c);t.empty=!!r.isNull(o.Api1),t.list=r.isNull(o.Api1)?[]:o.Api1,n._public.list=t.list,n._public.routeList=r.isNull(o.Api2)?[]:o.Api2,n._public.authList=r.isNull(o.Api3)?[]:o.Api3,k(i)},g=(i,e)=>{(i=="add"||i=="upd")&&l.value.onVisable(e),i=="del"&&l.value.del(e),i=="active"&&(n.active=e)};return(i,e)=>{const u=I,m=S,c=b,o=A;return _(),f("div",j,[p(m,{title:"角色列表"},{"left-content":y(()=>[...e[1]||(e[1]=[])]),"right-content":y(()=>[s(t).content.find(a=>typeof a.key=="object")&&s(t).content.find(a=>typeof a.key=="object").key.hasOwnProperty("add")?(_(),f("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:e[0]||(e[0]=v(a=>s(l).onVisable(s(t).addItem),["stop"]))},[p(u,{class:"f12 fw"}),h("span",B,V(s(t).content.find(a=>typeof a.key=="object").key.add),1)])):$("",!0)]),_:1}),h("div",E,[p(c,{onHandleClick:g,state:s(t)},null,8,["state"])]),p(o,{onInit:d,state:s(t),ref_key:"addRef",ref:l},null,8,["state"])])}}});export{Y as default};
