import{S as fe,C as de,c as Fe,a as ze,e as Le,i as Me,u as ae,G as ue,b as Ae,R as he,Z as ge,d as Ce,m as me,B as Oe,f as pe,g as _e,p as De,L as R,r as ye,h as Ee}from"./index-Da8m4HG1.js";import{c as ke}from"./linesGL-hPiCY4Q-.js";import{bV as s,bW as C,bX as Q,A as re,bY as X,bZ as le,b_ as Pe,aq as Ie,b$ as B}from"./index-ClTGGYJq.js";function Te(e){var a=fe.extend(e);return fe.registerClass(a),a}function Be(e){var a=de.extend(e);return de.registerClass(a),a}Te({type:"series.liquidFill",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,a){var o=Fe(e.data,{coordDimensions:["value"]}),c=new ze(o,this);return c.initData(e.data),c},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}});const We=Le({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,a){a.radiusY==null&&(a.radiusY=a.radius);for(var o=Math.max(Math.ceil(2*a.radius/a.waveLength*4)*2,8);a.phase<-Math.PI*2;)a.phase+=Math.PI*2;for(;a.phase>0;)a.phase-=Math.PI*2;var c=a.phase/Math.PI/2*a.waveLength,d=a.cx-a.radius+c-a.radius*2;e.moveTo(d,a.waterLevel);for(var f=0,u=0;u<o;++u){var m=u%4,p=Ne(u*a.waveLength/4,m,a.waveLength,a.amplitude);e.bezierCurveTo(p[0][0]+d,-p[0][1]+a.waterLevel,p[1][0]+d,-p[1][1]+a.waterLevel,p[2][0]+d,-p[2][1]+a.waterLevel),u===o-1&&(f=p[2][0])}a.inverse?(e.lineTo(f+d,a.cy-a.radiusY),e.lineTo(d,a.cy-a.radiusY),e.lineTo(d,a.waterLevel)):(e.lineTo(f+d,a.cy+a.radiusY),e.lineTo(d,a.cy+a.radiusY),e.lineTo(d,a.waterLevel)),e.closePath()}});function Ne(e,a,o,c){return a===0?[[e+1/2*o/Math.PI/2,c/2],[e+1/2*o/Math.PI,c],[e+o/4,c]]:a===1?[[e+1/2*o/Math.PI/2*(Math.PI-2),c],[e+1/2*o/Math.PI/2*(Math.PI-1),c/2],[e+o/4,0]]:a===2?[[e+1/2*o/Math.PI/2,-c/2],[e+1/2*o/Math.PI,-c],[e+o/4,-c]]:[[e+1/2*o/Math.PI/2*(Math.PI-2),-c],[e+1/2*o/Math.PI/2*(Math.PI-1),-c/2],[e+o/4,0]]}var U=De;function be(e){return e&&e.indexOf("path://")===0}Be({type:"liquidFill",render:function(e,a,o){var c=this,d=this.group;d.removeAll();var f=e.getData(),u=f.getItemModel(0),m=u.get("center"),p=u.get("radius"),S=o.getWidth(),x=o.getHeight(),k=Math.min(S,x),L=0,_=0,F=e.get("outline.show");F&&(L=e.get("outline.borderDistance"),_=U(e.get("outline.itemStyle.borderWidth"),k));var t=U(m[0],S),l=U(m[1],x),n,r,y,h=!1,i=e.get("shape");if(i==="container"?(h=!0,n=[S/2,x/2],r=[n[0]-_/2,n[1]-_/2],y=[U(L,S),U(L,x)],p=[Math.max(r[0]-y[0],0),Math.max(r[1]-y[1],0)]):(n=U(p,k)/2,r=n-_/2,y=U(L,k),p=Math.max(r-y,0)),F){var g=j();g.style.lineWidth=_,d.add(j())}var z=h?0:t-p,v=h?0:l-p,D=null;d.add(H());var M=this._data,W=[];f.diff(M).add(function(b){var w=G(b,!1),A=w.shape.waterLevel;w.shape.waterLevel=h?x/2:p,Me(w,{shape:{waterLevel:A}},e),w.z2=2,K(b,w,null),d.add(w),f.setItemGraphicEl(b,w),W.push(w)}).update(function(b,w){for(var A=M.getItemGraphicEl(w),I=G(b,!1,A),E={},O=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],N=0;N<O.length;++N){var T=O[N];I.shape.hasOwnProperty(T)&&(E[T]=I.shape[T])}for(var J={},$=["fill","opacity","shadowBlur","shadowColor"],N=0;N<$.length;++N){var T=$[N];I.style.hasOwnProperty(T)&&(J[T]=I.style[T])}h&&(E.radiusY=x/2),ae(A,{shape:E,x:I.x,y:I.y},e),e.isUniversalTransitionEnabled&&e.isUniversalTransitionEnabled()?ae(A,{style:J},e):A.useStyle(J);var Y=A.getClipPath(),Z=I.getClipPath();A.setClipPath(I.getClipPath()),A.shape.inverse=I.inverse,Y&&Z&&c._shape===i&&!be(i)&&ae(Z,{shape:Y.shape},e,{isFrom:!0}),K(b,A,A),d.add(A),f.setItemGraphicEl(b,A),W.push(A)}).remove(function(b){var w=M.getItemGraphicEl(b);d.remove(w)}).execute(),u.get("label.show")&&d.add(V(W)),this._shape=i,this._data=f;function P(b,w){if(i)if(be(i)){var A=me(i.slice(7),{}),I=A.getBoundingRect(),E=I.width,O=I.height;E>O?(O=b*2/E*O,E=b*2):(E=b*2/O*E,O=b*2);var N=w?0:t-E/2,T=w?0:l-O/2;return A=me(i.slice(7),{},new Oe(N,T,E,O)),w&&(A.x=-E/2,A.y=-O/2),A}else if(h){var J=w?-b[0]:t-b[0],$=w?-b[1]:l-b[1];return pe("rect",J,$,b[0]*2,b[1]*2)}else{var J=w?-b:t-b,$=w?-b:l-b;return i==="pin"?$+=b:i==="arrow"&&($-=b),pe(i,J,$,b*2,b*2)}return new _e({shape:{cx:w?0:t,cy:w?0:l,r:b}})}function j(){var b=P(n);return b.style.fill=null,b.setStyle(e.getModel("outline.itemStyle").getItemStyle()),b}function H(){var b=P(p);b.setStyle(e.getModel("backgroundStyle").getItemStyle()),b.style.fill=null,b.z2=5;var w=P(p);w.setStyle(e.getModel("backgroundStyle").getItemStyle()),w.style.stroke=null;var A=new ue;return A.add(b),A.add(w),A}function G(b,w,A){var I=h?p[0]:p,E=h?x/2:p,O=f.getItemModel(b),N=O.getModel("itemStyle"),T=O.get("phase"),J=U(O.get("amplitude"),E*2),$=U(O.get("waveLength"),I*2),Y=f.get("value",b),Z=E-Y*E*2;T=A?A.shape.phase:T==="auto"?b*Math.PI/4:T;var q=N.getItemStyle();if(!q.fill){var ee=e.get("color"),ie=b%ee.length;q.fill=ee[ie]}var we=I*2,oe=new We({shape:{waveLength:$,radius:I,radiusY:E,cx:we,cy:0,waterLevel:Z,amplitude:J,phase:T,inverse:w},style:q,x:t,y:l});oe.shape._waterLevel=Z;var se=O.getModel("emphasis.itemStyle").getItemStyle();se.lineWidth=0,oe.ensureState("emphasis").style=se,Ae(oe);var ce=P(p,!0);return ce.setStyle({fill:"white"}),oe.setClipPath(ce),oe}function K(b,w,A){var I=f.getItemModel(b),E=I.get("period"),O=I.get("direction"),N=f.get("value",b),T=I.get("phase");T=A?A.shape.phase:T==="auto"?b*Math.PI/4:T;var J=function(Z){var q=f.count();return q===0?Z:Z*(.2+(q-b)/q*.8)},$=0;E==="auto"?$=J(5e3):$=typeof E=="function"?E(N,b):E;var Y=0;O==="right"||O==null?Y=Math.PI:O==="left"?Y=-Math.PI:O==="none"?Y=0:console.error("Illegal direction value for liquid fill."),O!=="none"&&I.get("waveAnimation")&&w.animate("shape",!0).when(0,{phase:T}).when($/2,{phase:Y+T}).when($,{phase:Y*2+T}).during(function(){D&&D.dirty(!0)}).start()}function V(b){var w=u.getModel("label");function A(){var q=e.getFormattedLabel(0,"normal"),ee=f.get("value",0)*100,ie=f.getName(0)||e.name;return isNaN(ee)||(ie=ee.toFixed(0)+"%"),q??ie}var I={z2:10,shape:{x:z,y:v,width:(h?p[0]:p)*2,height:(h?p[1]:p)*2},style:{fill:"transparent"},textConfig:{position:w.get("position")||"inside"},silent:!0},E={style:{text:A(),textAlign:w.get("align"),textVerticalAlign:w.get("baseline")}};Object.assign(E.style,ke(w));var O=new he(I),N=new he(I);N.disableLabelAnimation=!0,O.disableLabelAnimation=!0;var T=new ge(E),J=new ge(E);O.setTextContent(T),N.setTextContent(J);var $=w.get("insideColor");J.style.fill=$;var Y=new ue;Y.add(O),Y.add(N);var Z=P(p,!0);return D=new Ce({shape:{paths:b},x:t,y:l}),D.setClipPath(Z),N.setClipPath(D),Y}},dispose:function(){}});const Re=Q().colorLists,$e={Pie(e,a,o){let c=C(o.colorList)?Re:o.colorList,f=(a?a.filter(S=>S.value>0):[]).length==1?0:1,u=[{name:o.name?o.name:"统计",type:"pie",radius:o.radius?o.radius:["50%","64%"],center:o.center?o.center:["50%","50%"],label:{show:o.labelShow,color:"#ffffff",fontSize:s(12)},avoidLabelOverlap:!1,itemStyle:{borderRadius:1,borderColor:"#021033",borderWidth:f,color:(S,x)=>a[S.dataIndex].color?a[S.dataIndex].color:c[S.dataIndex].color},data:a}];return{animation:!1,tooltip:{backgroundColor:"rgba(0,0,0,0.5)",textStyle:{color:"#FFFFFF"},trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:u}},PieMul(e,a,o){if(o.length==0||o.length!=a.length)throw new Error("参数错误");return{animation:!1,series:o.map((f,u)=>({type:"pie",radius:f.radius?f.radius:["50%","64%"],center:f.center?f.center:["50%","50%"],label:{fontSize:s(14),show:f.labelShow,...f.labelExtension},itemStyle:{borderRadius:1,borderColor:"#021033",borderWidth:1,color:m=>f.colorList[m.dataIndex]},data:a[u]}))}}},Je=Q().colorLists,Ye={Line(e,a,o){e.extent&&e.extent;for(var c=C(e.colorList)?Je:e.colorList,d=C(e.legendArr)?[""]:e.legendArr,f=[],u=[],m=0;m<=d.length-1;m++){let n={name:d[m],type:"line",connectNulls:!0,smooth:!e.smooth,sampling:"average",large:!0,animation:!1,clip:!0,symbolSize:e.symbol?0:function(r){return r[4]&&r[4]>0?6:5},itemStyle:{color:c[m].color},label:{show:e.labelShow,position:"top",color:"#1BFFDF",fontSize:s(12),fontWeight:"bold",rich:{a:{fontSize:s(12),padding:[0,0,8,0]},b:{fontSize:s(12),padding:[0,0,8,0],color:"#FF4D4F"},c:{fontSize:s(12),padding:[0,0,8,0],color:"#DC1185"},d:{fontSize:s(12),padding:[0,0,8,0],color:"#FEC746"}}},yAxisIndex:e.y_name2&&m==1?m:0,data:[]};C(e.visualMap)&&(n.lineStyle={color:c[m].color,type:c[m].type?c[m].type:"solid"}),e.areaShow&&(n.areaStyle={color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:c[m].start},{offset:1,color:c[m].end}],global:!1}}),f.push(n)}C(e.visualMap)||(u=e.visualMap.map(n=>{let r={pieces:[],top:0,right:0,itemHeight:2,itemWidth:20,textStyle:{color:"#FFFFFF",fontSize:s(12)}};return n.pieces.forEach((y,h)=>{let i={color:y.color,label:y.label};h==0?i.lte=y.value[0]:h!=0&&h==n.pieces.length-1?i.gt=y.value[0]:(i.gt=y.value[0],i.lte=y.value[1]),r.pieces.push(i)}),r}));let p=e.allAxisShow!==!1,S=[{top:30,bottom:"0",left:"0",right:s(24),containLabel:!0}],x={show:!0,backgroundColor:"rgba(0,0,0,0.5)",textStyle:{color:"#FFFFFF"},trigger:"item",formatter:function(n){return(e.tool_name_x?e.tool_name_x:"x：")+n.value[0]+"<br />"+(e.tool_name_y?e.tool_name_y:"y：")+Math.floor(n.value[1]*100)/100+" "+(e.tool_dw?e.tool_dw:"")}},k={show:e.legendShow,data:d,align:"left",x:e.legendX?e.legendX:"right",y:"top",top:-2,icon:"roundRect",itemWidth:18,itemHeight:1,textStyle:{color:"#FFFFFF",rich:{a:{verticalAlign:"middle"}},padding:[4,0,0,0]}},L=[{type:"inside",show:!0,realtime:!0,startValue:e.zoomStart?e.zoomStart:0,endValue:e.zoomEnd?e.zoomEnd:1e3}],_={type:"category",boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:"#6f8dcb",fontSize:s(12)},show:!0},splitLine:{show:!1,lineStyle:{color:"#6f8dcb"}},axisLabel:{color:"#6f8dcb",show:!0,fontSize:s(12),formatter:function(n){return n.replace(" ",`
`)}},z:10},F=e.yAxisShow!==!1,t=[{name:e.y_name,type:"value",min:e.min==0||e.min?e.min:n=>n.min<0?Math.floor(n.min*1.1):0,max:e.max==0||e.max?e.max:n=>{const r=Math.abs(n.max)*.1;return Math.ceil(n.max+r)},axisTick:{show:!1},axisLine:{show:F,lineStyle:{color:"#6f8dcb"}},splitLine:{show:!F,lineStyle:{color:"#939393"}},axisLabel:{color:"#6f8dcb",fontSize:s(12),formatter:"{value}"}}];if(e.y_name2){let n={name:e.y_name2,type:"value",min:e.min2==0||e.min2?e.min2:r=>r.min<0?Math.floor(r.min*1.1):0,max:e.max2==0||e.max2?e.max2:r=>{const y=Math.abs(r.max)*.1;return Math.ceil(r.max+y)},axisTick:{show:!1},axisLine:{show:F,lineStyle:{color:"#6f8dcb"}},splitLine:{show:!F,lineStyle:{color:"#939393"}},axisLabel:{color:"#6f8dcb",fontSize:s(12),formatter:"{value}"}};t.push(n)}return p||(_.axisLabel.formatter=()=>"",t.forEach(n=>{n.show=!1})),{grid:S,tooltip:x,legend:k,dataZoom:L,visualMap:u,xAxis:_,yAxis:t,series:f}}},ne=Q().colorLists,Ve={Bar(e,a,o){var c=e.extent?e.extent:4;C(e.colorList)||e.colorList;for(var d=C(e.legendArr)?[""]:e.legendArr,f=[],u=0;u<=d.length-1;u++){let F={name:"",type:"pictorialBar",symbol:"circle",animation:!1,symbolSize:[s(30),s(10)],symbolOffset:[0,s(-4)],symbolPosition:"end",z:3,color:new R(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}]),silent:!1,barMinHeight:5,data:[]},t={name:d[u],type:"bar",barWidth:s(30),connectNulls:!0,smooth:!0,sampling:"average",large:!0,animation:!1,clip:!0,itemStyle:{borderRadius:[3,3,0,0],color:new R(0,0,0,1,[{offset:0,color:"#83bff6"},{offset:.5,color:"#188df0"},{offset:1,color:"#188df0"}])},emphasis:{itemStyle:{color:new R(0,0,0,1,[{offset:0,color:"#2378f7"},{offset:.7,color:"#2378f7"},{offset:1,color:"#83bff6"}])}},label:{show:e.labelShow,position:"top",color:"#1BFFDF",fontSize:s(12),fontWeight:"bold",rich:{a:{fontSize:s(12),padding:[0,0,8,0]},b:{fontSize:s(12),padding:[0,0,8,0],color:"#FF4D4F"},c:{fontSize:s(12),padding:[0,0,8,0],color:"#DC1185"},d:{fontSize:s(12),padding:[0,0,8,0],color:"#FEC746"}},formatter:function(n){if(n.value[2]=="isAlarm")return`${n.value[4]}`;if(n.value[2]=="offline")return n.value[1]==0?"在线":n.value[1]==1?"{c|离线}":"{d|故障}";if(n.value[3]==0)return Math.floor(n.value[1]*100)/100;if(n.value[3]==1)return`{b|${Math.floor(n.value[1]*100)/100}}`}},yAxisIndex:0,data:[]},l=u==0?F:t;f.push(l)}let m=[{top:30,left:"0%",bottom:"0%",right:"0%",containLabel:!0}],p={show:!0,backgroundColor:"rgba(0,0,0,0.5)",textStyle:{color:"#FFFFFF"},trigger:"item",formatter:function(F){return(e.tool_name_x?e.tool_name_x:"x：")+F.value[0]+"<br />"+(e.tool_name_y?e.tool_name_y:"y：")+Math.floor(F.value[1]*100)/100+" "+(e.tool_dw?e.tool_dw:"")}},S={show:e.legendShow,data:d,align:"left",x:"right",y:"top",top:-2,icon:"roundRect",itemWidth:18,itemHeight:12,textStyle:{color:"#FFFFFF",rich:{a:{verticalAlign:"middle"}},padding:[4,0,0,0]}},x=[{type:"inside",show:!0,realtime:!0,startValue:e.zoomStart?e.zoomStart:0,endValue:e.zoomEnd?e.zoomEnd:1e3}],k={type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:"#6f8dcb",fontSize:s(12),type:"dashed"}},splitLine:{show:!1,lineStyle:{color:"#6f8dcb",type:"dashed"}},axisLabel:{color:"#0065FF",show:!0,fontSize:s(12),formatter:function(F){return F.replace(" ",`
`)}},z:10},L=[{name:e.y_name,type:"value",min:e.min==0||e.min?e.min:F=>-(Math.round(F.max*10)/10)+Math.round(F.max*10)/10/c,max:e.max==0||e.max?e.max:F=>Math.round(F.max*10)/10+Math.round(F.max*10)/10/c,axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"#6f8dcb",type:"dashed"}},splitLine:{show:!1,lineStyle:{color:"#6f8dcb",type:"dashed"}},axisLabel:{color:"#0065FF",fontSize:s(12),formatter:"{value}"}}];return{grid:m,tooltip:p,legend:S,dataZoom:x,xAxis:k,yAxis:L,series:f}},Bars(e,a,o){var c=e.extent?e.extent:4;C(e.colorList)||e.colorList;for(var d=C(e.legendArr)?[""]:e.legendArr,f=[],u=0;u<=e.legendArr.length-1;u++){let t={name:e.legendArr[u],type:"bar",barWidth:s(10),connectNulls:!0,smooth:!0,sampling:"average",large:!0,animation:!1,clip:!0,label:{show:e.labelShow,position:"top",color:"#1BFFDF",fontSize:s(12),fontWeight:"bold",rich:{a:{fontSize:s(12),padding:[0,0,8,0]},b:{fontSize:s(12),padding:[0,0,8,0],color:"#FF4D4F"},c:{fontSize:s(12),padding:[0,0,8,0],color:"#DC1185"},d:{fontSize:s(12),padding:[0,0,8,0],color:"#FEC746"}},formatter:function(l){if(l.value[2]=="isAlarm")return`${l.value[4]}`;if(l.value[2]=="offline")return l.value[1]==0?"在线":l.value[1]==1?"{c|离线}":"{d|故障}";if(l.value[3]==0)return Math.floor(l.value[1]*100)/100;if(l.value[3]==1)return`{b|${Math.floor(l.value[1]*100)/100}}`}},itemStyle:{borderRadius:[0,0,0,0],color:u==0?new R(0,0,0,1,[{offset:0,color:"rgba(96, 231, 255, 1)"},{offset:.5,color:"rgba(96, 231, 255, 0.5)"},{offset:1,color:"rgba(96, 231, 255, 0)"}]):new R(0,0,0,1,[{offset:0,color:"rgba(255, 200, 95, 1)"},{offset:.5,color:"rgba(255, 200, 95, 0.5)"},{offset:1,color:"rgba(255, 200, 95, 0)"}])},emphasis:{itemStyle:{color:u==0?new R(0,0,0,1,[{offset:0,color:"rgba(96, 231, 255, 1)"},{offset:.5,color:"rgba(96, 231, 255, 0.5)"},{offset:1,color:"rgba(96, 231, 255, 0)"}]):new R(0,0,0,1,[{offset:0,color:"rgba(255, 200, 95, 1)"},{offset:.5,color:"rgba(255, 200, 95, 0.5)"},{offset:1,color:"rgba(255, 200, 95, 0)"}])}},yAxisIndex:0,data:[]};f.push(t)}for(var u=0;u<=e.legendArr.length-1;u++){let l={name:"",type:"pictorialBar",symbol:"circle",animation:!1,symbolSize:[s(10),s(10)],symbolOffset:[e.legendArr.length==1?0:u==0?s(-6):s(6),s(-4)],symbolPosition:"end",z:3,color:new R(0,0,0,1,[{offset:0,color:"#DCF3FF"},{offset:.5,color:"#DCF3FF"},{offset:1,color:"#DCF3FF"}]),silent:!1,barMinHeight:5,data:[],itemStyle:{shadowBlur:6,shadowColor:"rgba(255, 255, 255, 0.5)"}};f.push(l)}let m=[{top:30,left:"0%",bottom:"0%",right:"0%",containLabel:!0}],p={show:!0,backgroundColor:"rgba(0,0,0,0.5)",textStyle:{color:"#FFFFFF"},trigger:"item",formatter:function(t){return(e.tool_name_x?e.tool_name_x:"x：")+t.value[0]+"<br />"+(e.tool_name_y?e.tool_name_y:"y：")+Math.floor(t.value[1]*100)/100+" "+(e.tool_dw?e.tool_dw:"")}},S={show:e.legendShow,data:d,align:"left",x:"right",y:"top",top:-2,icon:"roundRect",itemWidth:18,itemHeight:12,textStyle:{color:"#FFFFFF",rich:{a:{verticalAlign:"middle"}},padding:[4,0,0,0]}},x=[{type:"inside",show:!0,realtime:!0,startValue:e.zoomStart?e.zoomStart:0,endValue:e.zoomEnd?e.zoomEnd:1e3}],k={type:"category",axisTick:{show:!1},axisLine:{lineStyle:{color:"#6f8dcb",fontSize:s(12)}},splitLine:{show:!1,lineStyle:{color:"#6f8dcb"}},axisLabel:{color:"#6f8dcb",show:!0,fontSize:s(12),formatter:function(t){return t.replace(" ",`
`)}},z:10},L=e.yAxisShow!==!1,_=[{name:e.y_name,type:"value",min:e.min==0||e.min?e.min:t=>Math.floor(-(Math.round(t.max*10)/10)-Math.round(t.max*10)/10/c),max:e.max==0||e.max?e.max:t=>Math.floor(Math.round(t.max*10)/10+Math.round(t.max*10)/10/c),axisTick:{show:!1},axisLine:{show:L,lineStyle:{color:"#6f8dcb"}},splitLine:{show:!L,lineStyle:{color:"#939393"}},axisLabel:{color:"#6f8dcb",fontSize:s(12),formatter:"{value}"}}];return{grid:m,tooltip:p,legend:S,dataZoom:x,xAxis:k,yAxis:_,series:f}},Barsx(e,a,o){var c=e.extent?e.extent:4;C(e.colorList)||e.colorList;for(var d=C(e.legendArr)?[""]:e.legendArr,f=[],u=0;u<=e.legendArr.length-1;u++){let l={name:e.legendArr[u],type:"bar",barWidth:s(10),connectNulls:!0,sampling:"average",large:!0,animation:!1,clip:!0,label:{show:e.labelShow,position:"right",color:"#666666",fontSize:s(12),fontWeight:"bold",rich:{a:{fontSize:s(12),padding:[0,0,8,0]},b:{fontSize:s(12),padding:[0,0,8,0],color:"#FF4D4F"},c:{fontSize:s(12),padding:[0,0,8,0],color:"#DC1185"},d:{fontSize:s(12),padding:[0,0,8,0],color:"#FEC746"}}},itemStyle:{borderRadius:[0,2,2,0],color:u==0?new R(1,0,0,0,[{offset:0,color:"#de868f"},{offset:1,color:"#deb1bb"}]):u==1?new R(1,0,0,0,[{offset:0,color:"#3362f6"},{offset:1,color:"#4a7bea"}]):new R(1,0,0,0,[{offset:0,color:"#76fafe"},{offset:1,color:"#93b6fe"}])},emphasis:{itemStyle:{color:u==0?new R(1,0,0,0,[{offset:0,color:"#de868f"},{offset:1,color:"#dec1b5"}]):u==1?new R(1,0,0,0,[{offset:0,color:"#3362f6"},{offset:1,color:"#4a82eb"}]):new R(1,0,0,0,[{offset:0,color:"#76fafe"},{offset:1,color:"#94b7ff"}])}},data:[]};f.push(l)}for(var u=0;u<=e.legendArr.length-1;u++){let n={name:"",type:"pictorialBar",symbol:"circle",animation:!1,symbolSize:[s(10),s(10)],symbolOffset:[e.legendArr.length==1?0:u==0?s(-6):s(6),0],symbolPosition:"end",z:3,color:u==0?"#de868f":u==1?"#3362f6":"#76fafe",silent:!1,barMinHeight:5,data:[],itemStyle:{shadowBlur:4,shadowColor:u==0?"rgba(222, 134, 143, 0.3)":u==1?"rgba(51, 98, 246, 0.3)":"rgba(118, 250, 254, 0.3)"}};f.push(n)}let m=[{top:s(40),left:s(5),bottom:s(10),right:s(5),containLabel:!0}],p={show:!0,backgroundColor:"rgba(255,255,255,0.95)",textStyle:{color:"#333333"},trigger:"axis",axisPointer:{type:"shadow"},formatter:function(l){let n=`<div style="font-weight: bold; margin-bottom: 8px; color: #333;">${l[0].value[1]}</div>`;return l.forEach(r=>{n+=`
					<div style="display: flex; align-items: center; margin: 4px 0;">
						<span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; background: ${r.color}; margin-right: 8px;"></span>
						<span style="flex: 1; color: #666;">${r.seriesName}:</span>
						<span style="font-weight: bold; color: #333; margin-left: 8px;">${Math.floor(r.value[0]*100)/100} ${e.tool_dw?e.tool_dw:""}</span>
					</div>
				`}),n}},S={show:e.legendShow,data:d,align:"left",x:"right",y:"top",top:-2,icon:"roundRect",itemWidth:18,itemHeight:12,textStyle:{color:"#666666",rich:{a:{verticalAlign:"middle"}},padding:[4,0,0,0]}},x=[{type:"inside",show:!0,realtime:!0,startValue:e.zoomStart?e.zoomStart:0,endValue:e.zoomEnd?e.zoomEnd:1e3}],k=e.xAxisShow!==!1,L=[{name:e.y_name,nameTextStyle:{color:"#666666",fontSize:s(12)},type:"value",min:e.min==0||e.min?e.min:0,max:e.max==0||e.max?e.max:l=>Math.ceil(Math.round(l.max*10)/10+Math.round(l.max*10)/10/c),axisTick:{show:!1},axisLine:{show:k,lineStyle:{color:"#E8E8E8"}},splitLine:{show:!0,lineStyle:{color:"#F0F0F0",type:"dashed"}},axisLabel:{color:"#666666",fontSize:s(12),formatter:"{value}"}}],_=e.yAxisShow!==!1,F={type:"category",axisTick:{show:!1},axisLine:{show:_,lineStyle:{color:"#E8E8E8"}},splitLine:{show:!1,lineStyle:{color:"#E8E8E8"}},axisLabel:{color:"#333333",show:!0,fontSize:s(12),margin:s(8)},z:10};return{grid:m,tooltip:p,legend:S,dataZoom:x,xAxis:L,yAxis:F,series:f}},Bar3d(e,a,o){let c=[{color:"#006E03"},{color:"#A0FF00"},{color:"#FF0000"},{color:"#64C814"},{color:"#F0F008"},{color:"#960000"},{color:"#e0f3f8"},{color:"#ffffbf"},{color:"#fee090"}],d=C(o.colorList)?c:o.colorList;var f=[];let u=4,m=Number(e.max),p=Number(e.min),S=e.tool_dw?e.tool_dw:"",x=e.p,k=[],L=(Math.abs(m)+Math.abs(p))/5,_="",F={};var t=[];let l=[];if(p<0){let M=(m-p)*.2;for(let W=0;W<=5;W++)l.push(p+M*W);m<0&&(L=M)}for(var n=0;n<2;n++){let M={type:"bar3D",data:[],symbolSize:1,barSize:.3,shading:"lambert",sampling:"average",large:!0,showSymbol:!1,animation:!1,label:{fontSize:12,borderWidth:1},emphasis:{label:{show:!1}}};t.push(M)}for(var r=0;r<3;r++)_=r==2?Math.floor((r*L+p)*100)/100+S+"以上":Math.floor((r*L+p)*100)/100+"~"+Math.floor(((r+1)*L+p)*100)/100+(e.tool_dw?e.tool_dw:""),p<0?F={min:r*L,max:r==2?m-p:(r+1)*L,label:_}:F={min:r*L+p,max:r==2?m:(r+1)*L+p,label:_},k.push(F),f.push(d[r].color);let y={show:!0,backgroundColor:"rgba(0,0,0,0.5)",textStyle:{color:"#FFFFFF"},formatter:function(M){return(e.tool_name_x?e.tool_name_x:"x：")+M.value[0]+"<br />"+(e.tool_name_y?e.tool_name_y:"y：")+M.value[1]+"°<br />"+(e.tool_name_z?e.tool_name_z:"z：")+Math.floor((p<0?M.value[2]+p:M.value[2])*100)/100+" "+S}},h={show:!0,type:"piecewise",selectedMode:"multiple",splitNumber:6,max:m,itemGap:0,itemWidth:14,itemHeight:20,top:"top",symbol:"rect",inRange:{symbol:"rect",color:f},outOfRange:{symbol:"rect"},textStyle:{color:"#2773E6",fontSize:12},pieces:k},i={name:e.x_name?e.x_name:"",type:"value",nameGap:30,min:0,max:x,interval:x/u,splitLine:{show:!0,interval:"auto",lineStyle:{color:"#2773E6",opacity:1,width:1}},axisLabel:{show:!0,color:"#0065FF"}},g={name:e.y_name?e.y_name:"",type:"value",nameGap:30,min:0,max:360,interval:360/u,splitLine:{show:!0,interval:"auto",lineStyle:{color:"#2773E6",opacity:1,width:1}},axisLabel:{show:!0,color:"#0065FF",fontSize:12,formatter:function(M){return M+"°"}}},z={name:e.z_name?e.z_name:"",type:"value",nameGap:40,min:p<0?0:p,max:p<0?m-p:m,interval:(m-p)/5,splitLine:{show:!0,lineStyle:{color:"#2773E6",opacity:1,width:1}},axisLabel:{show:!0,color:"#0065FF",fontSize:12,interval:(Math.abs(m)+Math.abs(p))/2-1,formatter:function(M,W){if(p<0){var P=[];return P.push(l[W]+S),P}else return M+S}}};return{animation:!1,top:"top",tooltip:y,visualMap:h,xAxis3D:i,yAxis3D:g,zAxis3D:z,grid3D:{show:!0,top:-30,boxWidth:90,boxHeight:90,boxDepth:90,viewControl:{alpha:0,beta:90,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,autoRotate:!1},axisLine:{show:!0,interval:1,lineStyle:{color:"#2773E6",opacity:.1,width:1}},axisTick:{show:!1},axisPointer:{show:!1,lineStyle:{color:"rgba(39, 115, 230, 1)",opacity:1,width:1},label:{show:!0,formatter:function(M,W){return""},margin:"auto",color:"#fff",borderWidth:0,borderColor:"#fff",fontFamily:"sans-serif",fontSize:12,fontWeight:"normal"}},environment:"auto",light:{main:{intensity:1.2,shadow:!0},ambient:{intensity:.3}}},series:t}}},Ge=Q().colorLists,He={Scatter(e,a,o){for(var c=e.extent?e.extent:4,d=C(e.colorList)?Ge:e.colorList,f=C(e.legendArr)?[""]:e.legendArr,u=[],m=0;m<=f.length-1;m++){let t={name:f[m],type:"scatter",symbolSize:2,showSymbol:!1,connectNulls:!0,smooth:!0,sampling:"average",large:!0,animation:!1,clip:!0,lineStyle:{color:d[m].color},itemStyle:{color:d[m].color},label:{show:e.labelShow,position:"top",color:"#1BFFDF",fontSize:s(12),fontWeight:"bold",rich:{a:{fontSize:s(12),padding:[0,0,8,0]},b:{fontSize:s(12),padding:[0,0,8,0],color:"#FF4D4F"},c:{fontSize:s(12),padding:[0,0,8,0],color:"#DC1185"},d:{fontSize:s(12),padding:[0,0,8,0],color:"#FEC746"}},formatter:function(l){if(l.value[2]=="isAlarm")return`${l.value[4]}`;if(l.value[2]=="offline")return l.value[1]==0?"在线":l.value[1]==1?"{c|离线}":"{d|故障}";if(l.value[3]==0)return Math.floor(l.value[1]*100)/100;if(l.value[3]==1)return`{b|${Math.floor(l.value[1]*100)/100}}`}},yAxisIndex:0,data:[]};e.areaShow&&(t.areaStyle={color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:d[m].start},{offset:1,color:d[m].end}],global:!1}}),u.push(t)}let p=[{top:30,bottom:"0",left:"0",right:s(16),containLabel:!0}],S={show:!0,backgroundColor:"rgba(0,0,0,0.5)",textStyle:{color:"#FFFFFF"},trigger:"item",formatter:function(t){return(e.tool_name_x?e.tool_name_x:"x：")+t.value[0]+"<br />"+(e.tool_name_y?e.tool_name_y:"y：")+Math.floor(t.value[1]*100)/100+" "+(e.tool_dw?e.tool_dw:"")}},x={show:e.legendShow,data:f,align:"left",x:"right",y:"top",top:-2,icon:"circle",itemWidth:8,itemHeight:8,textStyle:{color:"#FFFFFF",rich:{a:{verticalAlign:"middle"}},padding:[4,0,0,0]}},k=[{type:"inside",show:!0,realtime:!0,startValue:e.zoomStart?e.zoomStart:0,endValue:e.zoomEnd?e.zoomEnd:1e3}],L={type:"category",boundaryGap:!1,axisTick:{show:!1},axisLine:{lineStyle:{color:"#113D72",fontSize:s(12),type:"dashed"}},splitLine:{show:!1,lineStyle:{color:"#113D72",type:"dashed"}},axisLabel:{color:"#0065FF",show:!0,fontSize:s(12),formatter:function(t){return t.replace(" ",`
`)}},z:10},_=[{name:e.y_name,type:"value",min:e.min==0||e.min?e.min:t=>-(Math.round(t.max*10)/10)+Math.round(t.max*10)/10/c,max:e.max==0||e.max?e.max:t=>Math.round(t.max*10)/10+Math.round(t.max*10)/10/c,axisTick:{show:!1},axisLine:{show:!0,lineStyle:{color:"#113D72",type:"dashed"}},splitLine:{show:!1,lineStyle:{color:"#113D72",type:"dashed"}},axisLabel:{color:"#0065FF",fontSize:s(12),formatter:"{value}"}}];return{grid:p,tooltip:S,legend:x,dataZoom:k,xAxis:L,yAxis:_,series:u}}};async function ve(e){let a=[];if(e&&e.features){let o=e.features[0].properties;if(o){let c=o.acroutes;if(c){if(c.length==1&&(a=[]),c.length==2){let d=await re.get(`./china/${c[0]}.json`);if(!d)return console.log("adcode 地图缺少");let f=d.data.features.find(u=>u.properties.adcode==c[1]);f&&a.push({adcode:c[1],name:f.properties.name})}if(c.length==3){let d=await re.get(`./china/${c[0]}.json`);if(!d)return console.log("adcode 地图缺少");let f=d.data.features.find(p=>p.properties.adcode==c[1]);f&&a.push({adcode:c[1],name:f.properties.name});let u=await re.get(`./china/${c[1]}.json`);if(!u)return console.log("adcode 地图缺少");let m=u.data.features.find(p=>p.properties.adcode==c[2]);m&&a.push({adcode:c[2],name:m.properties.name})}JSON.stringify(X().adcodes)!=JSON.stringify(a)&&(X().adcodes=a)}else console.log("acroutes 缺少")}else console.log("properties 缺少")}else console.log("thisMap 或 thisMap.features 缺少")}function xe(e,a){let o=X().adcodes,c=[],d=[{name:"",value:[0,0,0]}],f=0;return e.features.forEach(u=>{let m={level:u.properties.level,adcode:u.properties.adcode,name:u.properties.name,value:u.properties.center?[...u.properties.center,0]:u.properties.center,value2:0,value3:0};if(c.push(m),!C(a)){let S=[];if(o.length==0&&(S=a.filter(x=>x.aera[0]===u.properties.adcode)),o.length==1&&(S=a.filter(x=>x.aera[1]===u.properties.adcode)),o.length==2&&(S=a.filter(x=>x.aera[2]===u.properties.adcode)),!C(S)){var p=u.properties.center;p&&(S.forEach(x=>m.value[2]+=x.value),f<m.value[2]&&(f=Math.floor(m.value[2]*100)/100),d.push(m))}}}),{mapData:c,mapMark:d,max:f}}const Se=Q().colorLists,Ze={async Map(e,a,o=""){C(o.colorList)||o.colorList;let c="./china/"+X().adcode+".json",d="";return new Promise((f,u)=>{re.get(c).then(async m=>{console.log("更新地图--thisMap",m),m=m.data,ye(d,m),await ve(m);let p=xe(m,a),S=[{show:!0,backgroundColor:"none",borderWidth:0,padding:0,formatter:function(y,h){if(!C(y.data))return"<div class='custom-tooltip-box'><span style='color:#1BFFDF'>"+y.name+"</span><br /><div style='display:flex;align-items: center;margin-top: 5px;'><span class='bg-img'></span>组织："+y.data.value2+"</div><div style='display:flex;align-items: center;margin-top: 5px'><span class='bg-img'></span>公司："+y.data.value3+"</div></div>"}}],x={zoom:X().provinceId==""?1.2:1,top:X().provinceId==""?"15%":"10%",map:d,roam:!0,scaleLimit:{min:.5,max:10},left:"center",regions:[{name:"南海诸岛",itemStyle:{opacity:0},label:{show:!1}}]},k={z:1,itemStyle:{areaColor:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#223857"},{offset:1,color:"#223857"}],globalCoord:!1},shadowColor:"#0f0d16",shadowOffsetX:0,shadowOffsetY:10,color:"#FFFFFF",borderColor:"#83e8f3",borderWidth:2,shadowBlur:6}},L={z:2,itemStyle:{areaColor:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#223857"},{offset:1,color:"#223857"}],globalCoord:!1},shadowColor:"#3b90e1",shadowOffsetX:0,shadowOffsetY:6}},_={z:3,itemStyle:{areaColor:{type:"image",image:"./china/bg.png",repeat:"repeat"},color:"#FFFFFF",borderColor:"#5a89af",borderWidth:1,shadowColor:"rgba(0, 0, 0, 0.15)",shadowOffsetX:0,shadowOffsetY:4},emphasis:{show:!0,itemStyle:{borderColor:"rgba(0, 135, 255, 0.8)",borderWidth:1,borderType:"solid",color:"#ffffff",areaColor:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"#00D9C6"},{offset:1,color:"#0087FF"}],globalCoord:!1}}},label:{show:!0,fontSize:"10px",color:"#FFFFFF"}},F=[Object.assign({},x,k),Object.assign({},x,L),Object.assign({},x,_)],t=Object.assign({},x,{type:"map",geoIndex:2,animation:!1,data:p.mapData}),l={data:p.mapMark,silent:!0,type:"custom",coordinateSystem:"geo",label:{show:!0,fontSize:8,color:"#FFFFFF",formatter(y){return y.data.value[2]}},showEffectOn:"render",rippleEffect:{brushType:"stroke"},emphasis:{scale:!0},zlevel:4,renderItem(y,h){const i=h.coord([h.value(0,y.dataIndex),h.value(1,y.dataIndex)]),g=[];for(let z=0;z<5;z++)g.push({type:"circle",shape:{cx:0,cy:0,r:12},style:{stroke:"#409eff",fill:"none",lineWidth:2},keyframeAnimation:{duration:4e3,loop:!0,delay:-z/4*4e3,keyframes:[{percent:0,scaleX:0,scaleY:0,style:{opacity:1}},{percent:1,scaleX:1,scaleY:.4,style:{opacity:0}}]}});return{type:"group",x:i[0],y:i[1],z:-1,children:[...g,{type:"path",style:{fill:"#409eff"},shape:{x:-10,y:-25,width:20,height:20,d:"M16 0c-5.523 0-10 4.477-10 10 0 10 10 22 10 22s10-12 10-22c0-5.523-4.477-10-10-10zM16 16c-3.314 0-6-2.686-6-6s2.686-6 6-6 6 2.686 6 6-2.686 6-6 6z"},keyframeAnimation:{duration:1e3,loop:!0,delay:Math.random()*1e3,keyframes:[{y:-5,percent:.5,easing:"cubicOut"},{y:0,percent:1,easing:"bounceOut"}]}}]}}};f({tooltip:S,geo:F,series:[t,l]})}).catch(m=>{console.log("找不到地图json---",m),u(m)})})},async Map3D(e,a,o=""){C(o.colorList)||o.colorList;let c="./china/"+X().adcode+".json",d="";return new Promise((f,u)=>{re.get(c).then(async m=>{console.log("更新地图--thisMap",m),m=m.data,ye(d,m),await ve(m);let p=xe(m,a),S=[{show:!0,backgroundColor:"none",borderWidth:0,padding:0,formatter:function(v,D){if(!C(v.data))return"<div class='custom-tooltip-box'><span style='color:#1BFFDF'>"+v.name+"</span><br /><div style='display:flex;align-items: center;margin-top: 5px;'><span class='bg-img'></span>组织："+v.data.value2+"</div><div style='display:flex;align-items: center;margin-top: 5px'><span class='bg-img'></span>公司："+v.data.value3+"</div></div>"}}],x=0,k=p.max,L=(Math.abs(k)+Math.abs(x))/4,_="",F={},t=[],l=[],n=["#87aa66","#eba438","#d94d4c"];for(var r=0;r<3;r++)_=r==2?Math.floor((r*L+x)*100)/100+"以上":Math.floor((r*L+x)*100)/100+"~"+Math.floor(((r+1)*L+x)*100)/100,F={min:r*L+x,max:r==2?k:(r+1)*L+x,label:_},t.push(F),l.push(n[r]);let y=[{show:!1},{show:!0,max:k,pieces:t,type:"piecewise",selectedMode:"multiple",splitNumber:6,itemGap:0,itemWidth:s(14),itemHeight:s(20),top:"top",symbol:"rect",inRange:{symbol:"rect",color:l},outOfRange:{symbol:"rect"},textStyle:{color:"#2773E6",fontSize:s(12)}}],h={show:!0,map:d,left:"center",roam:!0,zoom:2,regionHeight:s(5),animation:!0,shading:"realistic",label:{show:!0,fontSize:s(12),color:"#f5f5f5",formatter:function({name:v}){return`${v} `}},itemStyle:{color:"#0a599f",opacity:1,borderWidth:s(2),borderColor:"#b3f8ff"},emphasis:{show:!0,label:{show:!0,fontSize:s(12),color:"#2773E6"},itemStyle:{color:"#b3f8ff",opacity:1}},light:{main:{color:"#ffffff",intensity:2,shadow:!0,shadowQuality:"light",alpha:50,beta:10},ambient:{color:"#ffffff",intensity:.1}},regions:[],viewControl:{projection:"perspective",distance:100,alpha:65,beta:0,minDistance:40,maxDistance:400,minAlpha:0,maxAlpha:90,minBeta:-1036800,maxBeta:1036800,animation:!1,animationDurationUpdate:1e3,animationEasingUpdate:"cubicInOut",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",center:[0,0,0]}},i={type:"bar3D",coordinateSystem:"geo3D",regionHeight:s(1e3),name:d,animation:!1,geo3DIndex:0,barSize:s(3),bevelSize:.2,zlevel:1,opacity:1,shading:"lambert",label:{show:!0,rich:{a:{fontSize:s(12),padding:[0,0,0,0],color:"#1BFFDF",fontWeight:"bold"},b:{fontSize:s(12),padding:[0,0,0,0],color:"#1BFFDF",fontWeight:"bold"},c:{fontSize:s(12),padding:[6,6,6,6],color:"#b3f8ff",fontWeight:"bold",borderWidth:s(1),borderColor:"#b3f8ff",borderRadius:[2,2,2,2],backgroundColor:"rgba(45, 35, 240, 0.3)"}},formatter:function(v){return v.data&&v.data.name&&v.data.value?`{c|${v.data.name.substring(0,2)} / ${v.data.value[2]}}`:" "}},data:p.mapMark},g=[Object.assign({},h,{type:"map3D",zlevel:-1,data:p.mapData,itemStyle:{}}),i];f({animation:!0,tooltip:S,visualMap:y,geo3D:h,series:g})}).catch(m=>{console.log("找不到地图json---",m),u(m)})})}},qe=Q().colorLists,Ue={Gauge(e,a,o){let c=C(o.colorList)?qe:o.colorList,d=o.colors?le(o.colors)?o.colors:[o.colors,o.colors]:[c[0].color,c[0].color];return{animation:!1,series:[{name:"",type:"gauge",startAngle:o.startAngle?o.startAngle:220,endAngle:o.endAngle?o.endAngle:320,center:["50%","50%"],radius:o.radius?o.radius:"100%",min:o.min?o.min:0,max:o.max?o.max:20,splitNumber:o.splitNumber?o.splitNumber:4,pointer:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},axisTick:{show:!0,length:s(o.length?o.length:12),lineStyle:{color:"auto",width:s(o.width?o.width:3)}},axisLine:{show:!1,lineStyle:{width:0,color:e.data==0?[[1,"#263765"]]:[[e.data,new R(0,0,1,0,[{offset:0,color:d[0]},{offset:1,color:d[1]}])],[1,"#263765"]]}},title:{fontSize:s(12),offsetCenter:o.offsetTitle?o.offsetTitle:[0,"80%"],color:o.color?o.color:"#B1C9F1"},detail:{fontSize:s(20),offsetCenter:o.offsetDetail?o.offsetDetail:[0,"0%"],color:o.color?o.color:"#FFFFFF",valueAnimation:!0,fontWeight:"normal"},data:a}]}}},Xe=Q().colorLists,Qe={Radar(e,a,o){C(o.colorList)||o.colorList;let c={indicator:o.indicator,center:["50%","44%"],radius:"52%",splitNumber:3,min:0,max:100,axisName:{fontSize:s(10),color:"#fff",borderRadius:3,padding:[-5,-5]},axisLine:{lineStyle:{color:"#fff",type:"solid"}},splitLine:{lineStyle:{color:"#fff"}},splitArea:{show:!1,areaStyle:{color:"rgba(255,0,0,0)"}}},d=[{name:"Budget vs spending",type:"radar",symbolSize:2,symbolColor:"#00B578",lineStyle:{color:"#00B578"},areaStyle:{color:new R(0,0,0,1,[{offset:0,color:"rgba(0,181,120,.3)"},{offset:1,color:"rgba(71,237,252,.8)"}])},data:a}];return{radar:c,series:d}}},Ke=Q().colorLists,je={Laser(e,a,o){C(o.colorList)||o.colorList;let c=[];for(var d=0;d<=e.legendArr.length-1;d++)c.push({name:e.legendArr[d],max:e.max});let f={indicator:c,center:["50%","50%"],radius:"70%",splitNumber:5,name:{fontSize:s(12),color:"#2C5493",borderRadius:3,padding:[-6,-6]},axisLine:{lineStyle:{color:"#2C5493",type:"solid"}},splitLine:{lineStyle:{color:"#2C5493"}},splitArea:{show:!0,areaStyle:{color:["rgba(0, 0, 0, 0)","rgba(5, 32, 74, 0.9)"]}}},u=[{name:o.name?o.name:"统计",type:"radar",symbolSize:2,symbolColor:"#4ebfdb",areaStyle:{color:new R(0,0,0,1,[{offset:0,color:"rgba(0,181,120,.3)"},{offset:1,color:"rgba(71,237,252,.8)"}])},lineStyle:{color:"#4ebfdb"},label:{show:C(e.labelShow)?!1:e.labelShow,fontSize:s(10),color:"#60E7FF"},data:a}];return{animation:!1,radar:f,series:u}}},eo=Q().colorLists,oo={Liquidfill(e,a,o){return C(o.colorList)||o.colorList,{animation:!1,series:[{type:"liquidFill",name:"Liquid Fill",radius:"96%",center:["50%","50%"],amplitude:4,data:[{name:"score",direction:"right",value:a.value,itemStyle:{color:new R(0,0,0,1,[{offset:0,color:a.status==1?"#B1C9F1":a.status==2?"#F98994":"#fcf6c2"},{offset:1,color:a.status==1?"#4187FF":a.status==2?"#DC1185":"#FEC746"}])}}],backgroundStyle:{borderWidth:2,borderColor:a.status==1?"#4187FF":a.status==2?"#DC1185":"#FEC746",color:"#FFFFFF"},label:{show:!!o.labelShow,fontSize:s(22),insideColor:"#fff",color:a.status==1?"#4187FF":a.status==2?"#DC1185":"#FEC746",nomal:{formatter:function(f){return f.value*100}}},outline:{show:!1}}]}}},te=async(e,a,o,c,d)=>{let f;switch(!0){case e.indexOf("Pie")!==-1:f=$e[e](o,c,d);break;case e.indexOf("Line")!==-1:f=Ye[e](o,c,d);break;case e.indexOf("Bar")!==-1:f=Ve[e](o,c,d);break;case e.indexOf("Scatter")!==-1:f=He[e](o,c,d);break;case e.indexOf("Map")!==-1:f=Ze[e](o,c,d);break;case e.indexOf("Gauge")!==-1:f=Ue[e](o,c,d);break;case e.indexOf("Radar")!==-1:f=Qe[e](o,c,d);break;case e.indexOf("Laser")!==-1:f=je[e](o,c,d);break;case e.indexOf("Liquidfill")!==-1:f=oo[e](o,c,d);break;default:console.log("echart失败---"),f={}}return f};function io(){let e;const a=(t,l,n,r,y)=>{B().chartArr.findIndex(i=>i.id==l)==-1?(console.log(l+"首次"),o(t,l,n,r,y)):c(t,l,n,r,y)},o=async(t,l,n,r,y)=>{let h,i,g=document.getElementById(l);if(!g)return!1;h=Ee(g),i=await te(t,l,n,r,y);let z={type:t,id:l,attr:JSON.parse(JSON.stringify(n)),data:le(r)?[...r]:JSON.parse(JSON.stringify(r)),pramas:JSON.parse(JSON.stringify(y)),myChart:h,option:i};B().chartArr.push(z),h.setOption(i),u(t,l,n,r),C(n)||d(z,r,!0)},c=async(t,l,n,r,y)=>{let h,i,g=B().chartArr.find(z=>z.id==l);h=g.myChart,!C(n)&&JSON.stringify(g.attr)!=JSON.stringify(n)?(console.log(l+"属性重绘"),i=await te(t,l,n,r,y),g.option=i,g.attr=JSON.parse(JSON.stringify(n)),g.data=le(r)?[...r]:JSON.parse(JSON.stringify(r)),h.setOption(i,!0),C(n)||d(g,r,!0)):JSON.stringify(g.data)!=JSON.stringify(r)?C(n)?(console.log(l+"数据重绘"),i=await te(t,l,n,r,y),g.option=i,g.data=le(r)?[...r]:JSON.parse(JSON.stringify(r)),h.setOption(i,!0)):(console.log(l+"数据更新"),g.data=le(r)?[...r]:JSON.parse(JSON.stringify(r)),d(g,r,!1)):console.log(l+"无数据更新")},d=(t,l,n)=>{if(!l)return!1;let r=t.myChart,y=t.option.series;y[0].type=="bar3D"&&f(t,l,n),y[0].type=="radar"&&!n?r.setOption({series:[{data:l}]}):r.setOption(l)},f=(t,l,n)=>{let r=t.myChart,y=t.option;if((t.id!="prps_ddb"||e=="prps_ddb")&&!C(B().visualMap)){let i=y.visualMap.inRange.color;B().visualMap.forEach((g,z)=>{g.color!=i[z]&&(i[z]=g.color,r.clear(),r.setOption(y,!0))})}if(n)setTimeout(()=>{for(let i=0;i<2;i++)r.appendData({seriesIndex:i,data:l.slice(i*18e3,(i+1)*18e3)})},10);else{r.setOption({series:[{data:[]}]});for(let i=0;i<2;i++)r.appendData({seriesIndex:i,data:l.slice(i*18e3,(i+1)*18e3)})}},u=(t,l,n,r,y)=>{m(t,l,n,r),L(t,l,n),_(t,l),F(t,l)},m=(t,l,n,r)=>{let h=B().chartArr.find(i=>i.id==l).myChart;if(h.off("click"),t.indexOf("Map")!==-1)return k(t,l,n,r,h);if(t.indexOf("Pie")!==-1)return x(t,l,n,r,h);if(t.indexOf("Bar")!==-1)return S(t,l,n,r,h);if(t=="Bar3d")return p(t,l,n,r,h);h.getZr().on("click",function(i){new Promise(g=>{console.log("单击触发"),g(i)}).then(g=>{var z=[i.offsetX,i.offsetY];if(!(i.target&&i.target.type==="rect")){for(var v=h.getOption().series,D=Number.MAX_VALUE,M=null,W=null,P=0;P<v.length;P++)for(var j=v[P].data,H=0;H<j.length;H++){var G=h.convertToPixel("grid",j[H]),K=Math.sqrt(Math.pow(z[0]-G[0],2)+Math.pow(z[1]-G[1],2));K<D&&(D=K,M=P,W=H)}if(M!==null&&W!==null){var V=v[M].data[W];console.log("折线",M,"点",W,"数据",V),V&&V.length>2&&(B().chartDot=V,B().isTrue=!B().isTrue)}}})})},p=(t,l,n,r,y)=>{let h=B().visualMap;if(h.length==0){let g=y.getOption().visualMap[0].pieces,z=y.getOption().visualMap[0].controller.inRange.color;h=g.map((v,D)=>{let M=0,W=0;const P=v.label.match(/-?\d+/g);return P&&P.length>=2?(M=parseInt(P[0]),W=parseInt(P[1]),console.log(M,W)):P&&P.length==1?(M=parseInt(P[0]),W=M==0?1e4:M+Math.abs(M)*100):console.log("未找到匹配的数字",P),v.num1=M,v.num2=W,v.status=!0,v.oldColor=z[D],v.color=v.status?v.oldColor:"#5793f3",v.id=l,v}),console.log("标签设置成功",h),B().visualMap=h}y.on("datarangeselected",function(i){new Promise(g=>{console.log("单击3d柱状图触发标签"),g(i)}).then(g=>{if(l=="prps_ddb"||e=="prps_ddb")return;let z=Object.keys(i.selected).filter(D=>i.selected[D]===!1),v=[...h];z.forEach((D,M)=>{v[D].status=!v[D].status,v[D].color=v[D].status?v[D].oldColor:"#5793f3"}),B().visualMap=v})})},S=(t,l,n,r,y)=>{y.on("click",function(h){new Promise(i=>{console.log("单击柱状图触发"),i(h)}).then(i=>{let g=i.data[2];B().barDate=g})})},x=(t,l,n,r,y)=>{y.on("legendselectchanged",function(h){new Promise(i=>{console.log("单击圆饼触发"),i(h)}).then(i=>{i.selected;var g=i.name;y.dispatchAction({type:"legendSelect",name:g}),B().legendName=g})}),y.getZr().on("click",function(h){h&&h.topTarget&&h.topTarget.parent&&h.topTarget.parent.style&&(B().alarmStatus=!B().alarmStatus)})},k=(t,l,n,r,y)=>{y.on("click",async function(h){if(h.data&&h.data.level!="district"){let i=h.data.adcode;if(i&&i!=X().adcode){console.log("点击更新地图---",h),X().adcode=i;let g=await te(t,l,n,r,{});y.setOption(g,!0)}}else console.log("地区不可点击")})},L=(t,l,n,r)=>{let h=B().chartArr.find(i=>i.id==l).myChart;h.off("dblclick"),h.getZr().on("dblclick",function(i){new Promise(g=>{console.log("双击触发"),t=="Bar3d"&&(B().isFalse=!B().isFalse),g(i)}).then(g=>{console.log(l+"双击后..."),e=l;let z=[];h.getOption().series.forEach(v=>{z=[...z,...v.data]}),t=="Bar3d"&&a(t,"Bar3d",n,z,{})})})},_=(t,l,n,r)=>{if(l!="zoom"&&t!="Line")return;let y=B().chartArr.find(g=>g.id==l);if(!y||!y.myChart)return;let h=y.myChart;h.off("datazoom");let i={start:0,end:100};h.on("datazoom",function(g){const z=g.batch&&g.batch[0];if(!z)return;const v=z.start,D=z.end,M=D-v,W=Math.abs(v-i.start),P=Math.abs(D-i.end);if(W>1&&P>1){const H=h.getOption();let G=0;if(H.series.forEach(V=>{if(V.type==="line"){let b=V.data.length;G=b>G?b:G}}),G<=20)return;const K=G<=50?100:50;H.series.forEach(V=>{V.type==="line"&&(V.symbolSize=M<K?5:0)}),h.setOption(H,{notMerge:!1,replaceMerge:["series"],lazyUpdate:!0})}i={start:v,end:D}})},F=(t,l,n,r)=>{if(t.indexOf("Map")==-1)return;let h=B().chartArr.find(i=>i.id==l).myChart;h.on("georoam",function(i){if(!(i.dy==0&&i.dx==0)){var g=h.getOption();i.zoom!=null&&i.zoom!=null?(i.componentType=="series"?(g.geo[0].zoom=g.series[0].zoom,g.geo[0].center=g.series[0].center,g.geo[1].zoom=g.series[0].zoom,g.geo[1].center=g.series[0].center):(g.series[0].zoom=g.geo[0].zoom,g.series[0].center=g.geo[0].center,g.geo[1].zoom=g.geo[0].zoom,g.geo[1].center=g.geo[0].center),h.clear()):i.componentType=="series"?(g.geo[0].center=g.series[0].center,g.geo[1].center=g.series[0].center):(g.series[0].center=g.geo[0].center,g.geo[1].center=g.geo[0].center),h.setOption(g)}})};return window.addEventListener("resize",Pe(async()=>{B().chartArr.forEach(async t=>{let l=t.type,n=t.id,r=t.attr,y=t.data,h=t.pramas,i=t.option.series,g=t.myChart,z=await te(l,n,r,y,h);z.series.forEach((v,D)=>{v.data=i[D].data}),t.option=z,i[0].type=="bar3D"?f(t,y,!0):(g.setOption(z),C(r)||d(t,y,!0)),g.resize()})},500)),Ie(()=>{console.log("触发charts onUnmounted",B().chartArr)}),{drawChart:a}}export{io as e};
