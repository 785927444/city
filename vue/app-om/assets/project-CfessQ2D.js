import{d as N,g as j,r as B,o as r,c as d,a as l,w as c,f as a,a8 as D,u as o,m as L,F as U,p as I,z as v,q,E as A,e as x,k as M,t as m,h as u,a2 as O}from"./index-CymMRwSV.js";import{v as T}from"./el-loading-Bz52rtYK.js";import{_ as z}from"./ViewFiles-D4O9SnS7.js";import{E as K,a as P}from"./el-table-column-D8RLsYXD.js";import"./el-checkbox-DcAGyG1S.js";import{_ as R}from"./AaTitle.vue_vue_type_script_setup_true_lang-BA3Fb0N5.js";const G={class:"topclass"},H={class:"ww100 h100x6 flex-col hidden"},J={class:"flex-sc"},Q={class:"flex-sc mr30"},W={class:"w50x4 flex-sc"},X={class:"flex-sc mr30"},Z={class:"w50x3 flex-sc"},ee={class:"flex-sc mr15"},te={class:"w50x3 flex-sc"},se={class:"layout-col white-rgba50 rad8 p15"},le={key:0},ae={key:1},oe={key:2},ne={key:0,class:""},fe=N({__name:"project",props:{state:{type:[Object,Array],default:()=>({})}},emits:["init"],setup(ie,{expose:y,emit:re}){const{proxy:_}=j(),g=_.publicStore();_.configStore();const V=_.dictStore(),e=B({...g.$state,ruleList:{}}),h=async n=>{e.isFalse=!e.isFalse,e.isFalse&&(e.active={...n},console.log("state.active---",e.active),b())},b=async()=>{let n={model:"t_scheme_project",args:`scheme_id='${e.active.scheme_id}'`};if(!_.isNull(e.construct_datetime)){const[p,f]=e.construct_datetime;n.args+=` and construct_datetime_start>='${p}' and construct_datetime_end<='${f}'`}e.completion_status&&(n.args+=` and completion_status='${e.completion_status}'`),e.search&&(n.args+=` and name LIKE '%${e.search}%'`);let s=await g.http({Api:n});e.list=_.isNull(s)?[]:s};return y({onVisable:h}),(n,s)=>{const p=D,f=q,k=L,F=A,E=R,i=P,$=K,S=z,Y=O,C=T;return r(),d("div",G,[l(Y,{"modal-class":"topclass",modelValue:o(e).isFalse,"onUpdate:modelValue":s[5]||(s[5]=t=>o(e).isFalse=t),title:"项目列表","before-close":h,draggable:!0,width:"65%"},{default:c(()=>[a("div",H,[l(E,{title:""},{"left-content":c(()=>[a("div",J,[a("div",Q,[s[6]||(s[6]=a("span",{class:"mr10"},"项目周期",-1)),a("span",W,[l(p,{style:{width:"100%"},modelValue:o(e).construct_datetime,"onUpdate:modelValue":s[0]||(s[0]=t=>o(e).construct_datetime=t),"start-placeholder":"开始周期","end-placeholder":"结束周期",type:"yearrange","value-format":"YYYY",format:"YYYY"},null,8,["modelValue"])])]),a("div",X,[s[7]||(s[7]=a("span",{class:"mr10"},"实施状态",-1)),a("span",Z,[l(k,{modelValue:o(e).completion_status,"onUpdate:modelValue":s[1]||(s[1]=t=>o(e).completion_status=t),placeholder:"请选择",style:{width:"100%"},filterable:"",clearable:""},{default:c(()=>[(r(!0),d(U,null,I(o(V).project_completion_statuss,(t,w)=>(r(),v(f,{key:t.value,value:String(t.value),label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])])]),a("div",ee,[s[8]||(s[8]=a("span",{class:"mr10"},"项目名称",-1)),a("span",te,[l(F,{modelValue:o(e).search,"onUpdate:modelValue":s[2]||(s[2]=t=>o(e).search=t),style:{width:"100%"},placeholder:"请输入"},null,8,["modelValue"])])]),a("div",{class:"rad4 ptb5 w80 flex-cc cursor bgi1 white ml10",onClick:s[3]||(s[3]=x(t=>{o(e).page=1,b()},["stop"]))},"搜索")])]),"right-content":c(()=>[...s[9]||(s[9]=[])]),_:1}),a("div",se,[n.isNull(o(e).list)?u("",!0):M((r(),v($,{key:0,"header-cell-class-name":"bgi16 c3","cell-style":{"background-color":"#FFFFFF",color:"#626366"},border:"","empty-text":"暂无数据",data:o(e).list,stripe:""},{default:c(()=>[l(i,{type:"index",index:n.indexMethod,label:"序号",align:"center",width:"50"},null,8,["index"]),l(i,{prop:"name",label:"项目名称"}),l(i,{label:"地区",align:"center",width:"140"},{default:c((t,w)=>[t.row.province_name?(r(),d("span",le,m(t.row.province_name),1)):u("",!0),t.row.city_name?(r(),d("span",ae,"-"+m(t.row.city_name),1)):u("",!0),t.row.district_name?(r(),d("span",oe,"-"+m(t.row.district_name),1)):u("",!0)]),_:1}),l(i,{prop:"construct_scale",label:"建设规模",width:"100",align:"center"}),l(i,{prop:"construct_nature",label:"建设性质",width:"100",align:"center"}),l(i,{prop:"construct_price",label:"投资预估(万元)",width:"100",align:"center"}),l(i,{label:"项目周期",align:"center",width:"100"},{default:c((t,w)=>[t.row.construct_datetime_start&&t.row.construct_datetime_end?(r(),d("span",ne,m(t.row.construct_datetime_start)+" ~ "+m(t.row.construct_datetime_end),1)):u("",!0)]),_:1}),l(i,{label:"操作",align:"center",width:"100"},{default:c((t,w)=>[a("span",{class:"i1 cursor",onClick:s[4]||(s[4]=x(()=>{},["stop"]))},"导入")]),_:1})]),_:1},8,["data"])),[[C,o(e).loading,void 0,{fullscreen:!0,lock:!0}]])])]),l(S,{ref:"viewRef"},null,512)]),_:1},8,["modelValue"])])}}});export{fe as default};
