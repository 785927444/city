import{d as C,g as N,r as A,o as _,c as v,a as s,a2 as E,u as n,w as c,f as r,m as S,F as q,p as O,q as $,e as j,k as B,z as T,y as U,t as D,h as I,l as M}from"./index-Bd85TTIS.js";import{v as z}from"./el-loading-QtaFgzrj.js";/* empty css                        *//* empty css                    */import{_ as L}from"./AaTitle.vue_vue_type_script_setup_true_lang-DNddMUg2.js";import{a as P,E as G}from"./index-CohXJBWb.js";const H={class:"topclass"},J={class:"ww100 h100x6 flex-col hidden"},K={class:"flex-sc"},Q={class:"w50x3"},R={class:"layout-col white-rgba50 rad8 p15"},W=C({__name:"Problems",props:{state:{type:[Object,Array],default:()=>({})}},setup(X,{expose:y}){const{proxy:p}=N(),b=p.publicStore();p.configStore();const f=[{value:"0",name:"未匹配"},{value:"1",name:"已匹配"}],e=A({...b.$state,status:""}),h=a=>parseInt(e.page)+a,x=({row:a,column:t,rowIndex:d,columnIndex:u})=>{if(u===1)return d===0?{rowspan:e.total,colspan:1}:{rowspan:0,colspan:0}},g=async a=>{e.isFalse=!e.isFalse,e.isFalse&&(e.active={...a},w())},w=async a=>{let t={model:"t_scheme_problem_item",args:`problem_id='${e.active.id}'`};e.status!==""&&e.status!=null&&(t.args+=` and problem_status='${e.status}'`);let d={limit:e.limit,page:e.page},u={field:"COUNT(*)"},m={},o={};Object.assign(m,t,d),Object.assign(o,t,u);let i=await b.http({Api1:m,Api2:o});e.empty=!!p.isNull(i.Api1),e.list=p.isNull(i.Api1)?[]:i.Api1,e.total=p.isNull(i.Api2)?0:i.Api2[0]["COUNT(*)"]};return y({onVisable:g}),(a,t)=>{const d=$,u=S,m=L,o=G,i=P,F=E,k=z;return _(),v("div",H,[s(F,{"modal-class":"topclass",modelValue:n(e).isFalse,"onUpdate:modelValue":t[2]||(t[2]=l=>n(e).isFalse=l),title:"问题清单","before-close":g,draggable:!0,width:"62%"},{default:c(()=>[r("div",J,[s(m,{title:""},{"left-content":c(()=>[r("div",K,[t[3]||(t[3]=r("span",{class:"mr10"},"状态",-1)),r("span",Q,[s(u,{modelValue:n(e).status,"onUpdate:modelValue":t[0]||(t[0]=l=>n(e).status=l),placeholder:"请选择",style:{width:"100%"},filterable:"",clearable:""},{default:c(()=>[(_(),v(q,null,O(f,(l,V)=>s(d,{key:l.value,value:String(l.value),label:l.name},null,8,["value","label"])),64))]),_:1},8,["modelValue"])]),r("div",{class:"rad4 ptb5 w80 flex-cc cursor bgi1 white ml10",onClick:t[1]||(t[1]=j(l=>{n(e).page=1,w()},["stop"]))},"搜索")])]),"right-content":c(()=>[...t[4]||(t[4]=[])]),_:1}),r("div",R,[a.isNull(n(e).list)?I("",!0):B((_(),T(i,{key:0,"header-cell-class-name":"bgi16 c3","cell-style":{"background-color":"#FFFFFF",color:"#626366"},"span-method":x,border:"","empty-text":"暂无数据",data:n(e).list,stripe:""},{default:c(()=>[s(o,{type:"index",index:h,label:"序号",align:"center",width:"50"}),s(o,{prop:"problem_content",label:"问题名称"}),s(o,{prop:"probelm_scale",label:"问题范围",align:"center",width:"200"}),s(o,{label:"状态",align:"center",width:"80"},{default:c((l,V)=>[r("span",{class:U(l.row.problem_status=="1"?"i12":"i15")},D(l.row.problem_status?a.find(f,["value",l.row.problem_status],"name"):""),3)]),_:1}),s(o,{prop:"check_year",label:"体检年度",align:"center",width:"80"})]),_:1},8,["data"])),[[k,n(e).loading,void 0,{fullscreen:!0,lock:!0}]])])])]),_:1},8,["modelValue"])])}}}),ae=M(W,[["__scopeId","data-v-fd55a4f4"]]);export{ae as _};
