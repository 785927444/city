import{_ as B}from"./ViewFiles-C92c8QO4.js";import{_ as M,a as N}from"./question-filled-BgQjHn-S.js";import{d as S,g as A,Y as E,j as U,o as a,c as l,f as s,F as h,p as k,e as m,u as d,y as $,a as y,cE as j,w as z,k as D,v as L,t as p,z as P,h as x,aF as R,i as T,r as q}from"./index-BF5jje68.js";const I={class:"ww100 flex-col"},O={class:"ww100 flex-sc pb15 plr15"},Y=["onClick"],G={class:"absolute f14 t10 r-18"},H={class:"ww100 rad5 flex-sc warp"},J={class:"ww100 bs bo-i16-1 relative rad8"},K={class:"ww100 flex-sc p12 bob-ce-1"},Q={class:"f15"},W={class:"flex1 flex-ec"},X={class:"ww100 flex-col p12"},Z={class:"ww100 flex-sc"},ee={class:"flex1 line1"},se={class:"ww100 flex-sc mt12"},te={class:"flex1 line1"},ae={class:"ww100 flex-sc mt12"},le={class:"flex1 line1"},oe={class:"ww100 flex-ec mt12"},ne=["onClick"],ce={key:1,class:"ml12 ca"},ie=["onClick"],pe={key:3,class:"ml12 ca"},ue=S({__name:"FileList",props:R({contents:{type:Array,default:[]},plans:{type:Array,default:[]},active:{type:[Object,Array],default:()=>({})}},{files:{},filesModifiers:{}}),emits:["update:files"],setup(w){const{proxy:_}=A();_.publicStore(),_.configStore();let v=T();const t=E(w,"files"),c=w,i=q({});U(()=>c.active,async(o,n)=>{_.isNull(o)||(i.active={...o})},{immediate:!1,deep:!0});const b=o=>{const u=t.value[o.type].data;v.value.onVisable(u)},C=async o=>{delete t.value[o.type]};return(o,n)=>{const u=M,g=j,F=N,V=B;return a(),l("div",I,[s("div",O,[(a(!0),l(h,null,k(c.plans?c.plans:[],(e,f)=>(a(),l("div",{class:$(["mr40 pb10 f18 relative cursor actfont",d(i).active.name==e.name?"i1 bob-i1-2":"bob-tt-2"]),key:f,onClick:m(r=>d(i).active={...e},["stop"])},[y(g,{content:e.describe,placement:"top-start"},{reference:z(()=>[s("div",G,[D(y(u,null,null,512),[[L,e.describe]])])]),_:2},1032,["content"]),s("span",null,p(e.name),1)],10,Y))),128))]),s("div",H,[d(i).active&&t.value?(a(!0),l(h,{key:0},k(c.contents?c.contents.filter(e=>e.parent_id==d(i).active.id):[],(e,f)=>(a(),l("div",{class:"ww25 flex-sc ptb8 pr16",key:f},[s("div",J,[s("div",K,[s("span",Q,p(e.name),1),s("span",W,[e.type?(a(),P(F,{key:0,model:t.value[e.type],"onUpdate:model":r=>t.value[e.type]=r},null,8,["model","onUpdate:model"])):x("",!0)])]),s("div",X,[s("div",Z,[n[0]||(n[0]=s("span",{class:"w90 c8"},"上传状态",-1)),s("span",ee,p(t.value[e.type]&&t.value[e.type].status?t.value[e.type].status=="success"?"成功":"失败":"-"),1)]),s("div",se,[n[1]||(n[1]=s("span",{class:"w90 c8"},"文件类型",-1)),s("span",te,p(t.value[e.type]&&t.value[e.type].type?t.value[e.type].type:"-"),1)]),s("div",ae,[n[2]||(n[2]=s("span",{class:"w90 c8"},"上传时间",-1)),s("span",le,p(t.value[e.type]&&t.value[e.type].time?o.parseTime(t.value[e.type].time):"-"),1)]),s("div",oe,[t.value[e.type]?(a(),l("span",{key:0,class:"ml12 i1 cursor",onClick:m(r=>b(e),["stop"])},"预览",8,ne)):(a(),l("span",ce,"预览")),t.value[e.type]?(a(),l("span",{key:2,class:"ml12 i9 cursor",onClick:m(r=>C(e),["stop"])},"删除",8,ie)):(a(),l("span",pe,"删除"))])])])]))),128)):x("",!0),y(V,{ref_key:"viewRef",ref:v},null,512)])])}}});export{ue as _};
