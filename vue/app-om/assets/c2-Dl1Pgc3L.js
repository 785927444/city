import{d as ms,g as fs,r as _s,b as hs,o as p,c as u,u as x,e as m,a as c,_ as xs,f as e,y as q,c4 as ys,t as S,c5 as bs,h as w,F as k,p as V,z as $,c7 as ws,k as y,c6 as T,c8 as gs,v as X,c3 as ks,c9 as Vs,a1 as g,w as z,ca as Cs,cb as Ts,E as Us,cc as D,a3 as Y,a4 as C,a9 as Ns,l as vs}from"./index-C0LFq0t5.js";import{E as Ss}from"./el-switch-BOTkYaDy.js";import{_ as $s,a as js}from"./mute-notification-1g7M4l1b.js";import{_ as Ms}from"./caret-top-15OmBD7l.js";const Os={class:"layout-col"},Js={key:1,class:"layout-col white-rgba50 rad8 p10"},Es={class:"ww100 flex-bc p10"},Bs={key:0,class:"flex-ec flex1 h30"},Is={class:"f14 ml5"},As={key:1,class:"flex-ec flex1 h30"},qs={class:"flex-col ww100 flex1 overlay"},zs={class:"ww100 flex-bc plr12 ptb8 bge"},Ds={class:"flex-sc c3"},Rs=["onClick"],Fs=["onUpdate:modelValue"],Gs=["onUpdate:modelValue"],Ls=["onUpdate:modelValue"],Ps={class:"flex-ec flex1 h36"},Qs=["onClick"],Hs=["onClick"],Ks=["onClick"],Ws={class:"f14 ml5"},Xs=["onClick"],Ys={class:"flex-sc c4"},Zs=["onClick"],se={class:"hh100 plr12 ptb14 bo-ce-1 flex4 flex-bc relative bg-white"},ee=["onUpdate:modelValue"],le={class:"flex-ec"},te=["onClick"],oe=["onClick"],ae=["onClick"],ne={class:"flex-col ww100 flex1"},ie={class:"flex-sc c4"},pe={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},ce=["onUpdate:modelValue"],re={class:"flex-sc c4"},de={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},ue=["onUpdate:modelValue"],me={class:"flex-sc c4"},fe={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},_e={class:"flex-sc c4"},he={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},xe=["onUpdate:modelValue"],ye={class:"flex-sc c4"},be={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},we=["onClick"],ge={class:"hh100 plr12 ptb14 bo-ce-1 flex1 flex-bs"},ke={class:"flex-ec"},Ve=["onClick"],Ce=["onClick"],Te=["onClick"],Ue={key:0,class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bs"},Ne={key:1,class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},ve={class:"flex-col-ss flex1"},Se={class:"flex-sc"},$e={class:"flex-sc"},je={class:"aselect mlr10"},Me=["onUpdate:modelValue"],Oe=["value"],Je={class:"flex-sc"},Ee={class:"aselect mlr10"},Be=["onUpdate:modelValue","onChange"],Ie=["value"],Ae={class:"flex-sc flex1"},qe={key:0,class:"flex1 flex-sc"},ze={key:1,class:"flex1 flex-sc"},De={class:"aselect mlr10"},Re=["onUpdate:modelValue"],Fe=["value"],Ge={key:2,class:"flex1 flex-sc"},Le={key:3,class:"flex1 flex-col"},Pe=["onClick"],Qe=["onClick"],He=["onClick"],Ke=ms({__name:"c2",setup(We){const{proxy:U}=fs(),h=U.publicStore(),M=U.configStore(),_=_s({...h.$state,key:"id",now:0,model:"t_simulator"}),R={key:"",type:"string",valueType:"1",value:""},E={json:""},B={json:[R]},F={show:!0,status:!1,title:"",http:"",path:"",time:60,paramsType:"1",params1:[E],params2:[B]},G={show:!0,status:!0,title:"",http:"",apis:[F]},Z=[{name:"字符串",value:"string"},{name:"整型",value:"int"},{name:"浮点型",value:"float"}],ss=[{name:"定值",value:"1"},{name:"时间",value:"2"},{name:"随机数",value:"3"},{name:"顺序数组",value:"4"},{name:"随机数组",value:"5"}],es=[{name:"时间擢(毫秒)",value:"1"},{name:"时间擢(秒)",value:"2"},{name:"年-月-日 时:分:秒",value:"3"}];hs(async()=>{O()});const O=async()=>{let a=U.isNull(h.active)?{model:_.model}:{model:_.model,args:`id='${h.active.id}'`},s=await h.http({Api:a});_.empty=!!U.isNull(s);let t=U.isNull(s)?[]:s.sort((l,f)=>l.order-f.order);t.forEach(l=>{l.apis=JSON.parse(l.apis)}),_.list=t,h._public.list=_.list},ls=a=>{let s=os(a);if(!s.status)return C({title:"提示",message:s.msg,type:"error"});let t=Object.assign({},a);t.apis=JSON.stringify(t.apis);let l={model:_.model,list:[t]};Y[t[_.key]?"updApi":"addApi"](l).then(f=>{f.code==200&&(C({title:"提示",message:"操作成功",type:"success"}),h.mockStatus=!h.mockStatus,O())}).catch(f=>{C({title:"提示",message:"操作失败",type:"error"})})},ts=(a,s)=>{Ns.confirm("是否确定删除?","删除提示",{confirmButtonText:"确定",cancelButtonText:"关闭",type:"error"}).then(()=>{let t={model:_.model,list:[a]};Y.delApi(t).then(l=>{l.code==200&&(C({title:"提示",message:"操作成功",type:"success"}),h.mockStatus=!h.mockStatus,O())}).catch(l=>{C({title:"提示",message:"操作失败",type:"error"})})})},os=a=>{let s={status:!0,msg:""};return a.apis.length!=0&&a.apis.forEach(t=>{L(a,t,s)}),s},L=(a,s,t)=>{!a.http&&!s.http&&(t.status=!1,t.msg="请输入请求地址"),s.path||(t.status=!1,t.msg="请输入请求路径"),s.time||(t.status=!1,t.msg="请输入间隔"),s.paramsType||(t.status=!1,t.msg="请选择请求体类型")},as=(a,s)=>{let t={status:!0,msg:""};if(L(a,s,t),!t.status)return C({title:"提示",message:t.msg,type:"error"});let l=ns(s);console.log("开始模拟",s.title,l),h.http({httpApi:{query:l,ip:s.http?s.http:a.http,url:s.path}}).then(f=>{console.log("模拟结果",f),C({title:"提示",message:"发送成功",type:"success"})}).catch(f=>{C({title:"提示",message:"发送失败",type:"error"})})},ns=a=>{_.now=parseInt(Date.now());let s={};if(a.paramsType==1&&(a.params1.length==0?s={}:a.params1.length==1?a.params1[0].json?s=JSON.parse(a.params1[0].json):s={}:s=a.params1.map(t=>JSON.parse(t.json))),a.paramsType==2)if(a.params2.length==0)s={};else if(a.params2.length==1)a.params2[0].json.length==0?s={}:s=P(a.params2[0]);else{let t=[];a.params2.map(l=>{let f=P(l);t.push(f)}),s=t}return s},P=a=>{let s={},t="-.-";return a.json.map(l=>{if(l.valueType==1&&(t=l.value),l.valueType==2&&(t=l.value==1?_.now:l.value==2?Math.floor(_.now/1e3):U.parseTime(new Date)),l.valueType==3&&l.value[1]&&l.value[0]&&Number(l.value[1])>Number(l.value[0])){let f=Math.random()*(Number(l.value[1])-Number(l.value[0]))+Number(l.value[0]);t=Math.floor(f*100)/100}if(l.valueType==4&&l.value.length!=0&&l.value[0].val){let f=l.value.length,b=l.value.findIndex(J=>J.status);b==-1?(t=l.value[0].val,f!=1&&(l.value[1].status=!0)):(t=l.value[b].val,l.value[b].status=!1,f!=b+1?l.value[b+1].status=!0:l.value[0].status=!0)}if(l.valueType==5&&l.value.length!=0&&l.value[0].val){let f=l.value.length,b=Math.floor(Math.random()*f);t=l.value[b].val}s[l.key]=l.type=="int"?parseInt(t):l.type=="float"?parseFloat(t):t+""}),s};return(a,s)=>{const t=xs,l=ys,f=bs,b=Ms,J=ws,is=$s,ps=js,j=gs,Q=ks,cs=Vs,rs=Ss,H=Cs,ds=Ts,N=Us;return p(),u("div",Os,[x(_).empty&&a.isNull(x(_).list)?(p(),u("div",{key:0,class:"absolute-cc flex-col-cc w50x10 h50x6 bod-i1-1 rad5 cursor f28 i1",onClick:s[0]||(s[0]=m(r=>x(_).list.push(Object.assign({},G)),["stop"]))},[c(t),s[5]||(s[5]=e("span",{class:"mt10"},"新建模拟器",-1))])):(p(),u("div",Js,[e("div",Es,[s[9]||(s[9]=e("div",{class:"flex-sc"},[e("span",{class:"f15 fw"},"模拟器配置")],-1)),a.isNull(x(h).active)?(p(),u("div",Bs,[e("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi1 white ml10",onClick:s[1]||(s[1]=m(r=>x(_).list.push(Object.assign({},G)),["stop"]))},[c(t,{class:"f12 fw"}),s[6]||(s[6]=e("span",{class:"f14 ml5"},"模拟",-1))]),e("div",{class:q(["rad4 ptb6 plr10 flex-cc cursor white ml10",x(M).isMock?"bgi11":"bgi6"]),onClick:s[2]||(s[2]=m(r=>x(M).isMock=!x(M).isMock,["stop"]))},[c(l,{class:"f12 fw"}),e("span",Is,S(x(M).isMock?"已开启":"未开启"),1)],2),e("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi1 white ml10",onClick:s[3]||(s[3]=m(r=>O(),["stop"]))},[c(f,{class:"f12 fw"}),s[7]||(s[7]=e("span",{class:"f14 ml5"},"刷新",-1))])])):w("",!0),a.isNull(x(h).active)?w("",!0):(p(),u("div",As,[e("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi1 white ml10",onClick:s[4]||(s[4]=m(r=>x(h).active={},["stop"]))},[c(t,{class:"f12 fw"}),s[8]||(s[8]=e("span",{class:"f14 ml5"},"返回",-1))])]))]),e("div",qs,[(p(!0),u(k,null,V(x(_).list,(r,us)=>(p(),u("div",{class:"flex-col ww100 mb20",key:us},[e("div",zs,[e("div",Ds,[e("div",{class:"f16 fw flex-sc cursor",onClick:m(o=>r.show=!r.show,["stop"])},[r.show?(p(),$(b,{key:0})):(p(),$(J,{key:1})),s[10]||(s[10]=e("span",{class:"ml5"},"模拟器",-1))],8,Rs),y(e("input",{class:"w50x3 f16 fw pb5 i1 mlr10",style:{"border-bottom":"2px #333 dashed"},placeholder:"请输入名称","onUpdate:modelValue":o=>r.title=o},null,8,Fs),[[T,r.title,void 0,{trim:!0}]]),s[11]||(s[11]=e("span",{class:"f16 fw"},"全局地址",-1)),y(e("input",{class:"w50x4 f16 fw pb5 i1 mlr10",style:{"border-bottom":"2px #333 dashed"},placeholder:"(例：127.0.0.1:8808)","onUpdate:modelValue":o=>r.http=o},null,8,Gs),[[T,r.http,void 0,{trim:!0}]]),s[12]||(s[12]=e("span",{class:"f16 fw"},"当前排序",-1)),y(e("input",{class:"w50x4 f16 fw pb5 i1 mlr10",style:{"border-bottom":"2px #333 dashed"},placeholder:"数字越小排名越前","onUpdate:modelValue":o=>r.order=o},null,8,Ls),[[T,r.order,void 0,{trim:!0}]])]),e("div",Ps,[e("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi1 white ml10",onClick:m(o=>ls(r),["stop"])},[c(f,{class:"f12 fw"}),s[13]||(s[13]=e("span",{class:"f14 ml5"},"保存",-1))],8,Qs),e("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi1 white ml10",onClick:m(o=>r.apis.push(Object.assign({},F)),["stop"])},[c(t,{class:"f12 fw"}),s[14]||(s[14]=e("span",{class:"f14 ml5"},"接口",-1))],8,Hs),e("div",{class:q(["rad4 ptb6 plr10 flex-cc cursor white ml10",r.status?"bgi11":"bgi6"]),onClick:m(o=>r.status=!r.status,["stop"])},[r.status?(p(),$(is,{key:0,class:"f12 fw"})):(p(),$(ps,{key:1,class:"f12 fw"})),e("span",Ws,S(r.status?"已启用":"已禁用"),1)],10,Ks),e("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi8 white ml10",onClick:m(o=>ts(r),["stop"])},[c(j,{class:"f12 fw"}),s[15]||(s[15]=e("span",{class:"f14 ml5"},"删除",-1))],8,Xs)])]),(p(!0),u(k,null,V(r.apis,(o,I)=>y((p(),u("div",{class:"flex-col hh100 ww100",key:I},[e("div",Ys,[e("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 flex-sc cursor",onClick:m(d=>o.show=!o.show,["stop"])},[s[16]||(s[16]=e("span",{class:"pl20"},null,-1)),o.show?(p(),$(b,{key:0})):(p(),$(J,{key:1})),s[17]||(s[17]=e("span",{class:"ml5"},"名称(选填)",-1))],8,Zs),e("div",se,[y(e("input",{class:"flex1","onUpdate:modelValue":d=>o.title=d,placeholder:"(例：模拟数据)"},null,8,ee),[[T,o.title,void 0,{trim:!0}]]),e("div",le,[e("div",{class:"cursor i6 flex-cc mr12",onClick:m(d=>r.apis.splice(I,0,JSON.parse(JSON.stringify(o))),["stop"])},[c(Q,{class:"f12 fw"}),s[18]||(s[18]=e("span",{class:"f14 ml2"},"复制",-1))],8,te),e("div",{class:"cursor i8 flex-cc mr15",onClick:m(d=>r.apis.splice(I,1),["stop"])},[c(j,{class:"f12 fw"}),s[19]||(s[19]=e("span",{class:"f14 ml2"},"删除",-1))],8,oe),e("div",{class:"cursor i1 flex-cc",onClick:m(d=>as(r,o),["stop"])},[c(cs,{class:"f12 fw"}),s[20]||(s[20]=e("span",{class:"f14 ml2"},"模拟",-1))],8,ae)])])]),y(e("div",ne,[e("div",ie,[s[21]||(s[21]=e("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 flex-sc"},[e("span",{class:"i12 mr2 pl32"},"*"),g("地址")],-1)),e("div",pe,[y(e("input",{class:"flex1","onUpdate:modelValue":d=>o.http=d,placeholder:"(例：127.0.0.1:8808)"},null,8,ce),[[T,o.http,void 0,{trim:!0}]])])]),e("div",re,[s[22]||(s[22]=e("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 flex-sc"},[e("span",{class:"i9 mr2 pl32"},"*"),g("路径")],-1)),e("div",de,[y(e("input",{class:"flex1","onUpdate:modelValue":d=>o.path=d,placeholder:"(例：/api/admin/index)"},null,8,ue),[[T,o.path,void 0,{trim:!0}]])])]),e("div",me,[s[23]||(s[23]=e("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 flex-sc"},[e("span",{class:"pl40"}),g("状态")],-1)),e("div",fe,[c(rs,{modelValue:o.status,"onUpdate:modelValue":d=>o.status=d,"inline-prompt":"","active-text":"已启用","inactive-text":"已禁用"},null,8,["modelValue","onUpdate:modelValue"])])]),e("div",_e,[s[25]||(s[25]=e("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 flex-sc"},[e("span",{class:"pl40"}),g("间隔")],-1)),e("div",he,[y(e("input",{class:"flex1","onUpdate:modelValue":d=>o.time=d,placeholder:"(例：10)"},null,8,xe),[[T,o.time,void 0,{trim:!0}]]),s[24]||(s[24]=e("span",null,"秒(s)",-1))])]),e("div",ye,[s[29]||(s[29]=e("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 flex-sc"},[e("span",{class:"pl40"}),g("请求体类型")],-1)),e("div",be,[c(ds,{modelValue:o.paramsType,"onUpdate:modelValue":d=>o.paramsType=d,onChange:d=>{o.params1=[Object.assign({},E)],o.params2=[Object.assign({},B)]}},{default:z(()=>[c(H,{label:"1",value:"1",size:"large"},{default:z(()=>[...s[26]||(s[26]=[g("json",-1)])]),_:1}),c(H,{label:"2",value:"2",size:"large"},{default:z(()=>[...s[27]||(s[27]=[g("自定义",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","onChange"]),e("div",{class:"cursor bgi1 white flex-cc plr5 ptb4 rad5",onClick:m(d=>o.paramsType==1?o.params1.push(Object.assign({},E)):o.params2.push(Object.assign({},B)),["stop"])},[c(t,{class:"f12 mr2"}),s[28]||(s[28]=g("请求体",-1))],8,we)])]),(p(!0),u(k,null,V(o.paramsType==1?o.params1:o.params2,(d,v)=>(p(),u("div",{class:"flex-sc c4",key:v},[e("div",ge,[e("span",null,[s[30]||(s[30]=e("span",{class:"pl40"},null,-1)),g("请求体("+S(v+1)+")",1)]),e("div",ke,[o.paramsType==2?(p(),u("div",{key:0,class:"cursor i1 flex-cc mr12",onClick:m(n=>d.json.push(JSON.parse(JSON.stringify(R))),["stop"])},[c(t,{class:"f12 fw"}),s[31]||(s[31]=e("span",{class:"f14 ml2"},"参数",-1))],8,Ve)):w("",!0),e("div",{class:"cursor i1 flex-cc mr12",onClick:m(n=>o.paramsType==1?o.params1.splice(v,0,JSON.parse(JSON.stringify(d))):o.params2.splice(v,0,JSON.parse(JSON.stringify(d))),["stop"])},[c(Q,{class:"f12 fw"}),s[32]||(s[32]=e("span",{class:"f14 ml2"},"复制",-1))],8,Ce),e("div",{class:"cursor i1 flex-cc",onClick:m(n=>o.paramsType==1?o.params1.splice(v,1):o.params2.splice(v,1),["stop"])},[c(j,{class:"f12 fw"}),s[33]||(s[33]=e("span",{class:"f14 ml2"},"删除",-1))],8,Te)])]),o.paramsType==1?(p(),u("div",Ue,[c(N,{class:"flex1",type:"textarea",autosize:{minRows:10,maxRows:30},modelValue:d.json,"onUpdate:modelValue":n=>d.json=n,modelModifiers:{trim:!0},placeholder:'(例：{"a": 1, "b": 2}'},null,8,["modelValue","onUpdate:modelValue"])])):w("",!0),o.paramsType==2?(p(),u("div",Ne,[e("div",ve,[(p(!0),u(k,null,V(d.json,(n,A)=>(p(),u("div",{class:q(["flex-ss ww100",A!=0?"mt14 pt14 bot-ce-1":""]),key:A},[e("div",Se,[s[34]||(s[34]=e("span",null,"键值",-1)),c(N,{style:{width:"150px"},class:"mlr10",modelValue:n.key,"onUpdate:modelValue":i=>n.key=i,modelModifiers:{trim:!0},placeholder:"(例：a)"},null,8,["modelValue","onUpdate:modelValue"])]),e("div",$e,[s[35]||(s[35]=e("span",null,"类型",-1)),e("div",je,[y(e("select",{style:{width:"150px"},"onUpdate:modelValue":i=>n.type=i,placeholder:"请选择"},[(p(),u(k,null,V(Z,i=>e("option",{key:i.value,value:i.value},S(i.name),9,Oe)),64))],8,Me),[[D,n.type]])])]),e("div",Je,[s[36]||(s[36]=e("span",null,"值类型",-1)),e("div",Ee,[y(e("select",{style:{width:"150px"},"onUpdate:modelValue":i=>n.valueType=i,placeholder:"请选择",onChange:i=>n.value=n.valueType==1||n.valueType==2?"":n.valueType==3?["",""]:n.valueType==4||n.valueType==5?[{val:"",status:!1}]:""},[(p(),u(k,null,V(ss,i=>e("option",{key:i.value,value:i.value},S(i.name),9,Ie)),64))],40,Be),[[D,n.valueType]])])]),e("div",Ae,[s[38]||(s[38]=e("span",{class:"h32 lh32"},"数值",-1)),n.valueType==1?(p(),u("div",qe,[c(N,{style:{width:"100%"},class:"ml10",modelValue:n.value,"onUpdate:modelValue":i=>n.value=i,modelModifiers:{trim:!0},placeholder:"(例：1)"},null,8,["modelValue","onUpdate:modelValue"])])):w("",!0),n.valueType==2?(p(),u("div",ze,[e("div",De,[y(e("select",{style:{width:"150px"},"onUpdate:modelValue":i=>n.value=i,placeholder:"请选择"},[(p(),u(k,null,V(es,i=>e("option",{key:i.value,value:i.value},S(i.name),9,Fe)),64))],8,Re),[[D,n.value]])])])):w("",!0),n.valueType==3?(p(),u("div",Ge,[c(N,{style:{width:"100%"},class:"ml10",modelValue:n.value[0],"onUpdate:modelValue":i=>n.value[0]=i,modelModifiers:{trim:!0},placeholder:"最小值(例：1)"},null,8,["modelValue","onUpdate:modelValue"]),c(N,{style:{width:"100%"},class:"ml10",modelValue:n.value[1],"onUpdate:modelValue":i=>n.value[1]=i,modelModifiers:{trim:!0},placeholder:"最大值(例：10)"},null,8,["modelValue","onUpdate:modelValue"])])):w("",!0),n.valueType==4||n.valueType==5?(p(),u("div",Le,[e("div",{class:"cursor i1 flex-sc ml10",onClick:m(i=>n.value.push({val:"",status:!1}),["stop"])},[c(t,{class:"f12 fw"}),s[37]||(s[37]=e("span",{class:"f14 ml2"},"值",-1))],8,Pe),(p(!0),u(k,null,V(n.value,(i,K)=>(p(),u("div",{class:"flex-sc ww100 mt14",key:K},[c(N,{style:{width:"100%"},class:"ml10",modelValue:i.val,"onUpdate:modelValue":W=>i.val=W,modelModifiers:{trim:!0},placeholder:"(例：1)"},null,8,["modelValue","onUpdate:modelValue"]),e("div",{class:"cursor i1 flex-cc ml15",onClick:m(W=>n.value.splice(K,1),["stop"])},[c(j,{class:"f12 fw"})],8,Qe)]))),128))])):w("",!0)]),e("div",{class:"cursor i1 flex-cc ml15",onClick:m(i=>d.json.splice(A,1),["stop"])},[c(j,{class:"f12 fw"}),s[39]||(s[39]=e("span",{class:"f14 ml2"},"删除键值",-1))],8,He)],2))),128))])])):w("",!0)]))),128))],512),[[X,o.show]])])),[[X,r.show]])),128))]))),128)),s[40]||(s[40]=e("div",{class:"ww100 ptb20 bg-white ca tc fw f16"},"--- 我是有底线的 ---",-1))])]))])}}}),el=vs(Ke,[["__scopeId","data-v-b4748c52"]]);export{el as default};
