import{_ as N}from"./Add-Dow2Ues2.js";import{_ as q}from"./ListTree.vue_vue_type_script_setup_true_lang-CIDYJsMf.js";import{_ as C}from"./AaTitle.vue_vue_type_script_setup_true_lang-msvlqApB.js";import{d as S,g as V,r as T,b as j,n as I,o as _,c as h,f as p,a as c,w,u as r,e as R,_ as $,t as B,h as L,i as k}from"./index-BF5jje68.js";/* empty css                    */import"./index-CU8Q0z-M.js";import"./Upload-DGrHTtFE.js";/* empty css                   */import"./index-CND7x1jx.js";import"./el-text-CBvW04Pe.js";import"./index-VYQ43fvS.js";/* empty css                    */const A={class:"layout-col"},D={class:"layout-col"},F={class:"f14 ml2"},H={class:"layout-col white-rgba50 rad8 p15"},Z=S({__name:"index",setup(M){const{proxy:o}=V(),a=o.publicStore();o.configStore();const m=o.dictStore();let l=k(),y=k();const e=T({...a.$state,content:[{width:"flex1",show:!0,align:"left",key:"name",name:"名称"},{width:"w50x6",show:!0,align:"left",key:"component",name:"文件路径"},{width:"w50x4",show:!0,align:"left",key:"path",name:"请求路径"},{width:"w50x3",show:!0,align:"left",key:"isroute",name:"是否路由",type:"select",list:m.isList,value:"value",label:"name"},{width:"w50x4",show:!0,align:"left",key:"redirect",name:"重定向"},{width:"w50x2",show:!0,align:"left",key:"icon",name:"图标"},{width:"w50x2",show:!0,align:"left",key:"order",name:"排序"},{width:"w50x4",show:!0,align:"right",key:a.auth,name:"操作"}],editFrom:[{required:!0,editshow:!0,key:"parent_id",name:"上级",type:"tree",list:[],node_key:"id",parent_key:"parent_id",top_name:"顶级"},{required:!0,editshow:!0,key:"name",name:"名称",type:"input"},{required:!0,editshow:!0,key:"component",name:"文件路径",type:"input"},{required:!0,editshow:!0,key:"path",name:"请求路径",type:"input"},{required:!0,editshow:!0,key:"isroute",name:"是否路由",type:"select",list:m.isList,value:"value",label:"name"},{required:!1,editshow:!0,key:"redirect",name:"重定向",type:"input"},{required:!1,editshow:!0,key:"icon",name:"图标",type:"input"},{required:!1,editshow:!0,key:"order",name:"排序",type:"input"}],addItem:{}});j(async()=>{f()});const f=async n=>{e.query={model:e.model},e.params={Api:e.query};let t=await a.http(e.params);e.empty=!!o.isNull(t),e.list=o.isNull(t)?[]:t.sort((i,d)=>i.order-d.order),a._public.list=e.list,e.editFrom[0].list=e.list,g(n)},g=async n=>{e.tree=o.treeData(e.list,e.key,e.parent,"children");let t=o.findNode(e.tree,u=>!u.children),i=o.findNode(e.tree,u=>u[e.key]==n),d=o.isNull(i)?t:i;await I(),y.value.handleNodeClick(d)},b=n=>{a.active={...n}},v=(n,t)=>{if(console.log("val---",n,t),(n=="add"||n=="upd")&&l.value.onVisable(t),n=="child"){let i=o.varObj(e.parent,t[e.key]);l.value.onVisable(i)}n=="del"&&l.value.del(t)};return(n,t)=>{const i=$,d=C,u=q,x=N;return _(),h("div",A,[p("div",D,[c(d,{title:"路由列表"},{"left-content":w(()=>[...t[1]||(t[1]=[])]),"right-content":w(()=>[r(e).content.find(s=>typeof s.key=="object")&&r(e).content.find(s=>typeof s.key=="object").key.hasOwnProperty("add")?(_(),h("div",{key:0,class:"rad4 ptb5 plr8 flex-cc cursor bgi1 white ml10",onClick:t[0]||(t[0]=R(s=>r(l).onVisable(r(e).addItem),["stop"]))},[c(i,{class:"f12 fw"}),p("span",F,B(r(e).content.find(s=>typeof s.key=="object").key.add),1)])):L("",!0)]),_:1}),p("div",H,[c(u,{onHandleNodeClick:b,onHandleClick:v,state:r(e),ref_key:"listTreeRef",ref:y},null,8,["state"])]),c(x,{onInit:f,state:r(e),ref_key:"addRef",ref:l},null,8,["state"])])])}}});export{Z as default};
