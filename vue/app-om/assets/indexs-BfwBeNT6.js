import{d as fe,g as _e,r as he,b as be,o as c,c as d,u as b,e as m,a as n,_ as xe,f as s,p as z,c4 as ye,t as D,c5 as we,F as g,q as k,x as N,c7 as ge,k as x,c6 as C,c8 as ke,v as Y,c3 as Ve,c9 as Ce,C as y,w as S,ca as Te,cb as Ue,h as T,E as Ne,z as Se,A as Me,a7 as Z,a8 as V,ac as $e,l as je}from"./index-BWjCSAnw.js";import{E as Oe}from"./el-switch-i6AGQHxo.js";import{_ as ve,a as Ee,b as Je}from"./caret-top-BjIFQKO2.js";const Be={class:"layout-col"},Ae={key:1,class:"layout-col"},Ie={class:"ww100 flex-bc plr12 ptb8 bs4"},qe={class:"flex-ec flex1 h30"},ze={class:"f14 ml5"},De={class:"flex-col ww100 flex1 overlay"},Re={class:"ww100 flex-bc plr12 ptb8 bgc"},Fe={class:"flex-sc c3"},Ge=["onClick"],Le=["onUpdate:modelValue"],Pe=["onUpdate:modelValue"],Qe=["onUpdate:modelValue"],He={class:"flex-ec flex1 h36"},Ke=["onClick"],We=["onClick"],Xe=["onClick"],Ye={class:"f14 ml5"},Ze=["onClick"],es={class:"flex-sc c4"},ss=["onClick"],ls={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bgi13 flex-bc relative"},ts=["onUpdate:modelValue"],as={class:"flex-ec"},os=["onClick"],ns=["onClick"],is=["onClick"],ps={class:"flex-col ww100 flex1"},cs={class:"flex-sc c4"},rs={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},us=["onUpdate:modelValue"],ds={class:"flex-sc c4"},ms={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},fs=["onUpdate:modelValue"],_s={class:"flex-sc c4"},hs={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},bs={class:"flex-sc c4"},xs={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},ys=["onUpdate:modelValue"],ws={class:"flex-sc c4"},gs={class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},ks=["onClick"],Vs={class:"hh100 plr12 ptb14 bo-ce-1 flex1 bgi13 flex-bs"},Cs={class:"flex-ec"},Ts=["onClick"],Us=["onClick"],Ns=["onClick"],Ss={key:0,class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bs"},Ms={key:1,class:"hh100 plr12 ptb14 bo-ce-1 flex4 bg-white flex-bc"},$s={class:"flex-col-ss flex1"},js={class:"flex-sc"},Os={class:"flex-sc"},vs={class:"flex-sc"},Es={class:"flex-sc flex1"},Js={key:0,class:"flex1 flex-sc"},Bs={key:1,class:"flex1 flex-sc"},As={key:2,class:"flex1 flex-sc"},Is={key:3,class:"flex1 flex-col"},qs=["onClick"],zs=["onClick"],Ds=["onClick"],Rs=fe({__name:"indexs",setup(Fs){const{proxy:M}=_e(),w=M.publicStore(),j=M.configStore(),_=he({...w.$state,key:"id",now:0,model:"t_simulator"}),R={key:"",type:"string",valueType:"1",value:""},J={json:""},B={json:[R]},F={show:!0,status:!1,title:"",http:"",path:"",time:60,paramsType:"1",params1:[J],params2:[B]},G={show:!0,status:!0,title:"",http:"",apis:[F]},ee=[{name:"字符串",value:"string"},{name:"整型",value:"int"},{name:"浮点型",value:"float"}],se=[{name:"定值",value:"1"},{name:"时间",value:"2"},{name:"随机数",value:"3"},{name:"顺序数组",value:"4"},{name:"随机数组",value:"5"}],le=[{name:"时间擢(毫秒)",value:"1"},{name:"时间擢(秒)",value:"2"},{name:"年-月-日 时:分:秒",value:"3"}];be(async()=>{O()});const O=async()=>{let i={model:_.model},e=await w.http({Api:i});_.empty=!!M.isNull(e);let t=M.isNull(e)?[]:e.sort((l,f)=>l.order-f.order);t.forEach(l=>{l.apis=JSON.parse(l.apis)}),_.list=t,w._public.list=_.list},te=i=>{let e=oe(i);if(!e.status)return V({title:"提示",message:e.msg,type:"error"});let t=Object.assign({},i);t.apis=JSON.stringify(t.apis);let l={model:_.model,list:[t]};Z[t[_.key]?"updApi":"addApi"](l).then(f=>{f.code==200&&(V({title:"提示",message:"操作成功",type:"success"}),w.mockStatus=!w.mockStatus,O())}).catch(f=>{V({title:"提示",message:"操作失败",type:"error"})})},ae=(i,e)=>{$e.confirm("是否确定删除?","删除提示",{confirmButtonText:"确定",cancelButtonText:"关闭",type:"error"}).then(()=>{let t={model:_.model,list:[i]};Z.delApi(t).then(l=>{l.code==200&&(V({title:"提示",message:"操作成功",type:"success"}),w.mockStatus=!w.mockStatus,O())}).catch(l=>{V({title:"提示",message:"操作失败",type:"error"})})})},oe=i=>{let e={status:!0,msg:""};return i.apis.length!=0&&i.apis.forEach(t=>{L(i,t,e)}),e},L=(i,e,t)=>{!i.http&&!e.http&&(t.status=!1,t.msg="请输入请求地址"),e.path||(t.status=!1,t.msg="请输入请求路径"),e.time||(t.status=!1,t.msg="请输入间隔"),e.paramsType||(t.status=!1,t.msg="请选择请求体类型")},ne=(i,e)=>{let t={status:!0,msg:""};if(L(i,e,t),!t.status)return V({title:"提示",message:t.msg,type:"error"});let l=ie(e);console.log("params---",l),w.http({Api:l},e.path,{ip:e.http?e.http:i.http}).then(f=>{V({title:"提示",message:"发送成功",type:"success"})}).catch(f=>{V({title:"提示",message:"发送失败",type:"error"})})},ie=i=>{_.now=parseInt(Date.now());let e={};if(i.paramsType==1&&(i.params1.length==0?e={}:i.params1.length==1?i.params1[0].json?e=JSON.parse(i.params1[0].json):e={}:e=i.params1.map(t=>JSON.parse(t.json))),i.paramsType==2)if(i.params2.length==0)e={};else if(i.params2.length==1)i.params2[0].json.length==0?e={}:e=P(i.params2[0]);else{let t=[];i.params2.map(l=>{let f=P(l);t.push(f)}),e=t}return e},P=i=>{let e={},t="-.-";return i.json.map(l=>{if(l.valueType==1&&(t=l.value),l.valueType==2&&(t=l.value==1?_.now:l.value==2?Math.floor(_.now/1e3):M.parseTime(new Date)),l.valueType==3&&l.value[1]&&l.value[0]&&Number(l.value[1])>Number(l.value[0])){let f=Math.random()*(Number(l.value[1])-Number(l.value[0]))+Number(l.value[0]);t=Math.floor(f*100)/100}if(l.valueType==4&&l.value.length!=0&&l.value[0].val){let f=l.value.length,h=l.value.findIndex(v=>v.status);h==-1?(t=l.value[0].val,f!=1&&(l.value[1].status=!0)):(t=l.value[h].val,l.value[h].status=!1,f!=h+1?l.value[h+1].status=!0:l.value[0].status=!0)}if(l.valueType==5&&l.value.length!=0&&l.value[0].val){let f=l.value.length,h=Math.floor(Math.random()*f);t=l.value[h].val}e[l.key]=l.type=="int"?parseInt(t):l.type=="float"?parseFloat(t):t+""}),e};return(i,e)=>{const t=xe,l=ye,f=we,h=ve,v=ge,pe=Ee,ce=Je,$=ke,Q=Ve,re=Ce,ue=Oe,H=Te,de=Ue,U=Ne,A=Se,I=Me;return c(),d("div",Be,[b(_).empty&&i.isNull(b(_).list)?(c(),d("div",{key:0,class:"absolute-cc flex-col-cc w50x10 h50x6 bod-i1-1 rad5 cursor f28 i1",onClick:e[0]||(e[0]=m(r=>b(_).list.push(Object.assign({},G)),["stop"]))},[n(t),e[4]||(e[4]=s("span",{class:"mt10"},"新建模拟器",-1))])):(c(),d("div",Ae,[s("div",Ie,[e[7]||(e[7]=s("div",{class:"flex-sc"},[s("span",{class:"f15 fw"},"模拟器配置")],-1)),s("div",qe,[s("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi3 white ml10",onClick:e[1]||(e[1]=m(r=>b(_).list.push(Object.assign({},G)),["stop"]))},[n(t,{class:"f12 fw"}),e[5]||(e[5]=s("span",{class:"f14 ml5"},"模拟",-1))]),s("div",{class:z(["rad4 ptb6 plr10 flex-cc cursor white ml10",b(j).isMock?"bgi11":"bgi6"]),onClick:e[2]||(e[2]=m(r=>b(j).isMock=!b(j).isMock,["stop"]))},[n(l,{class:"f12 fw"}),s("span",ze,D(b(j).isMock?"已开启":"未开启"),1)],2),s("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi19 white ml10",onClick:e[3]||(e[3]=m(r=>O(),["stop"]))},[n(f,{class:"f12 fw"}),e[6]||(e[6]=s("span",{class:"f14 ml5"},"刷新",-1))])])]),s("div",De,[(c(!0),d(g,null,k(b(_).list,(r,me)=>(c(),d("div",{class:"flex-col ww100 mb20",key:me},[s("div",Re,[s("div",Fe,[s("div",{class:"f16 fw flex-sc cursor",onClick:m(a=>r.show=!r.show,["stop"])},[r.show?(c(),N(h,{key:0})):(c(),N(v,{key:1})),e[8]||(e[8]=s("span",{class:"ml5"},"模拟器",-1))],8,Ge),x(s("input",{class:"w50x3 f16 fw pb5 i1 mlr10",style:{"border-bottom":"2px #333 dashed"},placeholder:"请输入名称","onUpdate:modelValue":a=>r.title=a},null,8,Le),[[C,r.title,void 0,{trim:!0}]]),e[9]||(e[9]=s("span",{class:"f16 fw"},"全局地址",-1)),x(s("input",{class:"w50x4 f16 fw pb5 i1 mlr10",style:{"border-bottom":"2px #333 dashed"},placeholder:"(例：127.0.0.1:8808)","onUpdate:modelValue":a=>r.http=a},null,8,Pe),[[C,r.http,void 0,{trim:!0}]]),e[10]||(e[10]=s("span",{class:"f16 fw"},"当前排序",-1)),x(s("input",{class:"w50x4 f16 fw pb5 i1 mlr10",style:{"border-bottom":"2px #333 dashed"},placeholder:"数字越小排名越前","onUpdate:modelValue":a=>r.order=a},null,8,Qe),[[C,r.order,void 0,{trim:!0}]])]),s("div",He,[s("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi3 white ml10",onClick:m(a=>te(r),["stop"])},[n(f,{class:"f12 fw"}),e[11]||(e[11]=s("span",{class:"f14 ml5"},"保存",-1))],8,Ke),s("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi3 white ml10",onClick:m(a=>r.apis.push(Object.assign({},F)),["stop"])},[n(t,{class:"f12 fw"}),e[12]||(e[12]=s("span",{class:"f14 ml5"},"接口",-1))],8,We),s("div",{class:z(["rad4 ptb6 plr10 flex-cc cursor white ml10",r.status?"bgi11":"bgi6"]),onClick:m(a=>r.status=!r.status,["stop"])},[r.status?(c(),N(pe,{key:0,class:"f12 fw"})):(c(),N(ce,{key:1,class:"f12 fw"})),s("span",Ye,D(r.status?"已启用":"已禁用"),1)],10,Xe),s("div",{class:"rad4 ptb6 plr10 flex-cc cursor bgi8 white ml10",onClick:m(a=>ae(r),["stop"])},[n($,{class:"f12 fw"}),e[13]||(e[13]=s("span",{class:"f14 ml5"},"删除",-1))],8,Ze)])]),(c(!0),d(g,null,k(r.apis,(a,K)=>x((c(),d("div",{class:"flex-col hh100 ww100",key:K},[s("div",es,[s("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 bgi13 flex-sc cursor",onClick:m(u=>a.show=!a.show,["stop"])},[e[14]||(e[14]=s("span",{class:"pl20"},null,-1)),a.show?(c(),N(h,{key:0})):(c(),N(v,{key:1})),e[15]||(e[15]=s("span",{class:"ml5"},"名称(选填)",-1))],8,ss),s("div",ls,[x(s("input",{class:"flex1","onUpdate:modelValue":u=>a.title=u,placeholder:"(例：模拟数据)"},null,8,ts),[[C,a.title,void 0,{trim:!0}]]),s("div",as,[s("div",{class:"cursor i6 flex-cc mr12",onClick:m(u=>r.apis.push(JSON.parse(JSON.stringify(a))),["stop"])},[n(Q,{class:"f12 fw"}),e[16]||(e[16]=s("span",{class:"f14 ml2"},"复制",-1))],8,os),s("div",{class:"cursor i8 flex-cc mr15",onClick:m(u=>r.apis.splice(K,1),["stop"])},[n($,{class:"f12 fw"}),e[17]||(e[17]=s("span",{class:"f14 ml2"},"删除",-1))],8,ns),s("div",{class:"cursor i1 flex-cc",onClick:m(u=>ne(r,a),["stop"])},[n(re,{class:"f12 fw"}),e[18]||(e[18]=s("span",{class:"f14 ml2"},"模拟",-1))],8,is)])])]),x(s("div",ps,[s("div",cs,[e[19]||(e[19]=s("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 bgi13 flex-sc"},[s("span",{class:"i12 mr2 pl32"},"*"),y("地址")],-1)),s("div",rs,[x(s("input",{class:"flex1","onUpdate:modelValue":u=>a.http=u,placeholder:"(例：127.0.0.1:8808)"},null,8,us),[[C,a.http,void 0,{trim:!0}]])])]),s("div",ds,[e[20]||(e[20]=s("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 bgi13 flex-sc"},[s("span",{class:"i9 mr2 pl32"},"*"),y("路径")],-1)),s("div",ms,[x(s("input",{class:"flex1","onUpdate:modelValue":u=>a.path=u,placeholder:"(例：/api/admin/index)"},null,8,fs),[[C,a.path,void 0,{trim:!0}]])])]),s("div",_s,[e[21]||(e[21]=s("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 bgi13 flex-sc"},[s("span",{class:"pl40"}),y("状态")],-1)),s("div",hs,[n(ue,{modelValue:a.status,"onUpdate:modelValue":u=>a.status=u,"inline-prompt":"","active-text":"已启用","inactive-text":"已禁用"},null,8,["modelValue","onUpdate:modelValue"])])]),s("div",bs,[e[23]||(e[23]=s("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 bgi13 flex-sc"},[s("span",{class:"pl40"}),y("间隔")],-1)),s("div",xs,[x(s("input",{class:"flex1","onUpdate:modelValue":u=>a.time=u,placeholder:"(例：10)"},null,8,ys),[[C,a.time,void 0,{trim:!0}]]),e[22]||(e[22]=s("span",null,"秒(s)",-1))])]),s("div",ws,[e[27]||(e[27]=s("div",{class:"hh100 plr12 ptb14 bo-ce-1 flex1 bgi13 flex-sc"},[s("span",{class:"pl40"}),y("请求体类型")],-1)),s("div",gs,[n(de,{modelValue:a.paramsType,"onUpdate:modelValue":u=>a.paramsType=u,onChange:u=>{a.params1=[Object.assign({},J)],a.params2=[Object.assign({},B)]}},{default:S(()=>[n(H,{label:"1",value:"1",size:"large"},{default:S(()=>[...e[24]||(e[24]=[y("json",-1)])]),_:1}),n(H,{label:"2",value:"2",size:"large"},{default:S(()=>[...e[25]||(e[25]=[y("自定义",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","onChange"]),s("div",{class:"cursor bgi1 white flex-cc plr5 ptb4 rad5",onClick:m(u=>a.paramsType==1?a.params1.push(Object.assign({},J)):a.params2.push(Object.assign({},B)),["stop"])},[n(t,{class:"f12 mr2"}),e[26]||(e[26]=y("请求体",-1))],8,ks)])]),(c(!0),d(g,null,k(a.paramsType==1?a.params1:a.params2,(u,E)=>(c(),d("div",{class:"flex-sc c4",key:E},[s("div",Vs,[s("span",null,[e[28]||(e[28]=s("span",{class:"pl40"},null,-1)),y("请求体("+D(E+1)+")",1)]),s("div",Cs,[a.paramsType==2?(c(),d("div",{key:0,class:"cursor i1 flex-cc mr12",onClick:m(o=>u.json.push(JSON.parse(JSON.stringify(R))),["stop"])},[n(t,{class:"f12 fw"}),e[29]||(e[29]=s("span",{class:"f14 ml2"},"参数",-1))],8,Ts)):T("",!0),s("div",{class:"cursor i1 flex-cc mr12",onClick:m(o=>a.paramsType==1?a.params1.push(JSON.parse(JSON.stringify(u))):a.params2.push(JSON.parse(JSON.stringify(u))),["stop"])},[n(Q,{class:"f12 fw"}),e[30]||(e[30]=s("span",{class:"f14 ml2"},"复制",-1))],8,Us),s("div",{class:"cursor i1 flex-cc",onClick:m(o=>a.paramsType==1?a.params1.splice(E,1):a.params2.splice(E,1),["stop"])},[n($,{class:"f12 fw"}),e[31]||(e[31]=s("span",{class:"f14 ml2"},"删除",-1))],8,Ns)])]),a.paramsType==1?(c(),d("div",Ss,[n(U,{class:"flex1",type:"textarea",autosize:{minRows:10,maxRows:30},modelValue:u.json,"onUpdate:modelValue":o=>u.json=o,modelModifiers:{trim:!0},placeholder:'(例：{"a": 1, "b": 2}'},null,8,["modelValue","onUpdate:modelValue"])])):T("",!0),a.paramsType==2?(c(),d("div",Ms,[s("div",$s,[(c(!0),d(g,null,k(u.json,(o,q)=>(c(),d("div",{class:z(["flex-ss ww100",q!=0?"mt14 pt14 bot-ce-1":""]),key:q},[s("div",js,[e[32]||(e[32]=s("span",null,"键值",-1)),n(U,{style:{width:"150px"},class:"mlr10",modelValue:o.key,"onUpdate:modelValue":p=>o.key=p,modelModifiers:{trim:!0},placeholder:"(例：a)"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Os,[e[33]||(e[33]=s("span",null,"类型",-1)),n(I,{style:{width:"150px"},class:"mlr10",modelValue:o.type,"onUpdate:modelValue":p=>o.type=p,modelModifiers:{trim:!0},placeholder:"请选择"},{default:S(()=>[(c(),d(g,null,k(ee,p=>n(A,{key:p.value,label:p.name,value:p.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),s("div",vs,[e[34]||(e[34]=s("span",null,"值类型",-1)),n(I,{style:{width:"150px"},class:"mlr10",modelValue:o.valueType,"onUpdate:modelValue":p=>o.valueType=p,modelModifiers:{trim:!0},placeholder:"请选择",onChange:p=>o.value=o.valueType==1||o.valueType==2?"":o.valueType==3?["",""]:o.valueType==4||o.valueType==5?[{val:"",status:!1}]:""},{default:S(()=>[(c(),d(g,null,k(se,p=>n(A,{key:p.value,label:p.name,value:p.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),s("div",Es,[e[36]||(e[36]=s("span",{class:"h32 lh32"},"数值",-1)),o.valueType==1?(c(),d("div",Js,[n(U,{style:{width:"100%"},class:"ml10",modelValue:o.value,"onUpdate:modelValue":p=>o.value=p,modelModifiers:{trim:!0},placeholder:"(例：1)"},null,8,["modelValue","onUpdate:modelValue"])])):T("",!0),o.valueType==2?(c(),d("div",Bs,[n(I,{style:{width:"100%"},class:"ml10",modelValue:o.value,"onUpdate:modelValue":p=>o.value=p,modelModifiers:{trim:!0},placeholder:"请选择"},{default:S(()=>[(c(),d(g,null,k(le,p=>n(A,{key:p.value,label:p.name,value:p.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):T("",!0),o.valueType==3?(c(),d("div",As,[n(U,{style:{width:"100%"},class:"ml10",modelValue:o.value[0],"onUpdate:modelValue":p=>o.value[0]=p,modelModifiers:{trim:!0},placeholder:"最小值(例：1)"},null,8,["modelValue","onUpdate:modelValue"]),n(U,{style:{width:"100%"},class:"ml10",modelValue:o.value[1],"onUpdate:modelValue":p=>o.value[1]=p,modelModifiers:{trim:!0},placeholder:"最大值(例：10)"},null,8,["modelValue","onUpdate:modelValue"])])):T("",!0),o.valueType==4||o.valueType==5?(c(),d("div",Is,[s("div",{class:"cursor i1 flex-sc ml10",onClick:m(p=>o.value.push({val:"",status:!1}),["stop"])},[n(t,{class:"f12 fw"}),e[35]||(e[35]=s("span",{class:"f14 ml2"},"值",-1))],8,qs),(c(!0),d(g,null,k(o.value,(p,W)=>(c(),d("div",{class:"flex-sc ww100 mt14",key:W},[n(U,{style:{width:"100%"},class:"ml10",modelValue:p.val,"onUpdate:modelValue":X=>p.val=X,modelModifiers:{trim:!0},placeholder:"(例：1)"},null,8,["modelValue","onUpdate:modelValue"]),s("div",{class:"cursor i1 flex-cc ml15",onClick:m(X=>o.value.splice(W,1),["stop"])},[n($,{class:"f12 fw"})],8,zs)]))),128))])):T("",!0)]),s("div",{class:"cursor i1 flex-cc ml15",onClick:m(p=>u.json.splice(q,1),["stop"])},[n($,{class:"f12 fw"}),e[37]||(e[37]=s("span",{class:"f14 ml2"},"删除键值",-1))],8,Ds)],2))),128))])])):T("",!0)]))),128))],512),[[Y,a.show]])])),[[Y,r.show]])),128))]))),128)),e[38]||(e[38]=s("div",{class:"ww100 ptb20 bg-white ca tc fw f16"},"--- 我是有底线的 ---",-1))])]))])}}}),Qs=je(Rs,[["__scopeId","data-v-eab94bd6"]]);export{Qs as default};
